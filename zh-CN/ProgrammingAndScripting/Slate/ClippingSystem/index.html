<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProgrammingAndScripting/Slate/ClippingSystem/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 12:27:57 GMT -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="../../../../Include/Javascript/common_zh-CN.js" type="text/javascript"></script>
	<script type="text/javascript">
		var time = new Date(0);
		var preview = false;
		var relativeHTMLPath = "https://docs.unrealengine.com/4.26/";
				var pageid = 0;
				var heroimage = "";
				var lang = "zh-CN";
				var basePath = document.location.pathname.substring(0, document.location.pathname.indexOf('/' + lang + '/') + lang.length + 1);
		document.write('<base href="' +  encodeURI(basePath) + '/ProgrammingAndScripting/Slate/ClippingSystem/" />');
				var udnCSS = '../../../../Include/CSS/udn_public.css';
		var udnLangCSS = '';
				udnLangCSS = './../../../../Include/CSS/udn_public_CN.css">';
				var udnOverrideCSS = '../../../../Include/CSS/skin_overrides.css';
		var udnOverrideDarkCSS = '../../../../Include/CSS/skin_overrides_dark.css';
		var fancyboxCSS = '../../../../Include/CSS/jquery.fancybox.css';
		var jqueryuiCSS = '../../../../Include/CSS/jquery-ui.min.css';
		var qtipCSS = '../../../../Include/CSS/jquery.qtip.css';
		var prettifyCSS = '../../../../Include/CSS/prettify.css';
		var navbarCSS = '../../../../Include/CSS/navBar.css';
		var twentytwentyCSS = '../../../../Include/CSS/twentytwenty.css';
		var recommendationsCSS = '../../../../Include/CSS/jquery.recommendations.css';
	</script>
    <title>Slate 裁剪系统 | 虚幻引擎文档</title>
    	    <meta name=viewport content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-control" content="no-store">
    <script  src="../../../../Include/Javascript/CustomEvent.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn_extras.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-ui.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/informational.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.qtip.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/prettify.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.slimscroll.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.event.move.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.twentytwenty.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/lazysizes.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.recommendations.js" type="text/javascript"></script>
	
    <link async rel="icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async rel="shortcut icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async href="../../../../Include/Images/touch_icon.png" rel="apple-touch-icon" />
    <link async href="../../../../Include/Images/touch_icon_114.png" sizes="114x114" rel="apple-touch-icon" />    
		<script  src="../../../../Include/Javascript/CollapsibleLists.js" type="text/javascript"></script>
	<script  src="../../../../Include/Javascript/navigationBarUI.js"></script>
	<script  src="../../../../Include/Javascript/navigationBar.js"></script>
		
	<link rel="alternate" href="https://docs.unrealengine.com/latest/en-US/ProgrammingAndScripting/Slate/ClippingSystem/" hreflang="x-default" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/zh-CN/ProgrammingAndScripting/Slate/ClippingSystem/" hreflang="zh-CN" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ja/ProgrammingAndScripting/Slate/ClippingSystem/" hreflang="ja" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ko/ProgrammingAndScripting/Slate/ClippingSystem/" hreflang="ko" />

	<meta name="redirect" content="Programming/Slate/ClippingSystem" />
<meta name="intsourcechangelist" content="14085919" />
<meta name="availability" content="Public" />
<meta name="title" content="Slate 裁剪系统" />
<meta name="description" content="虚幻引擎 4 中 Slate 裁剪系统的总览。" />
<meta name="type" content="Overview" />
<meta name="skilllevel" content="Advanced" />
<meta name="version" content="4.17" />
<meta name="parent" content="ProgrammingAndScripting/Slate" />
<meta name="related" content="InteractiveExperiences/UMG/UserGuide/Clipping" />
<meta name="order" content="1" />
<meta name="keywords" content="Programming" />
<meta name="keywords" content="Slate" />
<meta name="keywords" content="UMG UI Designer" />
<meta name="crumbs" content="%ROOT%,ProgrammingAndScripting,ProgrammingAndScripting/Slate" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta property="og:title" content="Slate 裁剪系统" />
	<meta property="og:description" content="虚幻引擎 4 中 Slate 裁剪系统的总览。" />
		<meta property="og:image" content="" />
	</head>
<body id="webbgThree" style="visibility: hidden;" onload="document.body.style.visibility='visible';">
			<script>window.__tracking_base = 'https://tracking.unrealengine.com/';</script>
	<script src="../../../../../../tracking.unrealengine.com/tracking.js" async></script>    <div id="webThree">
				<div id="page_head">

			<edc-navigation blackListLangCodes='["de-de","es-es","es-mx","fr-fr","it-it","pt-br","ru-ru","pl-pl","tr-tr"]' locale="zh-CN" ></edc-navigation>
						<div id="pagenav">
				<div class="crumbs" id="crumbs">

	<span class="separator">></span> <a id="parent_link" href="../../index.html">编程和脚本编写</a>

	<span class="separator">></span> <a id="parent_link" href="../index.html">Slate UI框架</a>

<span class="separator">></span> <span id="page">Slate 裁剪系统</span>
</div>				<div id="pageNavRight">
								<!-- Start of Search -->
												<div id="search_container">
					<form name="bodySearch" method="get" action="https://www.unrealengine.com/zh-CN/bing-search" onsubmit="return validateSearch()">
						<input type="image" src="../../../../Include/Images/search_box_icon.png" class="searchbutton"/>
						<input type="hidden" name="filter" value="文档" />
						<input type="text" name="keyword" placeholder="搜索文档……" class="searchbox" autocomplete="off"/>
					</form>
				</div>
								<!-- End of Search -->
				<div id="skinContainer">
	<div id="skinSelect" class="btn btn-skin" onclick="ToggleMenu($('#skinMenu'), $(this));"></div>
	<div id="skinMenu">
		<div id="light" class="btn btn-select" onclick="createCookie('skin', 'light', 365);location.reload();">Light Theme</div>
		<div id="dark" class="btn btn-select" onclick="createCookie('skin', 'dark', 365);location.reload();">Dark Theme</div>
	</div>
</div>				</div>
			</div>
		</div>						<div id="navWrapper">
			<div id="nav-filter-container">
				<div id="nav-filter-inner">
					<form>
						<input type="text" placeholder="Filter pages..." id="nav-filter" onchange="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, this.value);if(this.value.length == 0){$('#filter-clear').hide();}else{$('#filter-clear').show();}" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
						<button class="close-icon" id="filter-clear" type="reset" onclick="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, '');$(this).hide();"></button>
					</form>
				</div>
			</div>
			<nav id="navPanel">
			</nav>
			<div id="navigation" title="Click to toggle navigation menu"><span>></span></div>
		</div>		
		<div id="splitter">
		</div>
				<div id="contentContainer">
										<div id="pagedefault">
				<div id="product-banner">
	<div id="product-logo"></div>
</div>				<div id="pagecontainer" style="padding-right:0px;">
					<!-- Start of Markdown converted page content -->
																				<div class="hero  ">
						<div class="imgContainer"><img src="#" /></div>						<div class="info">
							<div id="pageTitle">
								<h1 id="H1TitleId">Slate 裁剪系统</h1>
							</div>	
							<h2 >虚幻引擎 4 中 Slate 裁剪系统的总览。</h2>
							<div id="access">
								<div class="accessContainer">
																		<div class="skill_tag_filter Advanced"><a id="skill_link" href="../../../SiteIndex/index.html?skills=Advanced">Advanced</a></div>
																	</div>
							</div>
						</div>
					</div>
																				<div id="maincol">
						<div class="togglesection" id="osContainer">
	<div class="normaltitle">
		<p>Choose your operating system:</p>
	</div><div class="toggleButtons">
		<div class="btn btn-default btn-toggle OS windows" id="windows" onclick="setSelector('OS', 'windows');">
			<p>Windows</p>
		</div>
		<div class="btn btn-default btn-toggle OS mac" id="mac" onclick="setSelector('OS', 'mac');">
			<p>macOS</p>
		</div>
		<div class="btn btn-default btn-toggle OS linux" id="linux" onclick="setSelector('OS', 'linux');">
			<p>Linux</p>
		</div>
	</div>
</div>																		<div id="seeAlso">
	<div style="position:relative;">
		<div id="title">参见</div>
		<div id="pageList">
			<ul>
								<li>
					<p>
						<a id="related_link" href="../../../InteractiveExperiences/UMG/UserGuide/Clipping/index.html" title="概述了UMG界面设计器中的裁剪属性。">裁剪</a>
					</p>
				</li>
							</ul>
		</div>
	</div>
</div>
																														<div class="toc">
<div style="position:relative;">
    <div class="title">
    本页面的内容
    </div>
<div id="tocScroll">
    <ul>
	    		    			    <li id="">
	<p><a id="toc_link" href="#全新内容">全新内容</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#从4.16及更旧版本转换到4.17及更新版本的指南">从 4.16 及更旧版本转换到 4.17 及更新版本的指南</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#启用控件裁剪">启用控件裁剪</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#弃用的api">弃用的 API</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#自定义裁剪">自定义裁剪</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#包裹裁剪状态">包裹裁剪状态</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#剔除修改">剔除修改</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#调试裁剪">调试裁剪</a></p>
	</li>		    	        </ul>
</div>
</div>
</div>
<div class="warning">
	<p>虚幻引擎 4.17 版本发布后，全新的 Slate 裁剪系统打破了对 4.16 及更老版本的反向兼容。请参考此页面的 <a id="content_link" href="#conversionguidefrom416andearlierto417andlater" ><span>转换指南</span></a> 部分更新项目。 </p>
</div><p>虚幻引擎 4（UE4）的 Slate 裁剪系统可将图像或文本限制到画面的一个区域中。其实现方式是围绕创建的物体和面板创建一个裁剪矩形（或称裁剪 rect）。编辑器和 UMG UI 设计器工具均使用该系统。用户可根据需求利用 Slate 在编辑器中移动面板并调整其大小，裁剪系统则将文字和图像限制在裁剪 rect 中。结合 UMG 可实现更佳的渲染变形，对 UI 进行适当的裁剪。 
</p><h2 id="全新内容">全新内容</h2>
<p>虚幻引擎 4.17 版本对裁剪系统进行了极大修改，比旧版本更灵活。这也创造了给更多可能，使 <a id="content_link"filter-data="tag_umg_ui_designer" href="../../../InteractiveExperiences/UMG/UserGuide/index.html" ><span>UMG</span></a> 之类的工具系统能够添加更多渲染效果，用于项目的 UI 中。旧版本中的裁剪系统功能有限，布局空间仅为轴对齐，会导致难以渲染变形（常围绕边缘），如下例所示：
</p><div class="imagetable">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<thead>
			</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/OldClippingIssue1.jpg">
		<img class="  lazyload" alt="OldClippingIssue1.png" width="350" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/OldClippingIssue1.jpg" />
</picture>
</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/OldClippingIssue2.jpg">
		<img class="  lazyload" alt="OldClippingIssue2.png" width="350" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/OldClippingIssue2.jpg" />
</picture>
</p>
			</td>
	
</tr></tbody>
</table>
</div><p>在上图中，控件已旋转，但裁剪 rect（白点）却并未旋转。这样一来，即使图像位于 Canvas 面板边界中，也无法被渲染。 
</p><p>以下列表说明了裁剪系统 1.0 和 2.0 版本之间的区别：
</p><div class="simpletable">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>Clipping 1.0（4.16 及更旧版本） </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>Clipping 2.0（4.17 及更新版本） </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<ul ><li class="Default"><p>轴对齐裁剪 - 只在布局空间中发挥作用
</p></li><li class="Default"><p>每个控件均被裁剪
</p></li><li class="Default"><p>所有裁剪均在像素着色器中完成（要求每个顶点六个浮点）
</p></li><li class="Default"><p>允许对多个裁剪 rect 进行批处理，因为这些 rect 是批数据的一部分
</p></li><li class="Default"><p>渲染变形较为"特殊"，因为它们允许在父项所提供的裁剪 rect 之外进行渲染，而布局 rect 被裁剪掉后会存在不良后果
</p></li></ul>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<ul ><li class="Default"><p>任意四边形的裁剪
</p><ul ><li class="Default"><p>使用 Scissor Rects 进行裁剪的轴对齐裁剪区，可避免不必要的像素着色器运算
</p></li><li class="Default"><p>复杂的裁剪区使用模板缓存将裁剪区的任意堆叠组成模板缓存，然后用于裁剪绘制调用
</p></li></ul></li><li class="Default"><p>只有少数几个控件会（默认）进行裁剪，主要是滚动面板和可编辑文本域
</p><ul ><li class="Default"><p>渲染变形不再"特殊"，只要变形不进行裁剪，便允许用户在另一个控件之外进行渲染。
</p></li></ul></li><li class="Default"><p>Slate 无法对裁剪区进行批处理。这使得 Slate 顶点格式中不要求 6 个浮点，不再需要在像素着色器中进行裁剪
</p></li></ul>
			</td>
	
</tr></tbody>
</table>
</div><p>新系统支持在控件的渲染空间中进行裁剪，不需要轴对齐；使用系统时不再需要担心裁剪问题（左图），而是会直接裁剪掉最外侧的控件。新版本中，应用到内部控件的变形将在边缘被正确裁剪（右图）。
</p><div class="imagetable">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/ClippingOld.jpg">
		<img class="  lazyload" alt="ClippingOld.png" width="350" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/ClippingOld.jpg" />
</picture>
 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/ClippingNew.jpg">
		<img class="  lazyload" alt="ClippingNew.png" width="350" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/ClippingNew.jpg" />
</picture>
 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p>4.16 与更旧版本中的裁剪和变形。</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>在 4.17 与更新版本中应用到边缘上的裁剪</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>以及子项的变形。</p>
			</td>
	
</tr></tbody>
</table>
</div><p>多数情况下您都无需担心控件裁剪状态的变化。以游戏 UI 为例，您无需调整 UMG 中的控件，而多数情况下都需要对其进行修改，如滚动面板或编辑器，在这些区域中用户无法控制文本长度，需要对其进行裁剪，调整窗口或面板某个部分的大小。
</p><p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/ClippingExamples.jpg">
		<img class="  lazyload" alt="ClippingExamples.png" width="500" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/ClippingExamples.jpg" />
</picture>

</p><p>此处的几个例子说明了不同裁剪设置的效果：
</p><ul ><li class="Default"><p>左图 - 按键或文本上未启用裁剪。
</p></li><li class="Default"><p>中图 - 文本上已启用裁剪。
</p></li><li class="Default"><p>右图 - 按键上已启用裁剪。
</p></li></ul><p>请参考裁剪应用到不同对象上时的变化。因为系统裁剪到边界，所以填补之类的因素此处无需考虑。如果按键启用裁剪（右图），那么内容将在切断发生之前向边缘移动。如果文本负责处理裁剪（中图），那么文本将基于按键内容填补之类进行裁剪，缩减文本填入的空间。
</p><p>除简单的轴对齐裁剪外，系统还支持相互堆叠的任意裁剪四边形。 
</p><p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/TransformClipping.jpg">
		<img class="  lazyload" alt="TransformClipping.png" width="400" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/TransformClipping.jpg" />
</picture>

<div class="caption">
	
</div>
</p><p>举一个较为极端的例子，组合多个任意矩形是使用 3D 变形和投射的先决条件，因为被投射裁剪的控件需要在投射空间中执行裁剪。 
</p><a name="conversionguidefrom416andearlierto417andlater" ></a><h2 id="从4.16及更旧版本转换到4.17及更新版本的指南">从 4.16 及更旧版本转换到 4.17 及更新版本的指南</h2>
<p>4.17 版本中对 Slate 裁剪系统进行的修改会破坏对旧版本的兼容性，因此您需要根据以下部分的说明来更新项目，避免出现转换问题，同时了解在项目中对控件进行调试的新方法。
</p><h3 id="启用控件裁剪">启用控件裁剪</h3>
<p>对于所有 UMG 控件而言，用户可以调整所选控件 <strong>Details</strong> 面板中的 <strong>Clipping</strong> 属性。
</p><p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/UMGClippingProperty.jpg">
		<img class="  lazyload" alt="UMGClippingProperty.png" width="600" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/UMGClippingProperty.jpg" />
</picture>

</p><p>您可在此了解关于 <a id="content_link"filter-data="tag_umg_ui_designer" href="../../../InteractiveExperiences/UMG/UserGuide/Clipping/index.html" ><span>用 UMG UI 设计器进行裁剪</span></a> 的更多内容。
</p><p>如需在代码中启用裁剪，需要将 <code>EWidgetClipping</code> 的裁剪属性设为以下其中一个状态：
</p><ul ><li class="Default"><p>Inherit
</p></li><li class="Default"><p>ClipToBounds
</p></li><li class="Default"><p>ClipToBoundsWithoutIntersecting
</p></li><li class="Default"><p>ClipToBoundsAlways
</p></li><li class="Default"><p>OnDemand
</p></li></ul><p>请参考以下代码范例： 
</p><pre class="prettyprint"><code>SNew( SBorder )
.Clipping(EWidgetClipping::ClipToBounds)
&#91;
    ...
&#93;</code></pre>
<h3 id="弃用的api">弃用的 API</h3>
<p>以下 API 在 4.16 之后的版本中弃用。如果您的项目曾使用这些 API，则需要考虑现在是否仍然需要它们。并非每个控件都执行裁剪，因此您也许不再需要那些用于移动裁剪区的代码。
</p><ul ><li class="Default"><p><code>FSlateDrawElement::Make&#95;&#95;&#95;(...)</code> - 无需再将裁剪 rect 传入每个绘制调用，因此只需要移除函数调用即可自动使用新版本。
</p></li><li class="Default"><p><code>SScissorRectBox</code> - 这已不再需要，因为每个轴对齐的裁剪 rect 现在均是 scissor rect。使其最直接的子控件启用裁剪，将这些内容删除并替换之前进行的任务。
</p></li></ul><h3 id="自定义裁剪">自定义裁剪</h3>
<p>在一些情况下您可能需要在控件内部进行裁剪。举例而言，<code>SProgressBar</code> 可能需要基于进度条的进度对任意位置的进度条绘制进行裁剪。添加裁剪需要在 <code>OnPaint</code> 中执行以下操作：
</p><pre class="prettyprint"><code>OutDrawElements.PushClip(FSlateClippingZone(AllottedGeometry));

//TODO 在此进行绘制，否则将调用子控件绘制。

OutDrawElements.PopClip();</code></pre>
<p><code>FSlateClippingZone</code> 是窗口空间中的任意裁剪区域，可使用数种方法开启，对已有代码进行直接转换。
</p><p>如果还需要自定义裁剪影响 Hit Testing，则需要进行以下设置，将裁剪区推到 Hit Test Grid 上：
</p><pre class="prettyprint"><code>OutDrawElements.PushClip(FSlateClippingZone(AllottedGeometry));
Args.GetGrid().PushClip(FSlateClippingZone(GetCachedGeometry()));

//TODO 在此进行绘制，否则将调用子控件绘制。

OutDrawElements.PopClip();
Args.GetGrid().PopClip();</code></pre>
<div class="note">
	<p>命中测试网格的裁剪 rect 使用缓存的几何体，而并非 AllotedGeometry。在 <code>OnPaint</code> 中，<code>AllotedGeometry</code> 处于窗口空间中，而 Hit Test Grid 处于桌面空间中，因此必须使用 Tick 中获得的几何体。</p>
</div><h3 id="包裹裁剪状态">包裹裁剪状态</h3>
<p>在一些情况下，拥有裁剪状态的控件不负责进行裁剪。例如 <code>SScrollBox</code> 能让用户公开修改和其他控件相似的裁剪状态，然而当 <code>SScrollBox</code> 构造后，它会把 <code>bClippingProxy</code> 设为 <code>true</code>。因此 Slate 渲染此控件时将忽略其裁剪状态。
</p><p>在内部，<code>SScrollBox</code> 告知另一个嵌套控件其需要进行裁剪或执行被告知的裁剪状态。此外，用户修改裁剪状态时，<code>SScrollBox</code> 将覆盖名为 <code>OnClippingChanged</code> 的 <code>SWidget</code> 函数，使其了解合适将新的裁剪状态镜像到嵌套私有控件上。 
</p><h2 id="剔除修改">剔除修改</h2>
<p>虽然裁剪在渲染空间中执行，引擎仍然使用简单的边界框执行剔除。然而该框是基于渲染变形裁剪区的边界框。此外，裁剪和剔除可能随时间出现更多细微差别。如果您有一个自定义面板，执行 <code>MyClippingRect.IntersectionWith</code> 识别并剔除无法被绘制的控件，则需要使用 <code>SWidget</code> 函数 <code>IsChildWidgetCulled</code>。请参考下例：
</p><pre class="prettyprint"><code>for (int32 ChildIndex = 0; ChildIndex &lt; ArrangedChildren.Num(); ++ChildIndex)
{
    FArrangedWidget&amp; CurWidget = ArrangedChildren&#91;ChildIndex&#93;;

    if (!IsChildWidgetCulled(MyCullingRect, CurWidget))
    {
        // 绘制此控件。
    }
}</code></pre>
<div class="warning">
	<p>将 <code>MyClippingRect</code> 纳入 OnPaint 调用之处都需要被重命名为 <code>MyCullingRect</code>。</p>
</div><p>虽然裁剪系统有所修改，但 Slate 的剔除方法仍未改变。您需要注意，如果下例中的父控件（蓝色）在裁剪区（绿色）外被剔除，则子控件（黄色）也将被剔除。即使其拥有变形，能够在父项边界外进行整体渲染，也同样如此。裁剪属性 <strong>Clip to Bounds - Without Intersecting</strong> 启用时情况也是如此，因为标记只会被直接的父控件所勾选。
</p><!--
before:param
after:param
position:paramliteral
-->
<div class="comparison_slider">
    <div class="first">
        <p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/Slate_CullingEd.jpg">
		<img class="  lazyload" alt="Widgets viewed outside | the clipping zone." width="600" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/Slate_CullingEd.jpg" />
</picture>
</p>
        <div class="overlay-first "></div>
    </div>
    <div class="last">
        <p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/Slate_CullingEd2.jpg">
		<img class="  lazyload" alt="Widgets culled outside | the clipping zone." width="600" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/Slate_CullingEd2.jpg" />
</picture>
</p>
        <div class="overlay-last "></div>
    </div>
</div><h2 id="调试裁剪">调试裁剪</h2>
<p><strong>Widget Reflector</strong> 在编辑器中显示所选控件的裁剪状态。
</p><div class="fullwidth">
	<p><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/WidgetReflector.jpg">
		<img class="  lazyload" alt="WidgetReflector.png" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/WidgetReflector.jpg" />
</picture>
</p>
</div><p><div class="caption">
	<p>使用 Widget Reflector 选中一个文本块，说明裁剪状态被设为 On Demand。</p>
</div>
</p><p>打开 <strong>Widget Reflector</strong> 的方法是：前往 File 菜单，选择 <strong>Window</strong> > <strong>Developer Tools</strong> > <strong>Widget Reflector</strong>。
</p><p>以下控制台变量可用于调试编辑器中任意控件的裁剪和剔除状态：
</p><div class="simpletable">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>控制台变量 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>描述 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>Slate.ShowClipping</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>启用后，这将显示所有轴对齐裁剪 rect（Scissor Rects）的黄色轮廓，以及全部模板裁剪四边形的红色轮廓。<div class="lightbox">
	<p><span class="non-localized"><a id="content_link" href="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/ShowClipping.png" ><span><picture>
		<source data-srcset="./../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/ShowClipping.jpg">
		<img class="  lazyload" alt="ShowClipping.png" width="200" data-src="../../../../Images/ProgrammingAndScripting/Slate/ClippingSystem/ShowClipping.jpg" />
</picture>
</span></a></span></p>
</div><p><div class="caption">
	<p>点击图片查看全图。 </p>
</div></p>
</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>Slate.DebugCulling</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>启用后，这将有助于您更好地理解剔除在面板中的工作原理，以及其未能正常工作的原因。它在 GPU 上禁用裁剪，但一切均照常进行，因此您能够看到所有内容在裁剪区边界外渲染，并确定它们是否根据需求被剔除。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>Slate.EnableDrawEvents</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>启用后，绘制事件将被启用。对 RenderDoc 或相似内容进行调试时便更容易理解批处理或裁剪状态转换。使用调试版本时此变量默认启用。</p>
			</td>
	
</tr></tbody>
</table>
</div>
																	</div>
					<!-- End of Markdown converted page content -->
				</div>
												<div id="pageTags">
				<div class="title">标签</div>
					<div>
					<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=Programming">Programming</a></div>
<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=Slate">Slate</a></div>
<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=UMG%20UI%20Designer">UMG UI Designer</a></div>
					</div>
				</div>
								<div id="recommendations"></div>			</div>
						  									<div id="announcement">
			<div style="display:inline-block;margin:5px;">
				欢迎帮助改进虚幻引擎文档！请告诉我们该如何更好地为您服务。
			</div>
			<div style="margin:5px;display:inline-block;">
				<div class="btn action" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();window.open('https://epicgames.questionpro.com/t/AP9dGZkjp4');createCookie('announcement-read', new Date().getTime(), 30);">填写问卷调查</div>
				<div class="btn btn-default" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();createCookie('announcement-read', new Date().getTime(), 30);">取消</div>
			</div>
			<div class="btn-close" style="position:absolute;right:5px;top:10px;padding:3px;width:14px;height:14px;" onclick="$('#announcement').hide();"></div>
			</div>
					</div>
	</div></body>

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProgrammingAndScripting/Slate/ClippingSystem/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 12:28:02 GMT -->
</html>
