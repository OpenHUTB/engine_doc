<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProgrammingAndScripting/Online/Steam/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 11:11:26 GMT -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="../../../../Include/Javascript/common_zh-CN.js" type="text/javascript"></script>
	<script type="text/javascript">
		var time = new Date(0);
		var preview = false;
		var relativeHTMLPath = "https://docs.unrealengine.com/4.26/";
				var pageid = 0;
				var heroimage = "";
				var lang = "zh-CN";
				var basePath = document.location.pathname.substring(0, document.location.pathname.indexOf('/' + lang + '/') + lang.length + 1);
		document.write('<base href="' +  encodeURI(basePath) + '/ProgrammingAndScripting/Online/Steam/" />');
				var udnCSS = '../../../../Include/CSS/udn_public.css';
		var udnLangCSS = '';
				udnLangCSS = './../../../../Include/CSS/udn_public_CN.css">';
				var udnOverrideCSS = '../../../../Include/CSS/skin_overrides.css';
		var udnOverrideDarkCSS = '../../../../Include/CSS/skin_overrides_dark.css';
		var fancyboxCSS = '../../../../Include/CSS/jquery.fancybox.css';
		var jqueryuiCSS = '../../../../Include/CSS/jquery-ui.min.css';
		var qtipCSS = '../../../../Include/CSS/jquery.qtip.css';
		var prettifyCSS = '../../../../Include/CSS/prettify.css';
		var navbarCSS = '../../../../Include/CSS/navBar.css';
		var twentytwentyCSS = '../../../../Include/CSS/twentytwenty.css';
		var recommendationsCSS = '../../../../Include/CSS/jquery.recommendations.css';
	</script>
    <title>Online Subsystem Steam | 虚幻引擎文档</title>
    	    <meta name=viewport content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-control" content="no-store">
    <script  src="../../../../Include/Javascript/CustomEvent.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn_extras.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-ui.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/informational.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.qtip.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/prettify.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.slimscroll.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.event.move.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.twentytwenty.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/lazysizes.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.recommendations.js" type="text/javascript"></script>
	
    <link async rel="icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async rel="shortcut icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async href="../../../../Include/Images/touch_icon.png" rel="apple-touch-icon" />
    <link async href="../../../../Include/Images/touch_icon_114.png" sizes="114x114" rel="apple-touch-icon" />    
		<script  src="../../../../Include/Javascript/CollapsibleLists.js" type="text/javascript"></script>
	<script  src="../../../../Include/Javascript/navigationBarUI.js"></script>
	<script  src="../../../../Include/Javascript/navigationBar.js"></script>
		
	<link rel="alternate" href="https://docs.unrealengine.com/latest/en-US/ProgrammingAndScripting/Online/Steam/" hreflang="x-default" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/zh-CN/ProgrammingAndScripting/Online/Steam/" hreflang="zh-CN" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ja/ProgrammingAndScripting/Online/Steam/" hreflang="ja" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ko/ProgrammingAndScripting/Online/Steam/" hreflang="ko" />

	<meta name="redirect" content="Programming/Online/Steam" />
<meta name="intsourcechangelist" content="6896225" />
<meta name="availability" content="Public" />
<meta name="title" content="Online Subsystem Steam" />
<meta name="description" content="Online Subsystem Steam的概述，包括如何设置项目以在Valve的Steam平台上分发。" />
<meta name="type" content="overview" />
<meta name="version" content="4.22" />
<meta name="parent" content="ProgrammingAndScripting/Online" />
<meta name="order" content="" />
<meta name="keywords" content="Steam" />
<meta name="keywords" content="Online Subsystem" />
<meta name="crumbs" content="%ROOT%,ProgrammingAndScripting,ProgrammingAndScripting/Online" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta property="og:title" content="Online Subsystem Steam" />
	<meta property="og:description" content="Online Subsystem Steam的概述，包括如何设置项目以在Valve的Steam平台上分发。" />
		<meta property="og:image" content="" />
	</head>
<body id="webbgThree" style="visibility: hidden;" onload="document.body.style.visibility='visible';">
			<script>window.__tracking_base = 'https://tracking.unrealengine.com/';</script>
	<script src="../../../../../../tracking.unrealengine.com/tracking.js" async></script>    <div id="webThree">
				<div id="page_head">

			<edc-navigation blackListLangCodes='["de-de","es-es","es-mx","fr-fr","it-it","pt-br","ru-ru","pl-pl","tr-tr"]' locale="zh-CN" ></edc-navigation>
						<div id="pagenav">
				<div class="crumbs" id="crumbs">

	<span class="separator">></span> <a id="parent_link" href="../../index.html">编程和脚本编写</a>

	<span class="separator">></span> <a id="parent_link" href="../index.html">在线子系统</a>

<span class="separator">></span> <span id="page">Online Subsystem Steam</span>
</div>				<div id="pageNavRight">
								<!-- Start of Search -->
												<div id="search_container">
					<form name="bodySearch" method="get" action="https://www.unrealengine.com/zh-CN/bing-search" onsubmit="return validateSearch()">
						<input type="image" src="../../../../Include/Images/search_box_icon.png" class="searchbutton"/>
						<input type="hidden" name="filter" value="文档" />
						<input type="text" name="keyword" placeholder="搜索文档……" class="searchbox" autocomplete="off"/>
					</form>
				</div>
								<!-- End of Search -->
				<div id="skinContainer">
	<div id="skinSelect" class="btn btn-skin" onclick="ToggleMenu($('#skinMenu'), $(this));"></div>
	<div id="skinMenu">
		<div id="light" class="btn btn-select" onclick="createCookie('skin', 'light', 365);location.reload();">Light Theme</div>
		<div id="dark" class="btn btn-select" onclick="createCookie('skin', 'dark', 365);location.reload();">Dark Theme</div>
	</div>
</div>				</div>
			</div>
		</div>						<div id="navWrapper">
			<div id="nav-filter-container">
				<div id="nav-filter-inner">
					<form>
						<input type="text" placeholder="Filter pages..." id="nav-filter" onchange="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, this.value);if(this.value.length == 0){$('#filter-clear').hide();}else{$('#filter-clear').show();}" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
						<button class="close-icon" id="filter-clear" type="reset" onclick="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, '');$(this).hide();"></button>
					</form>
				</div>
			</div>
			 <nav id="navPanel">
				<div class="contents-table-el"><!----><!----><!----><!----><a class="contents-table-link is-parent" href="/zh-CN/Basics/index.html">理解基础概念</a><!----></div>
				<div class="contents-table-el"><a class="contents-table-link is-parent" href="/zh-CN/WorkingWithContent/index.html">管理内容</a><!----></div>
				<div class="contents-table-el"><a class="contents-table-link is-parent" href="/zh-CN/BuildingWorlds/index.html">构建虚拟世界</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/RenderingAndGraphics/index.html">设计视觉、渲染和图形效果</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/ProgrammingAndScripting/index.html">编程和脚本编写</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/InteractiveExperiences/index.html">创建交互体验</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/AnimatingObjects/index.html">为角色和对象添加动画</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/WorkingWithMedia/index.html">使用媒体</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/ProductionPipelines/index.html">建立你的开发流程</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/TestingAndOptimization/index.html">测试并优化你的内容</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/SharingAndReleasing/index.html">项目分享及发布</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/Resources/index.html">示例与教学</a><!----></div>
				<div class="contents-table-el"><a class="contents-table-link is-parent" href="/zh-CN/WhatsNew/index.html">新内容</a></div>
			</nav>
			<div id="navigation" title="Click to toggle navigation menu"><span>></span></div>
		</div>		
		<div id="splitter">
		</div>
				<div id="contentContainer">
										<div id="pagedefault">
				<div id="product-banner">
	<div id="product-logo"></div>
</div>				<div id="pagecontainer" style="padding-right:0px;">
					<!-- Start of Markdown converted page content -->
																				<div class="hero  ">
						<div class="imgContainer"><img src="#" /></div>						<div class="info">
							<div id="pageTitle">
								<h1 id="H1TitleId">Online Subsystem Steam</h1>
							</div>	
							<h2 >Online Subsystem Steam的概述，包括如何设置项目以在Valve的Steam平台上分发。</h2>
							<div id="access">
								<div class="accessContainer">
																																			</div>
							</div>
						</div>
					</div>
																				<div id="maincol">
						<div class="togglesection" id="osContainer">
	<div class="normaltitle">
		<p>Choose your operating system:</p>
	</div><div class="toggleButtons">
		<div class="btn btn-default btn-toggle OS windows" id="windows" onclick="setSelector('OS', 'windows');">
			<p>Windows</p>
		</div>
		<div class="btn btn-default btn-toggle OS mac" id="mac" onclick="setSelector('OS', 'mac');">
			<p>macOS</p>
		</div>
		<div class="btn btn-default btn-toggle OS linux" id="linux" onclick="setSelector('OS', 'linux');">
			<p>Linux</p>
		</div>
	</div>
</div>																																				<div class="toc">
<div style="position:relative;">
    <div class="title">
    本页面的内容
    </div>
<div id="tocScroll">
    <ul>
	    		    			    <li id="">
	<p><a id="toc_link" href="#满足valve的要求">满足Valve的要求</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#下载steamworks">下载Steamworks</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#编译ue4">编译UE4</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#设置steamworkssdk">设置Steamworks SDK</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#steam应用id">Steam应用ID</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#发布构建版">发布构建版</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#配置应用程序设置">配置应用程序设置</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#步骤">步骤</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#最终结果">最终结果</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#完成的设置">完成的设置</a></p>
	</li>					</ul>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#服务器和大厅">服务器和大厅</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#大厅细节">大厅细节</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#服务器细节">服务器细节</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#steam在线验证">Steam在线验证</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#启用steamauth">启用SteamAuth</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#steamauth委托">SteamAuth委托</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#附加提示">附加提示</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#使用ipnetdriver">使用IPNetDriver</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#模块设置">模块设置</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#steamoverlayonmac">Steam Overlay on Mac</a></p>
	</li>					</ul>
	</li>		    	        </ul>
</div>
</div>
</div>
<p>Contributors:Valve
</p><p><strong>Online Subsystem Steam API</strong> 使您可以将虚幻引擎4（UE4）应用程序发布到<a id="content_link" href="https://partner.steamgames.com/" ><span>Valve的Steam平台</span></a>。
<strong>Steam</strong> 模块的主要目的是帮助您通过一组功能（如媒介和通栏广告）将应用程序分发给Steam用户。
此外，Steam模块实现多个由<a id="content_link" href="../index.html" ><span>Online Subsystem</span></a>公开的接口，支持Steamworks Software Development Kit（SDK）提供的大多数功能。
</p><p>部分可用的Steam接口包括：
</p><ul ><li class="Default"><p>Matchmaking（Lobbies和GameServer API）
</p></li><li class="Default"><p>Leaderboards
</p></li><li class="Default"><p>Achievements
</p></li><li class="Default"><p>Voice
</p></li><li class="Default"><p>UserCloud
</p></li><li class="Default"><p>SharedCloud
</p></li><li class="Default"><p>External UI
</p></li></ul><div class="note">
	<p>请参考<a id="content_link" href="https://docs.unrealengine.com/en-US/API/Plugins/OnlineSubsystemSteam/FOnlineSubsystemSteam" title="FOnlineSubsystemSteam"><span>Online Subsystem Steam API参考</span></a>以了解当前可用的Steam接口的更完整列表。</p>
</div><h2 id="满足valve的要求">满足Valve的要求</h2>
<p>Steam Subsystem需要通过<a id="content_link" href="https://partner.steamgames.com/?goto=%2Fhome" ><span>Valve Steamworks</span></a>进行额外设置。
请联系<a id="content_link" href="http://www.valvesoftware.com/contact/" ><span>Valve</span></a>并参考<a id="content_link" href="https://partner.steamgames.com/doc/home" ><span>Steamworks SDK文档</span></a>以确保您的应用程序满足Valve的要求，然后再尝试将Steam与UE4一起使用。
</p><h2 id="下载steamworks">下载Steamworks</h2>
<p>如果您的应用程序满足Valve的要求，请继续并下载最新版<a id="content_link" href="https://partner.steamgames.com/" ><span>Steamworks SDK</span></a>。
SDK需要解压并复制到<code>/YourUnrealEnginePath/Engine/Source/ThirdParty/Steamworks/Steam&#91;当前版本&#93;/sdk</code>
</p><div class="note">
	<p>如果要更新项目的Steamworks SDK，请确保更新项目Steamworks路径中的<code>&#91;当前版本&#93;</code>：<br /><code>/YourUnrealEnginePath/Engine/Source/ThirdParty/Steamworks/</code><strong>Steam[当前版本]</strong><code>/sdk</code><br />您还需要更新`Steamworks.build.cs<code>，它位于项目目录中。<br />!&#91;&#93;(SteamworksCSFile.png)<br />在本示例中，</code>[当前版本]<code>格式为`v139</code>。</p>
</div><h3 id="编译ue4">编译UE4</h3>
<p>如果您<a id="content_link"filter-data="tag_programming tag_unreal_build_system" href="../../../ProductionPipelines/DevelopmentSetup/BuildingUnrealEngine/index.html" ><span>从源代码编译虚幻引擎4</span></a>，应采取以下步骤：
</p><ol ><li class="Default"><p>打开"OnlineSubsystemSteamPrivatePCH.h"（位于"..\..\Plugins\Online\OnlineSubsystemSteam\Source\Private\"中），在这里您会看到以下代码，这行代码定义Steamworks SDK的根目录位置：
</p><pre class="prettyprint"><code>#define STEAM&#95;SDK&#95;ROOT&#95;PATH TEXT("Binaries/ThirdParty/Steamworks")</code></pre></li><li class="Default"><p>您需要将这一行修改为：
</p><pre class="prettyprint"><code>#define STEAM&#95;SDK&#95;VER TEXT("Steam&#91;Current Version&#93;")</code></pre></li></ol><h2 id="设置steamworkssdk">设置Steamworks SDK</h2>
<p>对预编译版本引擎使用Steam应只需要将部分动态链接库从Valve SDK复制到相应的文件夹。如果您想要根据源代码重新编译引擎，还需要将SDK放在合适的位置。现在，将相关的可重新分发文件从SDK <code>istributable&#95;bin/</code>目录复制到以下位置：
</p><!--
category:paramliteral
id:paramliteral
content:param
active:paramliteral
-->
<div class="button_content OS windows active_button_content">
    <div class="container">
        <div class="note">
	<p>部分64位库位于Steam客户端目录中（在编写本文时，Valve没有将所有库包含在SDK中）。</p>
</div><p><code>/YourUnrealEnginePath/Engine/Binaries/ThirdParty/Steamworks/Steam&#91;Current Version&#93;/Win64</code>
</p><ul ><li class="Default"><p>steam_api64.dll
</p></li><li class="Default"><p>steamclient64.dll
</p></li><li class="Default"><p>tier0_s64.dll
</p></li><li class="Default"><p>vstdlib_s64.dll
</p></li></ul><p><code>/YourUnrealEnginePath/Engine/Binaries/ThirdParty/Steamworks/Steam&#91;Current Version&#93;/Win32</code>
</p><ul ><li class="Default"><p>steam_api.dll
</p></li><li class="Default"><p>steamclient.dll
</p></li><li class="Default"><p>tier0_s.dll
</p></li><li class="Default"><p>vstdlib_s.dll
</p></li></ul><div class="note">
	<p>只有在显式链接不允许为专用服务器版本使用 "-force_steamclient_link" 标签时，才会需要 <code>tier0&#95;s.dll</code> 和 <code>vstdlib&#95;s.dll</code> 文件。客户端版本永远不会需要这些文件。</p>
</div>
    </div>
</div><!--
category:paramliteral
id:paramliteral
content:param
active:paramliteral
-->
<div class="button_content OS mac active_button_content">
    <div class="container">
        <p>在UE4 4.22及更早版本中：
<code>/YourUnrealEnginePath/EngineOrGameFolder/Binaries/Mac/YourGame.app/Contents/MacOS</code>
</p><ul ><li class="Default"><p>libsteam_api.dylib (from <code>/redistributable&#95;bin/osx32</code> - the <a id="content_link" href="https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/DynamicLibraries/000-Introduction/Introduction.html#//apple_ref/doc/uid/TP40001908-SW1" ><span>dynamic library</span></a> (*.dylib) has both 32 and 64 bit support)
</p></li></ul><p>从UE4 4.23版本开始，Mac用户还必须运行以下命令：
<code>/YourUnrealEnginePath/Engine/Binaries/ThirdParty/Steamworks/Steam&#91;Current Version&#93;/Mac/</code>
</p><ul ><li class="Default"><p><code>libsteam&#95;api.dylib</code>, generated by running the following command:
</p><p>install_name_tool -id @rpath/libsteam_api.dylib /redistributable_bin/osx32/libsteam_api.dylib
</p></li></ul>
    </div>
</div><!--
category:paramliteral
id:paramliteral
content:param
active:paramliteral
-->
<div class="button_content OS linux active_button_content">
    <div class="container">
        <div class="note">
	<p>Linux用户必须随可执行文件一起链接并分发以下文件。</p>
</div><p><code>/YourUnrealEnginePath/Engine/Binaries/ThirdParty/Steamworks/Steam&#91;Current Version&#93;/i686-unknown-linux-gnu/libsteam&#95;api.so</code>
</p><ul ><li class="Default"><p>redistibutable_bin/linux32/libsteam_api.so
</p></li></ul><p><code>/YourUnrealEnginePath/Engine/Binaries/ThirdParty/Steamworks/Steam&#91;Current Version&#93;/x86&#95;64-unknown-linux-gnu/libsteam&#95;api.so</code>
</p><ul ><li class="Default"><p>redistibutable_bin/linux64/libsteam_api.so
</p></li></ul>
    </div>
</div><h2 id="steam应用id">Steam应用ID</h2>
<p>所有使用Steam Online Subsystem的游戏都必须有有效的应用程序ID，因为如果Steamworks API不知道您应用程序的Steam应用ID，就无法初始化。
在初始化Steam之前，UE4将生成`steam_appid.txt<code>（在正常关闭引擎时，UE4会删除这个文件）。
需要注意的是，</code>steam_appid.txt`必须位于应用程序可执行文件所在的目录，因为Steam将在当前工作目录寻找这个文本文件。
此外，该文件不应包含在任何Steam映像中。
</p><p>如果您打开`steam_appid.txt`，将会看到 **SteamDevAppId** 条目，这个字段向Steam暗示应用程序ID。
这样就无需使用Steam客户端（尽管它必须运行）启动游戏。
</p><div class="tip">
	<p>如果想要测试应用程序，可以使用 <strong>SteamDevAppId</strong> <code>480</code>，这是所有开发者共享的测试应用ID。
虽然您可以使用之前提到的测试应用ID来测试大都数Steam接口，但应用程序需要有Steam应用ID才能发布。</p>
</div><h3 id="发布构建版">发布构建版</h3>
<p>在发布构建版时，引擎会检查以确保登录用户正确订阅了游戏，如果引擎测试返回false，则会关闭（这是帮助保护游戏的一种方式）。
此外，使用Steam DRM（请参阅Steamworks SDK）应进一步保护游戏不被篡改。
</p><h2 id="配置应用程序设置">配置应用程序设置</h2>
<div class="note">
	<p>如果您使用 <strong>虚幻项目浏览器</strong> 创建新项目，那么`DefaultEngine.ini`中应该没有 <strong>Online Subsystem</strong> 设置；但如果您要修改我们的某个样本项目，则 <strong>Online Subsystem</strong> 设置可能已经存在。</p>
</div><p>现在，您已经为应用程序设置了Steamworks SDK（同时设置Steam应用ID），便已准备好了配置应用程序设置以使用Online Subsystem Steam。
</p><h3 id="步骤">步骤</h3>
<ol ><li class="Default"><p>打开项目的`DefaultEngine.ini`文件，并添加以下设置：
</p><p>[/Script/Engine.GameEngine]
+NetDriverDefinitions=(DefName="GameNetDriver",DriverClassName="OnlineSubsystemSteam.SteamNetDriver",DriverClassNameFallback="OnlineSubsystemUtils.IpNetDriver")
</p><p><strong>NetDriverDefinitions</strong> 描述了可供UE4使用的网络驱动器，并添加了以下属性：
</p><ul ><li class="Default"><p><strong>DefName</strong> 是该网络驱动器定义的唯一名称。
</p></li><li class="Default"><p><strong>DriverClassName</strong> 是主网络驱动器的类名称。
</p></li><li class="Default"><p><strong>DriverClassNameFallBack</strong> 是退却网络驱动器的类名（如果主网络驱动器类初始化失败）。
</p></li></ul></li><li class="Default"><p>为了告诉UE4使用Online Subsystem Steam，添加以下设置：
</p><p>[OnlineSubsystem]
DefaultPlatformService=Steam
</p></li><li class="Default"><p>现在，您已经告诉UE4，您希望应用程序使用Steam Online Subsystem，接下来需要添加以下设置来配置 <strong>OnlineSubsystemSteam</strong> 模块：
</p><p>[OnlineSubsystemSteam]
bEnabled=true
SteamDevAppId=480
</p></li><li class="Default"><p>最后，需要为应用程序连接在网络驱动器中指定Steam类：
</p><p>[/Script/OnlineSubsystemSteam.SteamNetDriver]
NetConnectionClassName="OnlineSubsystemSteam.SteamNetConnection"
</p></li></ol><h3 id="最终结果">最终结果</h3>
<p>在本简短指南结束后，您的应用程序`DefaultEngine.ini`文件应类似于以下设置块。如果你想查看其他项目是如何设置的并使用Online Subsystem，请参考我们的样本项目库。
</p><h4 id="完成的设置">完成的设置</h4>
<p><strong>DefaultEngine.ini</strong>
</p><pre class="prettyprint"><code>&#91;/Script/Engine.GameEngine&#93;
+NetDriverDefinitions=(DefName="GameNetDriver",DriverClassName="OnlineSubsystemSteam.SteamNetDriver",DriverClassNameFallback="OnlineSubsystemUtils.IpNetDriver")

&#91;OnlineSubsystem&#93;
DefaultPlatformService=Steam

&#91;OnlineSubsystemSteam&#93;
bEnabled=true
SteamDevAppId=480

&#91;/Script/OnlineSubsystemSteam.SteamNetDriver&#93;
NetConnectionClassName="OnlineSubsystemSteam.SteamNetConnection"</code></pre>
<h2 id="服务器和大厅">服务器和大厅</h2>
<p>Steam支持利用大厅进行点对点匹配（专用和聆听服务器游戏），并提供运行专用服务器的功能。利用大厅，用户可获悉游戏服务器的相关信息，且大厅常用于传达聆听服务器游戏的相关游戏特定信息（如正在游玩的地图或模式等）。通过匹配系统，用户还可在无需加入游戏时看到连接到大厅的用户数量。专用服务器是与大厅不同的的二进制，其任务是运行并主持游戏的服务器端部分。欲了解Steam的功能、实现或开发者界面的更多相关信息，请参阅Steam网站上的<a id="content_link" href="https://partner.steamgames.com/doc/home" ><span>合作伙伴文档</span></a>。
</p><h3 id="大厅细节">大厅细节</h3>
<p>大厅实质上是Steam的后端服务上的聊天室，作为点对点实例存在。与服务器不同，在加入前无法获得如ping时或当前其他用户数等大厅相关信息。其通常用于聆听服务器。要设置大厅，将 <code>bUsesPresence</code> 标志设为 <code>true</code>。
</p><h3 id="服务器细节">服务器细节</h3>
<p>要设置服务器实例，将 <code>bUsesPresence</code> 标为 <code>false</code>。专用服务器需要以下三种宏，均须与合作伙伴面板（位于Steam专用服务器工具页面）上的值匹配。如此类值不匹配，Steam网络将不显示专用服务器：
</p><div class="simpletable">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>UE4宏 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>Steam命名 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>说明 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>UE4&#95;PROJECT&#95;STEAMPRODUCTNAME</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>STEAMPRODUCTNAME</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>Valve建议将此设为版本ID，通常使用AppID（字符串形式）或无额外符号的简略产品名。<div class="note">
	<p>更改此字段（如更新版本ID）将导致Steam在匹配时忽略使用旧命名的所有活跃服务器，且需在合作伙伴后端修改工具信息。</p>
</div></p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>UE4&#95;PROJECT&#95;STEAMGAMEDIR</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>STEAMGAMEDIR</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此通常为游戏的文件夹命名，且无可包含空格或符号。若该命名未包含空格或符号，则无需将其设为文件夹命名。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>UE4&#95;PROJECT&#95;STEAMGAMEDESC</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>STEAMGAMEDESC</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>Valve建议将此宏设为产品全名。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>UE4&#95;PROJECT&#95;STEAMSHIPPINGID</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>N/A</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>要以UE4 4.22和以上版本，在在Steam以外启动，此宏须包含产品的Steam ID。</p>
			</td>
	
</tr></tbody>
</table>
</div><div class="note">
	<p>在UE4 4.22版中，可在游戏的 <code>Target.cs</code> 文件中指定此类值。同时还可通过定义 <code>UE4&#95;PROJECT&#95;STEAMSHIPPINGID</code>，将Steam ID写入版本。所有版本配置均需进行此操作，否则将无法在Steam外启动。
</p><p>对于4.22之前的版本，编辑 <code>OnlineSessionAsyncServerSteam.cpp</code>，以便其包含游戏的值。</p>
</div><p>欲了解分发专用服务器版本的相关信息，参阅<a id="content_link" href="https://partner.steamgames.com/doc/sdk/uploading/distributing_gs" ><span>Steam的合作伙伴文档</span></a>。
</p><h2 id="steam在线验证">Steam在线验证</h2>
<p>Steam使用一种特殊的验证系统，用于控制对平台提供的部分独特服务器相关功能的访问，如广告服务器和玩家计数、检索禁令列表和做出反应（发行商和Valve反作弊禁令）和执行许可证检查。
虚幻引擎4允许通过`FOnlineAuthSteam`类与这个功能连接。
应用程序设置为使用Steam Online Subsystem后，就可以启用 <strong>SteamAuth</strong> 包处理程序组件来利用这些功能。
</p><h3 id="启用steamauth">启用SteamAuth</h3>
<p>要启用SteamAuth，并将以下内容添加到"DefaultEngine.ini"或者针对每一个打算支持Steam在线验证的平台，添加到特定于平台的引擎.ini文件（如"WindowsEngine.ini"、"LinuxEngine.ini"或"MacEngine.ini"）：
</p><pre class="prettyprint"><code>&#91;PacketHandlerComponents&#93;
+Components=OnlineSubsystemSteam.SteamAuthComponentModuleInterface</code></pre>
<p>启用后，就可以使用Steam Online Subsystem接口（SteamOSS）功能`GetAuthInterface`来访问SteamAuth功能。
</p><div class="note">
	<p>启用SteamAuth将会使应用程序对所有加入的玩家运行验证程序（针对Steam服务）。默认情况下，SteamAuth将没有通过这项检查的玩家踢出游戏，但这个行为可以被覆盖。</p>
</div><h3 id="steamauth委托">SteamAuth委托</h3>
<p>SteamAuth系统中有两个开发者可能希望覆盖的委托：<code>OverrideFailureDelegate`和`OnAuthenticationResultDelegate</code>。
</p><p>当玩家尝试加入服务器而没有通过Steam验证时，或者玩家在会话期间失去了Steam验证，通过玩家的`FUniqueNetId`调用`OverrideFailureDelegate`。
默认情况下，SteamAuth会将玩家踢出游戏。
但是，如果该委托受到约束，则默认行为将被暂停，因此开发者必须在仍需要这个行为时手动将玩家踢出。
</p><p>`OnAuthenticationResultDelegate`处理来自Steam验证服务的响应，提供玩家的`FUniqueNetId`和一个指示验证尝试是否成功的布尔值。
</p><h2 id="附加提示">附加提示</h2>
<h3 id="使用ipnetdriver">使用IPNetDriver</h3>
<p>UE4的Steam OSS默认将Steam网络用作默认套接字子系统。在4.22版中，可通过将 <code>OnlineSubsystemSteam.bUseSteamNetworking</code> 设为 <code>false</code> 禁用此行为。要进行此操作，请将以下代码添加到"DefaultEngine.ini"，或者各支持平台的平台特定引擎.ini文件（如"WindowsEngine.ini"、"LinuxEngine.ini"或"MacEngine.ini"）：
</p><pre class="prettyprint"><code>&#91;OnlineSubsystemSteam&#93;
bUseSteamNetworking=false</code></pre>
<p>在4.22之前的版本中，修改调用 <code>RegisterSocketSubsystem</code> 函数的 <code>SocketSubsystemSteam.cpp</code>，将 <code>布尔</code> 参数改为 <code>false</code>。同时还需在项目配置文件中修改网络驱动。
</p><h3 id="模块设置">模块设置</h3>
<p>确保将虚幻引擎Steam模块作为项目的一部分包含进去（请参阅<a id="content_link" href="../../../ProductionPipelines/BuildTools/UnrealBuildTool/TargetFiles/index.html" ><span>UnrealBuildTool目标哦文件</span></a>以获取更多帮助）。
具体而言，在`mygame.build.cs`的构造函数中添加以下行应足以确保随着游戏构建Steam模块。
</p><pre class="prettyprint"><code>DynamicallyLoadedModuleNames.Add("OnlineSubsystemSteam");</code></pre>
<h3 id="steamoverlayonmac">Steam Overlay on Mac</h3>
<p>Steam Overlay on Mac要求通过Steam客户端启动游戏。为此，需要先使用Steam"游戏"菜单中的"将非Steam游戏添加到我的库"选项来将游戏添加到库。
</p>
																	</div>
					<!-- End of Markdown converted page content -->
				</div>
												<div id="pageTags">
				<div class="title">标签</div>
					<div>
					<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=Steam">Steam</a></div>
<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=Online%20Subsystem">Online Subsystem</a></div>
					</div>
				</div>
								<div id="recommendations"></div>			</div>
						  									<div id="announcement">
			<div style="display:inline-block;margin:5px;">
				欢迎帮助改进虚幻引擎文档！请告诉我们该如何更好地为您服务。
			</div>
			<div style="margin:5px;display:inline-block;">
				<div class="btn action" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();window.open('https://epicgames.questionpro.com/t/AP9dGZkjp4');createCookie('announcement-read', new Date().getTime(), 30);">填写问卷调查</div>
				<div class="btn btn-default" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();createCookie('announcement-read', new Date().getTime(), 30);">取消</div>
			</div>
			<div class="btn-close" style="position:absolute;right:5px;top:10px;padding:3px;width:14px;height:14px;" onclick="$('#announcement').hide();"></div>
			</div>
					</div>
	</div></body>

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProgrammingAndScripting/Online/Steam/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 11:11:27 GMT -->
</html>
