<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 12:20:22 GMT -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="../../../../../../Include/Javascript/common_zh-CN.js" type="text/javascript"></script>
	<script type="text/javascript">
		var time = new Date(0);
		var preview = false;
		var relativeHTMLPath = "https://docs.unrealengine.com/4.26/";
				var pageid = 0;
				var heroimage = "";
				var finishButton = finishButtonTemplate;
				var lang = "zh-CN";
				var basePath = document.location.pathname.substring(0, document.location.pathname.indexOf('/' + lang + '/') + lang.length + 1);
		document.write('<base href="' +  encodeURI(basePath) + '/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/" />');
				var udnCSS = '../../../../../../Include/CSS/udn_public.css';
		var udnLangCSS = '';
				udnLangCSS = './../../../../../../Include/CSS/udn_public_CN.css">';
				var udnOverrideCSS = '../../../../../../Include/CSS/skin_overrides.css';
		var udnOverrideDarkCSS = '../../../../../../Include/CSS/skin_overrides_dark.css';
		var fancyboxCSS = '../../../../../../Include/CSS/jquery.fancybox.css';
		var jqueryuiCSS = '../../../../../../Include/CSS/jquery-ui.min.css';
		var qtipCSS = '../../../../../../Include/CSS/jquery.qtip.css';
		var prettifyCSS = '../../../../../../Include/CSS/prettify.css';
		var navbarCSS = '../../../../../../Include/CSS/navBar.css';
		var twentytwentyCSS = '../../../../../../Include/CSS/twentytwenty.css';
		var recommendationsCSS = '../../../../../../Include/CSS/jquery.recommendations.css';
	</script>
    <title>1 - 建立项目 | 虚幻引擎文档</title>
    	    <meta name=viewport content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-control" content="no-store">
    <script  src="../../../../../../Include/Javascript/CustomEvent.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/udn.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/udn_extras.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery-ui.min.js" type="text/javascript"></script>
	    <script  src="../../../../../../Include/Javascript/instructional.js" type="text/javascript"></script>
	    <script  src="../../../../../../Include/Javascript/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery.qtip.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/prettify.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery.slimscroll.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery.event.move.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery.twentytwenty.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/lazysizes.min.js" type="text/javascript"></script>
	    <script  src="../../../../../../Include/Javascript/jquery.recommendations.js" type="text/javascript"></script>
	
    <link async rel="icon" href="../../../../../../../favicon.png" type="image/x-icon" />
    <link async rel="shortcut icon" href="../../../../../../../favicon.png" type="image/x-icon" />
    <link async href="../../../../../../Include/Images/touch_icon.png" rel="apple-touch-icon" />
    <link async href="../../../../../../Include/Images/touch_icon_114.png" sizes="114x114" rel="apple-touch-icon" />    
		<script  src="../../../../../../Include/Javascript/CollapsibleLists.js" type="text/javascript"></script>
	<script  src="../../../../../../Include/Javascript/navigationBarUI.js"></script>
	<script  src="../../../../../../Include/Javascript/navigationBar.js"></script>
		
	<link rel="alternate" href="https://docs.unrealengine.com/latest/en-US/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/" hreflang="x-default" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/zh-CN/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/" hreflang="zh-CN" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ja/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/" hreflang="ja" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ko/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/" hreflang="ko" />

	<meta name="intsourcechangelist" content="14428984" />
<meta name="availability" content="Public" />
<meta name="title" content="1 - 建立项目" />
<meta name="redirect" content="ProgrammingAndScripting/Tutorials/FirstPersonShooter/1" />
<meta name="redirect" content="Programming/Tutorials/FirstPersonShooter/1" />
<meta name="description" content="如何建立第一人称射击游戏项目。" />
<meta name="type" content="quick start" />
<meta name="related" content="ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter" />
<meta name="skilllevel" content="Beginner" />
<meta name="version" content="4.25" />
<meta name="crumbs" content="%ROOT%,ProgrammingAndScripting,ProgrammingAndScripting/ProgrammingWithCPP,ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials,ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta property="og:title" content="1 - 建立项目" />
	<meta property="og:description" content="如何建立第一人称射击游戏项目。" />
		<meta property="og:image" content="" />
	</head>
<body id="webbgThree" style="visibility: hidden;" onload="document.body.style.visibility='visible';">
			<script>window.__tracking_base = 'https://tracking.unrealengine.com/';</script>
	<script src="../../../../../../../../tracking.unrealengine.com/tracking.js" async></script>    <div id="webThree">
				<div id="page_head">

			<edc-navigation blackListLangCodes='["de-de","es-es","es-mx","fr-fr","it-it","pt-br","ru-ru","pl-pl","tr-tr"]' locale="zh-CN" ></edc-navigation>
						<div id="pagenav">
				<div class="crumbs" id="crumbs">
<span id="versionContainer">
	<span id="versionSelect" class="btn btn-version" onclick="ToggleMenu($('#versionMenu'), $(this));"></span>
	<div id="versionMenu">
		<div id="4_26" data-version="4.26" class="btn btn-select" onclick="createCookie('version', '4.26', 365);SwitchVersion('4.26');">Unreal Engine 4.26 Documentation</div>
		<div id="4_27" data-version="4.27" class="btn btn-select" onclick="createCookie('version', '4.27', 365);SwitchVersion('4.27');">Unreal Engine 4.27 Documentation</div>
		<div id="5_0" data-version="5.0" class="btn btn-select" onclick="createCookie('version', '5.0', 365);SwitchVersion('5.0');">Unreal Engine 5.0 Documentation</div>
		<div id="5_1" data-version="5.1" class="btn btn-select" onclick="createCookie('version', '5.1', 365);SwitchVersion('5.1');">Unreal Engine 5.1 Documentation</div>
		<div id="5_2" data-version="5.2" class="btn btn-select" onclick="createCookie('version', '5.2', 365);SwitchVersion('5.2');">Unreal Engine 5.2 Documentation</div>
		<div id="5_3" data-version="5.3" class="btn btn-select" onclick="createCookie('version', '5.3', 365);SwitchVersion('5.3');">Unreal Engine 5.3 Documentation</div>
	</div>
</span>
	<span class="separator">></span> <a id="parent_link" href="../../../../index.html">编程和脚本编写</a>

	<span class="separator">></span> <a id="parent_link" href="../../../index.html">编程指南</a>

	<span class="separator">></span> <a id="parent_link" href="../../index.html">C++ 编程教程</a>

	<span class="separator">></span> <a id="parent_link" href="../index.html">第一人称射击游戏教程</a>

<span class="separator">></span> <span id="page">1 - 建立项目</span>
</div>				<div id="pageNavRight">
								<!-- Start of Search -->
												<div id="search_container">
					<form name="bodySearch" method="get" action="https://www.unrealengine.com/zh-CN/bing-search" onsubmit="return validateSearch()">
						<input type="image" src="../../../../../../Include/Images/search_box_icon.png" class="searchbutton"/>
						<input type="hidden" name="filter" value="文档" />
						<input type="text" name="keyword" placeholder="搜索文档……" class="searchbox" autocomplete="off"/>
					</form>
				</div>
								<!-- End of Search -->
				<div id="skinContainer">
	<div id="skinSelect" class="btn btn-skin" onclick="ToggleMenu($('#skinMenu'), $(this));"></div>
	<div id="skinMenu">
		<div id="light" class="btn btn-select" onclick="createCookie('skin', 'light', 365);location.reload();">Light Theme</div>
		<div id="dark" class="btn btn-select" onclick="createCookie('skin', 'dark', 365);location.reload();">Dark Theme</div>
	</div>
</div>				</div>
			</div>
		</div>						<div id="navWrapper">
			<div id="nav-filter-container">
				<div id="nav-filter-inner">
					<form>
						<input type="text" placeholder="Filter pages..." id="nav-filter" onchange="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, this.value);if(this.value.length == 0){$('#filter-clear').hide();}else{$('#filter-clear').show();}" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
						<button class="close-icon" id="filter-clear" type="reset" onclick="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, '');$(this).hide();"></button>
					</form>
				</div>
			</div>
			<nav id="navPanel">
			</nav>
			<div id="navigation" title="Click to toggle navigation menu"><span>></span></div>
		</div>		
		<div id="splitter">
		</div>
				<div id="contentContainer">
										<div id="pagedefault">
				<div id="product-banner">
	<div id="product-logo"></div>
</div>				<div id="pagecontainer" style="padding-right:0px;">
					<!-- Start of Markdown converted page content -->
																				<div class="hero  ">
						<div class="imgContainer"><img src="#" /></div>						<div class="info">
							<div id="pageTitle">
								<h1 id="H1TitleId">1 - 建立项目</h1>
							</div>	
							<h2 >如何建立第一人称射击游戏项目。</h2>
							<div id="access">
								<div class="accessContainer">
																		<div class="skill_tag_filter Beginner"><a id="skill_link" href="../../../../../SiteIndex/index.html?skills=Beginner">Beginner</a></div>
																	</div>
							</div>
						</div>
					</div>
																				<div id="maincol">
						<div class="togglesection" id="osContainer">
	<div class="normaltitle">
		<p>Choose your operating system:</p>
	</div><div class="toggleButtons">
		<div class="btn btn-default btn-toggle OS windows" id="windows" onclick="setSelector('OS', 'windows');">
			<p>Windows</p>
		</div>
		<div class="btn btn-default btn-toggle OS mac" id="mac" onclick="setSelector('OS', 'mac');">
			<p>macOS</p>
		</div>
		<div class="btn btn-default btn-toggle OS linux" id="linux" onclick="setSelector('OS', 'linux');">
			<p>Linux</p>
		</div>
	</div>
</div>												<div class="tip" id="notice" style="display:none;">
欢迎回来！要回到您上次离开的地方吗？
<div class="button-container">
<a href="javascript:void();" id="goButton" class="btn btn-lrg btn-default action">前往</a>
<a href="javascript:void();" id="cancelButton" class="btn btn-lrg btn-default">取消</a>
</div>
</div>																		<div id="seeAlso">
	<div style="position:relative;">
		<div id="title">参见</div>
		<div id="pageList">
			<ul>
								<li>
					<p>
						<a id="related_link" href="../index.html" title="学习如何实现第一人称射击游戏中的机制。">第一人称射击游戏教程</a>
					</p>
				</li>
							</ul>
		</div>
	</div>
</div>
																														<div class="toc">
<div style="position:relative;">
    <div class="title">
    本页面的内容
    </div>
<div id="tocScroll">
    <ul>
	    		    			    <li id="">
	<p><a id="toc_link" href="#目的">目的</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#目标">目标</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#步骤">步骤</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#1.1-建立项目">1.1 - 建立项目</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#1.2-在visualstudio中打开项目">1.2 - 在Visual Studio中打开项目</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#1.3-添加日志消息">1.3 - 添加日志消息</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#fpsprojectgamemode头文件">FPSProjectGameMode头文件</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#fpsprojectgamemodecpp文件">FPSProjectGameMode CPP文件</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#1.4-编译项目">1.4 - 编译项目</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#将你的c++游戏模式类扩展到蓝图">将你的C++游戏模式类扩展到蓝图</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#1.5-设置默认游戏模式">1.5 - 设置默认游戏模式</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#1.6第一节总结">1.6 第一节总结</a></p>
	</li>		    	        </ul>
</div>
</div>
</div>
<p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/SectionResult.jpg">
		<img class="  lazyload" alt="SectionResult.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/SectionResult.jpg" />
</picture>

</p><div class="caption">
	<p>完成本节后你将会看到以上内容。</p>
</div><h2 id="目的">目的</h2>
<p>本节旨在展示如何建立第一人称射击游戏项目。
</p><h2 id="目标">目标</h2>
<p>完成教程的这一节后，你将能够：
</p><ul ><li class="Default"><p>建立新项目
</p></li><li class="Default"><p>设置编辑器启动地图
</p></li><li class="Default"><p>在Visual Studio中打开项目
</p></li><li class="Default"><p>为项目添加日志消息
</p></li><li class="Default"><p>编译你的第一个C++类
</p></li><li class="Default"><p>设置默认游戏模式
</p></li></ul><h2 id="步骤">步骤</h2>
<ul ><li class="Default"><p>1.1 - 建立项目
</p></li><li class="Default"><p>1.2 - 在Visual Studio中打开项目
</p></li><li class="Default"><p>1.3 - 添加日志消息
</p></li><li class="Default"><p>1.4 - 编译项目
</p></li><li class="Default"><p>1.5 - 设置默认游戏模式
</p></li><li class="Default"><p>1.6 - 第一节总结
</p></li></ul><h2 id="1.1-建立项目">1.1 - 建立项目</h2>
<p>在这一步中，我们将使用虚幻引擎项目浏览器为我们的第一人称射击游戏(FPS)创建一个起始点。
</p><ol ><li class="Default"><p>通过Epic启动器打开 <strong>虚幻引擎</strong>，然后选择<a id="content_link" href="https://docs.unrealengine.com/en-US/Engine/Basics/Projects/Browser/index.html" ><span>创建新项目</span></a>。
</p></li><li class="Default"><p>点击 <strong>游戏（Games）</strong> 新项目类别，然后点击 <strong>下一步（Next）</strong>。
</p></li><li class="Default"><p>选择 <strong>空白模板（Blank template）</strong>，然后点击 <strong>下一步（Next）</strong>。
</p></li><li class="Default"><p>将项目类型更改为 <strong>C++</strong>（而非 <strong>蓝图（Blueprint）</strong>），确保选中 <strong>无初学者内容（No Starter Content）</strong>。
</p></li><li class="Default"><p>将新项目命名为"FPSProject"。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/FPS_ProjectSettings.jpg">
		<img class="  lazyload" alt="FPS_ProjectSettings.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/FPS_ProjectSettings.jpg" />
</picture>

</p><div class="warning">
	<p>如果使用了其他项目名称，则本教程中的一些代码示例需要相应更改。</p>
</div></li><li class="Default"><p>命名项目后，继续并点击 <strong>创建项目（Create Project）</strong> 按钮。
</p></li><li class="Default"><p>创建项目后，该项目会自动在虚幻编辑器中打开。此时点击 <strong>运行（Play）</strong>，便可进入编辑器内运行（PIE）模式。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ClickPlayButton.jpg">
		<img class="  lazyload" alt="ClickPlayButton.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ClickPlayButton.jpg" />
</picture>

</p><div class="caption">
	<p>用鼠标调整视角，同时使用WASD键在关卡内移动。</p>
</div></li><li class="Default"><p>按Esc键或在关卡编辑器中点击 <strong>停止（Stop）</strong>，即可退出PIE模式。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ClickStopButton.jpg">
		<img class="  lazyload" alt="ClickStopButton.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ClickStopButton.jpg" />
</picture>

</p></li><li class="Default"><p>你已完成对关卡的探索，现在转到 <strong>内容浏览器（Content Browser）</strong>（通常在屏幕底部附近），在 <strong>内容（Content）</strong> 文件夹下创建一个 <strong>地图（Maps）</strong> 文件夹（选择内容文件夹，在其中任意位置点击右键，选择 <strong>文件夹（Folder）</strong> > <strong>新建文件夹（New Folder）</strong>）。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/MapsFolder.jpg">
		<img class="  lazyload" alt="MapsFolder.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/MapsFolder.jpg" />
</picture>

</p></li><li class="Default"><p>在 <strong>文件（File）</strong> 菜单中，选择 <strong>将当前内容另存为（Save Current as...）</strong>，然后点击地图文件夹。将新地图命名为"FPSMap"，然后点击 <strong>保存（Save）</strong>。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/SaveLevelAs.jpg">
		<img class="  lazyload" alt="SaveLevelAs.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/SaveLevelAs.jpg" />
</picture>

</p></li><li class="Default"><p>从 <strong>编辑（Edit）</strong> 菜单中，点击 <strong>项目设置（Project Settings）</strong>。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/EditProjectSettings.jpg">
		<img class="  lazyload" alt="EditProjectSettings.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/EditProjectSettings.jpg" />
</picture>

</p></li><li class="Default"><p>在 <strong>项目设置（Project Settings）</strong> 选项卡左侧的 <strong>项目（Project）</strong> 标题下，点击 <strong>地图和模式（Maps &amp; Modes）</strong>。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ProjectMaps_Modes.jpg">
		<img class="  lazyload" alt="ProjectMaps_Modes.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ProjectMaps_Modes.jpg" />
</picture>

</p></li><li class="Default"><p>展开 <strong>编辑器启动地图（Editor Startup Map）</strong> 下拉菜单，选择 <strong>FPSMap</strong>。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/EditorDefaultMap.jpg">
		<img class="  lazyload" alt="EditorDefaultMap.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/EditorDefaultMap.jpg" />
</picture>

</p><div class="caption">
	<p>从现在开始，编辑器将自动加载FPSMap作为默认地图。</p>
</div></li><li class="Default"><p>最后，关闭 <strong>项目设置（Project Settings）</strong> 菜单，保存项目，然后继续下一步骤。
</p></li></ol><h2 id="1.2-在visualstudio中打开项目">1.2 - 在Visual Studio中打开项目</h2>
<p>在上一步中建立 <strong>基础代码（Basic Code）</strong> 项目后，虚幻引擎为你创建了一个 <strong>游戏模式（Game Mode）</strong>。游戏模式定义游戏规则和获胜条件。游戏模式还会设置一些默认类，用于某些基本游戏框架类型，包括Pawn、PlayerController和HUD等。本节中，你将使用编辑器将你的项目作为解决方案在Visual Studio中打开，以便查看项目的游戏模式类。
</p><ol ><li class="Default"><p>展开 <strong>文件（File）</strong> 菜单，选择 <strong>打开Visual Studio（Open Visual Studio）</strong>，便可在Visual Studio中打开C++代码。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/FileMenu_OpenVS.jpg">
		<img class="  lazyload" alt="FileMenu_OpenVS.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/FileMenu_OpenVS.jpg" />
</picture>

</p></li><li class="Default"><p>在Visual Studio启动项目之后，你应该会在Visual Studio的 <strong>解决方案资源管理器</strong> 中看到 <strong>.cpp</strong> 和 <strong>.h</strong> 文件。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/VS_SolutionExplorer.jpg">
		<img class="  lazyload" alt="VS_SolutionExplorer.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/VS_SolutionExplorer.jpg" />
</picture>

</p><div class="note">
	<p>如果示例图中的Visual Studio与你的Visual Studio看起来略有不同，无需紧张，我们只是使用了"深色主题"。要启用深色主题，转到：工具（Tools）>选项（Options）>环境（Environment）>常规（General）>颜色主题（Color Theme）。 </p>
</div></li><li class="Default"><p>展开 <strong>源（Source）</strong>，然后展开 <strong>FPSProject</strong> 以查看你的新游戏的主要文件。 
</p></li><li class="Default"><p>打开FPSProjectGameModeBase.cpp。文件内容应如下所示：
</p><pre class="prettyprint"><code>// Epic Games, Inc版权所有。保留所有权利。

#include "FPSProjectGameModeBase.h"</code></pre></li><li class="Default"><p>现在打开FPSProjectGameModeBase.h。文件内容应如下所示：
</p><pre class="prettyprint"><code>// Epic Games, Inc版权所有。保留所有权利。

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/GameModeBase.h"
#include "FPSProjectGameModeBase.generated.h"

/&#42;&#42;
 &#42; 
 &#42;/
UCLASS()
class FPSPROJECT&#95;API AFPSProjectGameModeBase : public AGameModeBase
{
    GENERATED&#95;BODY()
};</code></pre></li><li class="Default"><p>现在你已经在Visual Studio中打开了C++项目，可以开始向项目中添加代码了。
</p></li></ol><h2 id="1.3-添加日志消息">1.3 - 添加日志消息</h2>
<p>向项目中添加代码的一个不错的起点是向FPSGameMode添加一条日志消息。日志消息对于在开发期间验证和调试代码非常有用。在这一步中，你将使用日志消息来验证自己确实在使用FPSGameMode而非虚幻引擎提供的默认游戏模式。
</p><h3 id="fpsprojectgamemode头文件">FPSProjectGameMode头文件</h3>
<ol ><li class="Default"><p>在 <strong>解决方案资源管理器</strong> 中，展开 <strong>FPSProject</strong> > <strong>源（Source）</strong> > <strong>FPSProject</strong>。
</p></li><li class="Default"><p>双击 <code>FPSProjectGameModeBase.h</code> 打开 <strong>FPSGameMode</strong> 类的头文件。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/InterfaceFile.jpg">
		<img class="  lazyload" alt="InterfaceFile.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/InterfaceFile.jpg" />
</picture>

</p></li><li class="Default"><p>类声明应该如下所示：
</p><pre class="prettyprint"><code>UCLASS()
class FPSPROJECT&#95;API AFPSProjectGameModeBase : public AGameModeBase
{
GENERATED&#95;BODY()

};</code></pre></li><li class="Default"><p>在 <code>AFPSProjectGameMode</code> 构造函数声明下方添加以下函数声明：
</p><pre class="prettyprint"><code>virtual void StartPlay() override;</code></pre>
<div class="note">
	<p>此函数声明允许你重载<a id="content_link" href="https://docs.unrealengine.com/en-US/API/Runtime/Engine/GameFramework/AGameModeBase/StartPlay/index.html" ><span>StartPlay</span></a>，以便游戏启动时在屏幕上打印日志消息。</p>
</div></li><li class="Default"><p><code>FPSProjectGameMode.h</code> 应如下所示：
</p><pre class="prettyprint"><code>// Epic Games, Inc版权所有。保留所有权利。

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/GameModeBase.h"
#include "FPSProjectGameModeBase.generated.h"

/&#42;&#42;
 &#42; 
 &#42;/
UCLASS()
class FPSPROJECT&#95;API AFPSProjectGameModeBase : public AGameModeBase
{
GENERATED&#95;BODY()

virtual void StartPlay() override;
};</code></pre></li><li class="Default"><p>在Visual Studio中保存你的头文件。
</p></li></ol><h3 id="fpsprojectgamemodecpp文件">FPSProjectGameMode CPP文件</h3>
<ol ><li class="Default"><p>在 <strong>解决方案资源管理器</strong> 中，定位到 <code>FPSProjectGameModeBase.cpp</code>（<strong>FPSProject >源（Source）> FPSProject</strong>）。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ImplementationFile.jpg">
		<img class="  lazyload" alt="ImplementationFile.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ImplementationFile.jpg" />
</picture>

</p></li><li class="Default"><p>双击 <code>FPSProjectGameModeBase.cpp</code> 打开 <strong>FPSGameModeBase</strong> 类的实现文件。
</p></li><li class="Default"><p>现在将以下代码行添加到该文件中：
</p><pre class="prettyprint"><code>void AFPSProjectGameModeBase::StartPlay()
{
Super::StartPlay();

check(GEngine != nullptr);

  // 显示调试消息五秒。 
  // 参数中的-1"键"值类型参数能防止该消息被更新或刷新。
  GEngine-&gt;AddOnScreenDebugMessage(-1, 5.0f, FColor::Yellow, TEXT("Hello World, this is FPSGameMode!"));

}</code></pre>
<div class="note">
	<p>游戏启动时，StartPlay()将在屏幕上打印一条新的调试消息（"Hello World, this is FPSGameModeBase!"），采用黄色文本，显示五秒钟。</p>
</div></li><li class="Default"><p><code>FPSProjectGameModeBase.cpp</code> 应如下所示：
</p><pre class="prettyprint"><code>// Epic Games, Inc版权所有。保留所有权利。

#include "FPSProjectGameMode.h"

void AFPSProjectGameModeBase::StartPlay()
{
Super::StartPlay();

check(GEngine != nullptr);

// 显示调试消息五秒。 
// -1"键"值参数防止该消息被更新或刷新。
GEngine-&gt;AddOnScreenDebugMessage(-1, 5.0f, FColor::Yellow, TEXT("Hello World, this is FPSGameModeBase!"));</code></pre></li><li class="Default"><p>在Visual Studio中保存CPP文件。
</p></li></ol><h2 id="1.4-编译项目">1.4 - 编译项目</h2>
<p>是时候编译项目了，这样你就能看到新代码在游戏中的表现。 
</p><ol ><li class="Default"><p>回到编辑器，点击 <strong>编译（Compile）</strong> 按钮编译代码。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/CompileProject.jpg">
		<img class="  lazyload" alt="CompileProject.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/CompileProject.jpg" />
</picture>

</p><div class="caption">
	<p>因为你的项目以C++项目的形式进行开发，所以可以从虚幻编辑器中直接编译CPP代码。</p>
</div></li><li class="Default"><p>继续并点击 <strong>运行（Play）</strong> 按钮，进入在编辑器内运行（PIE）模式。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/PIE_DefaultGameMode.jpg">
		<img class="  lazyload" alt="PIE_DefaultGameMode.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/PIE_DefaultGameMode.jpg" />
</picture>

</p><div class=" note">
	<p>你可能有点迷惑，在PIE模式下时，日志消息为何没有显示在屏幕上。未看到日志消息的原因是，在当前开发阶段，编辑器仍在使用默认游戏模式。</p>
</div></li><li class="Default"><p>按 <strong>退出键（Escape key）</strong> 或在关卡编辑器中点击 <strong>停止（Stop）</strong> 按钮，即可退出PIE模式。
</p></li></ol><h3 id="将你的c++游戏模式类扩展到蓝图">将你的C++游戏模式类扩展到蓝图</h3>
<ol ><li class="Default"><p>首先，在"内容"文件夹中创建一个 <strong>蓝图（Blueprints）</strong> 文件夹。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/BlueprintsFolder.jpg">
		<img class="  lazyload" alt="BlueprintsFolder.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/BlueprintsFolder.jpg" />
</picture>

</p></li><li class="Default"><p>现在右键点击 <strong>FPSProjectGameModeBase</strong> 类（在 <strong>C++类（C++ Classes）</strong> > <strong>FPSProject</strong> 中），打开 <strong>C++类操作（C++ Class Actions）</strong> 菜单。
</p></li><li class="Default"><p>点击 <strong>基于FPSProjectGameModeBase创建蓝图类（Create Blueprint class based on FPSProjectGameModeBase）</strong> 打开 <strong>添加蓝图类（Add Blueprint Class）</strong> 对话框菜单。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/CreateDerivedBPClass.jpg">
		<img class="  lazyload" alt="CreateDerivedBPClass.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/CreateDerivedBPClass.jpg" />
</picture>

</p></li><li class="Default"><p>将你的新蓝图类命名为"BP_FPSProjectGameModeBase"，然后选择蓝图文件夹，之后点击 <strong>创建蓝图类（Create Blueprint Class）</strong> 按钮。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/AddBPClass.jpg">
		<img class="  lazyload" alt="AddBPClass.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/AddBPClass.jpg" />
</picture>

</p></li><li class="Default"><p>到目前为止，你应该有一个新创建的 <code>BP&#95;FPSProjectGameModeBase</code> 蓝图类，位于蓝图文件夹内。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/AddedBPClass.jpg">
		<img class="  lazyload" alt="AddedBPClass.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/AddedBPClass.jpg" />
</picture>

</p></li><li class="Default"><p>请确保在关闭蓝图编辑器之前保存你的 <code>BP&#95;FPSProjectGameModeBase</code> 蓝图。
</p></li></ol><h2 id="1.5-设置默认游戏模式">1.5 - 设置默认游戏模式</h2>
<p>现在你已经成功地将新修改的游戏模式扩展到蓝图，在本步骤中，你需要设置你的项目，使用 <code>BP&#95;FPSProjectGameModeBase</code> 作为默认 <strong>游戏模式</strong>。
</p><ol ><li class="Default"><p>展开 <strong>编辑（Edit）</strong> 菜单，点击 <strong>项目设置（Project Settings）</strong>。
</p></li><li class="Default"><p>在 <strong>项目设置（Project Settings）</strong> 选项卡左侧的 <strong>项目（Project）</strong> 标题下，点击 <strong>地图和模式（Maps &amp; Modes）</strong>。
</p></li><li class="Default"><p>展开 <strong>默认游戏模式（Default GameMode）</strong> 下拉菜单，选择 <strong>BP_FPSGameModeBase</strong>。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/SettingFPSGameMode.jpg">
		<img class="  lazyload" alt="SettingFPSGameMode.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/SettingFPSGameMode.jpg" />
</picture>

</p></li><li class="Default"><p>关闭 <strong>项目设置（Project Settings）</strong> 菜单。
</p></li><li class="Default"><p>点击关卡编辑器工具栏中的 <strong>运行（Play）</strong> 按钮。"Hello World, this is FPSGameMode!"这句话应在视口左上角以黄色文本显示五秒钟。
</p><p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/SectionResult.jpg">
		<img class="  lazyload" alt="SectionResult.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/SectionResult.jpg" />
</picture>

</p></li><li class="Default"><p>按 <strong>退出键（Escape key）</strong> 或在关卡编辑器中点击 <strong>停止（Stop）</strong> 按钮，即可退出编辑器内运行（PIE）模式。
</p></li></ol><h2 id="1.6第一节总结">1.6 第一节总结</h2>
<p><strong>FPSProjectGameModeBase.h</strong>
</p><pre class="prettyprint"><code>    // Epic Games, Inc版权所有。保留所有权利。

    #pragma once

    #include "CoreMinimal.h"
    #include "GameFramework/GameModeBase.h"
    #include "FPSProjectGameModeBase.generated.h"

    /&#42;&#42;
     &#42; 
     &#42;/
    UCLASS()
    class FPSPROJECT&#95;API AFPSProjectGameModeBase : public AGameModeBase
    {
        GENERATED&#95;BODY()

        virtual void StartPlay() override;

    };</code></pre>
<p><strong>FPSProjectGameModeBase.cpp</strong>
</p><pre class="prettyprint"><code>    // Epic Games, Inc版权所有。保留所有权利。

    #include "FPSProjectGameMode.h"

    void AFPSProjectGameMode::StartPlay()
    {
        Super::StartPlay();

        checkGEngine != nullptr);

          // 显示调试消息五秒。 
          // -1"键"值参数防止该消息被更新或刷新。
          GEngine-&gt;AddOnScreenDebugMessage(-1, 5.0f, FColor::Yellow, TEXT("Hello World, this is FPSGameModeBase!"));

    }</code></pre>
<p>恭喜！你已经学会了如何：
</p><p>&#x2713; 建立新项目<br />&#x2713; 在Visual Studio中打开项目<br />&#x2713; 向项目中添加日志消息<br />&#x2713; 编译你的第一个C++类<br />&#x2713; 设置默认游戏模式
</p><p>在下一节中，我们将学习如何添加游戏角色，相信你已经准备好了！
</p>
																	</div>
					<!-- End of Markdown converted page content -->
				</div>
												<div id="recommendations"></div>			</div>
						<div id="footer"></div>									<div id="announcement">
			<div style="display:inline-block;margin:5px;">
				欢迎帮助改进虚幻引擎文档！请告诉我们该如何更好地为您服务。
			</div>
			<div style="margin:5px;display:inline-block;">
				<div class="btn action" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();window.open('https://epicgames.questionpro.com/t/AP9dGZkjp4');createCookie('announcement-read', new Date().getTime(), 30);">填写问卷调查</div>
				<div class="btn btn-default" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();createCookie('announcement-read', new Date().getTime(), 30);">取消</div>
			</div>
			<div class="btn-close" style="position:absolute;right:5px;top:10px;padding:3px;width:14px;height:14px;" onclick="$('#announcement').hide();"></div>
			</div>
					</div>
	</div></body>

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/1/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 12:20:29 GMT -->
</html>
