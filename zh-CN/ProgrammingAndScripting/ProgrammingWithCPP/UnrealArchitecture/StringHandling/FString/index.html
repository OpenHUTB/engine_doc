<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 12:21:37 GMT -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="../../../../../../Include/Javascript/common_zh-CN.js" type="text/javascript"></script>
	<script type="text/javascript">
		var time = new Date(0);
		var preview = false;
		var relativeHTMLPath = "https://docs.unrealengine.com/4.26/";
				var pageid = 0;
				var heroimage = "";
				var lang = "zh-CN";
				var basePath = document.location.pathname.substring(0, document.location.pathname.indexOf('/' + lang + '/') + lang.length + 1);
		document.write('<base href="' +  encodeURI(basePath) + '/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/" />');
				var udnCSS = '../../../../../../Include/CSS/udn_public.css';
		var udnLangCSS = '';
				udnLangCSS = './../../../../../../Include/CSS/udn_public_CN.css">';
				var udnOverrideCSS = '../../../../../../Include/CSS/skin_overrides.css';
		var udnOverrideDarkCSS = '../../../../../../Include/CSS/skin_overrides_dark.css';
		var fancyboxCSS = '../../../../../../Include/CSS/jquery.fancybox.css';
		var jqueryuiCSS = '../../../../../../Include/CSS/jquery-ui.min.css';
		var qtipCSS = '../../../../../../Include/CSS/jquery.qtip.css';
		var prettifyCSS = '../../../../../../Include/CSS/prettify.css';
		var navbarCSS = '../../../../../../Include/CSS/navBar.css';
		var twentytwentyCSS = '../../../../../../Include/CSS/twentytwenty.css';
		var recommendationsCSS = '../../../../../../Include/CSS/jquery.recommendations.css';
	</script>
    <title>FString | 虚幻引擎文档</title>
    	    <meta name=viewport content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-control" content="no-store">
    <script  src="../../../../../../Include/Javascript/CustomEvent.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/udn.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/udn_extras.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery-ui.min.js" type="text/javascript"></script>
	    <script  src="../../../../../../Include/Javascript/informational.js" type="text/javascript"></script>
	    <script  src="../../../../../../Include/Javascript/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery.qtip.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/prettify.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery.slimscroll.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery.event.move.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/jquery.twentytwenty.js" type="text/javascript"></script>
    <script  src="../../../../../../Include/Javascript/lazysizes.min.js" type="text/javascript"></script>
	    <script  src="../../../../../../Include/Javascript/jquery.recommendations.js" type="text/javascript"></script>
	
    <link async rel="icon" href="../../../../../../../favicon.png" type="image/x-icon" />
    <link async rel="shortcut icon" href="../../../../../../../favicon.png" type="image/x-icon" />
    <link async href="../../../../../../Include/Images/touch_icon.png" rel="apple-touch-icon" />
    <link async href="../../../../../../Include/Images/touch_icon_114.png" sizes="114x114" rel="apple-touch-icon" />    
		<script  src="../../../../../../Include/Javascript/CollapsibleLists.js" type="text/javascript"></script>
	<script  src="../../../../../../Include/Javascript/navigationBarUI.js"></script>
	<script  src="../../../../../../Include/Javascript/navigationBar.js"></script>
		
	<link rel="alternate" href="https://docs.unrealengine.com/latest/en-US/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/" hreflang="x-default" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/zh-CN/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/" hreflang="zh-CN" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ja/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/" hreflang="ja" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ko/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/" hreflang="ko" />

	<meta name="redirect" content="Programming/UnrealArchitecture/StringHandling/FString" />
<meta name="intsourcechangelist" content="13989140" />
<meta name="availability" content="Public" />
<meta name="title" content="FString" />
<meta name="description" content="" />
<meta name="version" content="4.9" />
<meta name="crumbs" content="%ROOT%,ProgrammingAndScripting,ProgrammingAndScripting/ProgrammingWithCPP,ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture,ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta property="og:title" content="FString" />
	<meta property="og:description" content="" />
		<meta property="og:image" content="" />
	</head>
<body id="webbgThree" style="visibility: hidden;" onload="document.body.style.visibility='visible';">
			<script>window.__tracking_base = 'https://tracking.unrealengine.com/';</script>
	<script src="../../../../../../../../tracking.unrealengine.com/tracking.js" async></script>    <div id="webThree">
				<div id="page_head">

			<edc-navigation blackListLangCodes='["de-de","es-es","es-mx","fr-fr","it-it","pt-br","ru-ru","pl-pl","tr-tr"]' locale="zh-CN" ></edc-navigation>
						<div id="pagenav">
				<div class="crumbs" id="crumbs">
<span id="versionContainer">
	<span id="versionSelect" class="btn btn-version" onclick="ToggleMenu($('#versionMenu'), $(this));"></span>
	<div id="versionMenu">
		<div id="4_26" data-version="4.26" class="btn btn-select" onclick="createCookie('version', '4.26', 365);SwitchVersion('4.26');">Unreal Engine 4.26 Documentation</div>
		<div id="4_27" data-version="4.27" class="btn btn-select" onclick="createCookie('version', '4.27', 365);SwitchVersion('4.27');">Unreal Engine 4.27 Documentation</div>
		<div id="5_0" data-version="5.0" class="btn btn-select" onclick="createCookie('version', '5.0', 365);SwitchVersion('5.0');">Unreal Engine 5.0 Documentation</div>
		<div id="5_1" data-version="5.1" class="btn btn-select" onclick="createCookie('version', '5.1', 365);SwitchVersion('5.1');">Unreal Engine 5.1 Documentation</div>
		<div id="5_2" data-version="5.2" class="btn btn-select" onclick="createCookie('version', '5.2', 365);SwitchVersion('5.2');">Unreal Engine 5.2 Documentation</div>
		<div id="5_3" data-version="5.3" class="btn btn-select" onclick="createCookie('version', '5.3', 365);SwitchVersion('5.3');">Unreal Engine 5.3 Documentation</div>
	</div>
</span>
	<span class="separator">></span> <a id="parent_link" href="../../../../index.html">编程和脚本编写</a>

	<span class="separator">></span> <a id="parent_link" href="../../../index.html">编程指南</a>

	<span class="separator">></span> <a id="parent_link" href="../../index.html">游戏逻辑编程</a>

	<span class="separator">></span> <a id="parent_link" href="../index.html">字符串处理</a>

<span class="separator">></span> <span id="page">FString</span>
</div>				<div id="pageNavRight">
								<!-- Start of Search -->
												<div id="search_container">
					<form name="bodySearch" method="get" action="https://www.unrealengine.com/zh-CN/bing-search" onsubmit="return validateSearch()">
						<input type="image" src="../../../../../../Include/Images/search_box_icon.png" class="searchbutton"/>
						<input type="hidden" name="filter" value="文档" />
						<input type="text" name="keyword" placeholder="搜索文档……" class="searchbox" autocomplete="off"/>
					</form>
				</div>
								<!-- End of Search -->
				<div id="skinContainer">
	<div id="skinSelect" class="btn btn-skin" onclick="ToggleMenu($('#skinMenu'), $(this));"></div>
	<div id="skinMenu">
		<div id="light" class="btn btn-select" onclick="createCookie('skin', 'light', 365);location.reload();">Light Theme</div>
		<div id="dark" class="btn btn-select" onclick="createCookie('skin', 'dark', 365);location.reload();">Dark Theme</div>
	</div>
</div>				</div>
			</div>
		</div>						<div id="navWrapper">
			<div id="nav-filter-container">
				<div id="nav-filter-inner">
					<form>
						<input type="text" placeholder="Filter pages..." id="nav-filter" onchange="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, this.value);if(this.value.length == 0){$('#filter-clear').hide();}else{$('#filter-clear').show();}" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
						<button class="close-icon" id="filter-clear" type="reset" onclick="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, '');$(this).hide();"></button>
					</form>
				</div>
			</div>
			<nav id="navPanel">
			</nav>
			<div id="navigation" title="Click to toggle navigation menu"><span>></span></div>
		</div>		
		<div id="splitter">
		</div>
				<div id="contentContainer">
										<div id="pagedefault">
				<div id="product-banner">
	<div id="product-logo"></div>
</div>				<div id="pagecontainer" style="padding-right:0px;">
					<!-- Start of Markdown converted page content -->
																				<div class="hero  ">
						<div class="imgContainer"><img src="#" /></div>						<div class="info">
							<div id="pageTitle">
								<h1 id="H1TitleId">FString</h1>
							</div>	
							<h2 ></h2>
							<div id="access">
								<div class="accessContainer">
																																			</div>
							</div>
						</div>
					</div>
																				<div id="maincol">
						<div class="togglesection" id="osContainer">
	<div class="normaltitle">
		<p>Choose your operating system:</p>
	</div><div class="toggleButtons">
		<div class="btn btn-default btn-toggle OS windows" id="windows" onclick="setSelector('OS', 'windows');">
			<p>Windows</p>
		</div>
		<div class="btn btn-default btn-toggle OS mac" id="mac" onclick="setSelector('OS', 'mac');">
			<p>macOS</p>
		</div>
		<div class="btn btn-default btn-toggle OS linux" id="linux" onclick="setSelector('OS', 'linux');">
			<p>Linux</p>
		</div>
	</div>
</div>																																				<div class="toc">
<div style="position:relative;">
    <div class="title">
    本页面的内容
    </div>
<div id="tocScroll">
    <ul>
	    		    			    <li id="">
	<p><a id="toc_link" href="#创建fstring">创建 FString</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#转换">转换</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#字符串变量">字符串变量</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#数字和其他变量">数字和其他变量</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#对比">对比</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#搜索">搜索</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#构建fstring">构建 FString</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#串联">串联</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#printf">Printf</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#操作字符串">操作字符串</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#hud中的fstrings">HUD 中的 FStrings</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#canvas">Canvas</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#调试信息">调试信息</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#打印到视口">打印到视口</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#打印到输出日志">打印到输出日志</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#转换宏编码">转换宏编码</a></p>
	</li>		    	        </ul>
</div>
</div>
</div>
<p>与 <code>FName</code> 和 <code>FText</code> 不同，<code>FString</code> 可以与搜索、修改并且与其他字符串比较。不过，这些操作会导致 <code>FString</code> 的开销比不可变字符串类更大。这是因为 <code>FString</code> 对象保存自己的字符数组，而 <code>FName</code> 和 <code>FText</code> 对象保存共享字符数组的指针，并且可以完全根据索引值建立相等性。
</p><h2 id="创建fstring">创建 FString</h2>
<pre class="prettyprint"><code>FString TestHUDString = FString(TEXT("This is my test FString."));</code></pre>
<h2 id="转换">转换</h2>
<h3 id="字符串变量">字符串变量</h3>
<h4 id="从fstring">从 FString</h4>
<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>从 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>到 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>范例 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p>FString</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>FName</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>TestHUDName = FName(&#42;TestHUDString);</code> <div class="warning">
	<p> FString -> FName 不可靠。因为 FName 不区分大小写，所以转换存在损耗。</p>
</div></p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>FString</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>FText</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>TestHUDText = FText::FromString(TestHUDString);</code>  <div class="warning">
	<p> FString -> FText 在一些情况下有效，但需注意 — FString 内容不会从 FText 的"自动本地化"中受益。</p>
</div></p>
			</td>
	
</tr></tbody>
</table><h4 id="到fstring">到 FString</h4>
<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>从 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>到 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>范例 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p>FName</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>FString</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>TestHUDString = TestHUDName.ToString();</code></p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>FText</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>FString</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>TestHUDString = TestHUDText.ToString();</code> <div class="warning">
	<p> FText -> FString 不可靠。它在一些语言的转换中存在潜在损耗。</p>
</div></p>
			</td>
	
</tr></tbody>
</table><h3 id="数字和其他变量">数字和其他变量</h3>
<h4 id="到fstring_1">到 FString</h4>
<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>变量类型 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>从字符串转换 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>字符串格式 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p>float</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>FString::SanitizeFloat(FloatVariable);</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>int</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>FString::FromInt(IntVariable);</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>bool</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>InBool ?TEXT("true") :TEXT("false");   </code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>either 'true' or 'false'</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>FVector</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>VectorVariable.ToString();</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>'X= Y= Z='</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>FVector2D</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>Vector2DVariable.ToString();</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>'X= Y='</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>FRotator</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>RotatorVariable.ToString();</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>'P= Y= R='</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>FLinearColor</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>LinearColorVariable.ToString();</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>'(R=,G=,B=,A=)'</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>UObject</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>(InObj != NULL) ? InObj-&gt;GetName() : FString(TEXT("None"));</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>UObject's FName</p>
			</td>
	
</tr></tbody>
</table><p>对于其他数值转换，可使用带合适参数的 <strong>FString::Printf()</strong> 函数。 
</p><h4 id="从fstring_1">从 FString</h4>
<p>从 FString 到 int 和浮点型数字变量，以及到布尔型变量之间也存在转换。 
</p><table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>变量类型 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>从字符串转换 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>注解 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p>bool</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>TestHUDString.ToBool();</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>int</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>FCString::Atoi(&#42;TestHUDString);</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>float</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>FCString::Atof(&#42;TestHUDString);</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr></tbody>
</table><h2 id="对比">对比</h2>
<p>重载的 == 运算符可用于两个 FString 的对比，或把 FString 比作一个 TCHAR*s 阵列。此外还有 <strong>FString::Equals()</strong> 法，
用 FString 进行测试，用 <strong>ESearchCase</strong> 枚举进行对比，确定是否作为参数忽略大小写。如希望对比忽略大小写，使用 <strong>ESearchCase::IgnoreCase</strong>；
如不忽略，则使用 <strong>ESearchCase::CaseSensitive</strong>。
</p><pre class="prettyprint"><code>TestHUDString.Equals(TEXT("Test"), ESearchCase::CaseSensitive);</code></pre>
<h2 id="搜索">搜索</h2>
<p>在 FString 中搜索时有两种搜索类型。第一种是 <strong>FString::Contains()</strong>，找到子字符串后返回 true，否则返回 <em>false</em>。
FString::Contains() 可搜索 FString 或 TCHAR*s 子字符串。ESearchCase 枚举可用于指定搜索是否忽略大小写。此外，<code>ESearchDir</code> 枚举可用于指定搜索的方向。
默认设置为忽略大小写，从开始执行搜索。
</p><pre class="prettyprint"><code>TestHUDString.Contains(TEXT("Test"), ESearchCase::CaseSensitive, ESearchDir::FromEnd);</code></pre>
<p>第二种是 <code>FString::Find()</code>，返回找到的第一个子字符串实例的索引。<code>FString::Find()</code> 可对 <code>FString</code> 或 <code>TCHAR&#42;</code>s 子字符串进行搜索。
和 <code>FString::Contains()</code> 一样，可对大小写敏感度和搜索方向进行指定，默认设置为忽略大小写并从字符串开头开始搜素。也可在索引中任选一个索引开始搜索。
如 <code>FString::Find()</code> 未找到子字符串，它将返回 -1。
</p><pre class="prettyprint"><code>TestHUDString.Find(TEXT("test"), ESearchCase::CaseSensitive, ESearchDir::FromEnd, 10);</code></pre>
<h2 id="构建fstring">构建 FString</h2>
<p>可通过两种方法用子字符串或其他变量类型构建字符串。首先，串联只接受 FString 作为参数。在串联其他类型的变量时需要将其转换为 FString。
第二，<code>Printf</code> 可接受数字输入（如 int 和浮点），在输入被添加到字符串时还可对其格式进行设置。
</p><h3 id="串联">串联</h3>
<p>有两个运算符用于串联字符串： 
</p><table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>运算符 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>描述 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>用法 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>+=</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>将提供的字符串附加到 FString 对象。</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>StringResult += AddedString;</code></p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>+</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>新建一个 FString 对象并附加提供的字符串。</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr></tbody>
</table><h3 id="printf">Printf</h3>
<p>用 <strong>FString::Printf</strong> 构建的 FString 可被存入 FStrings，并与 <a id="content_link" href="#" ><span>UE_LOG 调试信息</span></a> 一同显示到屏幕上。
格式参数拥有和 C++ printf 函数相同的说明符，如下例所示。
</p><pre class="prettyprint"><code>FString AShooterHUD::GetTimeString(float TimeSeconds)
{
// only minutes and seconds are relevant
const int32 TotalSeconds = FMath::Max(0, FMath::TruncToInt(TimeSeconds) % 3600);
const int32 NumMinutes = TotalSeconds / 60;
const int32 NumSeconds = TotalSeconds % 60;

const FString TimeDesc = FString::Printf(TEXT("%02d:%02d"), NumMinutes, NumSeconds);
return TimeDesc;
}</code></pre>
<div class="tip">
	<p>使用 %s 参数包含 FStrings 时，必须使用 <code>&#42;</code> 运算符返回 %s 参数所需的 TCHAR*。</p>
</div><h2 id="操作字符串">操作字符串</h2>
<p>可通过许多函数操作字符串。在此会提到部分函数，如需了解可用 FString 函数的完整列表，请查看 UnrealString.h 或 FString 上的 API 文档。
复制字符串分段的函数：Left、Right 和 Mid。可在找到的子字符串的位置将一个字符串分为两个字符串。 
使用 <code>Split</code> 法即可完成此操作。拆分字符串的另一个方法是 <strong>ParseIntoArray</strong>，可将一个字符串拆分为字符串阵列，由指定的分隔符隔开。 
使用 <strong>ToUpper</strong> 和 <strong>ToLower</strong> 即可完成大小写转换，将字符串转换为大写或小写。
</p><h2 id="hud中的fstrings">HUD 中的 FStrings</h2>
<h3 id="canvas">Canvas</h3>
<p>如需在 HUD 中显示 FString，使用 <a id="content_link" href="../../../../../InteractiveExperiences/Framework/UIAndHUD/index.html#canvas" ><span>Canvas</span></a> 调用 <strong>FCanvas::DrawText()</strong> 函数：
</p><pre class="prettyprint"><code>Canvas-&gt;DrawText(BigFont, TestHUDString, 110.0f,110.0f);</code></pre>
<div class="note">
	<p>必须在 HUD 类的 <strong>DrawHUD()</strong> 函数中调用 <strong>DrawText()</strong> 函数，或在以 DrawHUD() 开始的函数链中调用。</p>
</div><h2 id="调试信息">调试信息</h2>
<p>FString 可被打印到 <strong>视口</strong> 和 <strong>输出日志</strong>，以便进行调试。
</p><h3 id="打印到视口">打印到视口</h3>
<p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/DebugToScreen.jpg">
		<img class="  lazyload" alt="DebugToScreen.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/DebugToScreen.jpg" />
</picture>

</p><p>使用 <strong>UEngine::AddOnScreenDebugMessage()</strong> 将调试信息打印到 <strong>视口</strong>。此函数接受以下四个参数（按照顺序）：
</p><table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>参数名 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>参数类型 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>描述 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p>Key</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>int</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>防止相同信息多次添加的唯一键。使用 -1 作为键，使调试信息短时出现。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>TimeToDisplay</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>float</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>信息显示时长，按秒计。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>DisplayColor</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>FColor</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>文本显示的颜色。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p>DebugMessage</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>FString</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>显示的信息（FString）。</p>
			</td>
	
</tr></tbody>
</table><p><strong>范例：</strong>
</p><pre class="prettyprint"><code>GEngine-&gt;AddOnScreenDebugMessage(-1, 5.f, FColor::Blue, TestHUDString);</code></pre>
<h3 id="打印到输出日志">打印到输出日志</h3>
<p><picture>
		<source data-srcset="./../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/DebugToLog.jpg">
		<img class="  lazyload" alt="DebugToLog.png" data-src="../../../../../../Images/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/DebugToLog.jpg" />
</picture>

</p><p><strong>UE_LOG</strong> 使用 printf 标记进行参数化。 
</p><pre class="prettyprint"><code>UE&#95;LOG(LogClass, Log, TEXT("This is a testing statement.%s"), &#42;TestHUDString);</code></pre>
<ul ><li class="Default"><p>LogClass 为日志类别。可使用现有的类别（在 OutputDevices.h 中用 DECLARE_LOG_CATEGORY_EXTERN 宏设置）或使用 DEFINE_LOG_CATEGORY_STATIC 自行定义。 
</p></li><li class="Default"><p>Log 为使用的冗余度。冗余度在 <strong>ELogVerbosity</strong> 枚举中被定义。有效值为 Fatal、Error、Warning、Display、Log、Verbose 或 VeryVerbose。
</p></li><li class="Default"><p>下一个参数即为希望输出的文本，包括对参数的标记。
</p></li></ul><div class="tip">
	<p>此范例使用一个 %s 参数，因此 <code>&#42;</code> 运算符用于返回 %s 参数所需的 TCHAR*。</p>
</div><p>使用 UE_LOG 打印的信息位于 <strong>Output Log</strong> 中（虚幻编辑器中 <strong>Window > Output Log</strong>）。
</p><h2 id="转换宏编码">转换宏编码</h2>
<p>FString 类构建在 TCHARs 的 TArray 之上。有多个宏可用于将应用字符串（TCHAR*）转换至 ANSI 或 UNICODE 字符集，反之亦然。
宏定义的存储路径为：Engine\Source\Runtime\Core\Public\Containers\StringConv.h。
</p><p>如字符串相对较小，分配将在叠列上作为转换符类的部分完成；否则堆将被用于分配临时缓冲区。使用堆之前的尺寸为一个模板参数，
因此可将这调整到应用程序中。这在循环中是安全的操作，因为类的作用域将从叠列分配弹出。 
</p><p>常用转换宏有：
</p><ul ><li class="Default"><p>TCHAR_TO_ANSI - 将引擎字符串（TCHAR*）转换为 ANSI 字符串。
</p></li><li class="Default"><p>ANSI_TO_TCHAR - 将 ANSI 字符串转换为引擎字符串（TCHAR*）。
</p></li></ul><div class="note">
	<p>这些宏声明的对象的生命周期非常短。它们将被用作函数的参数。无法将一个变量指定到转换后的字符串内容，
因为对象将处于作用域之外，字符串将被释放。</p>
</div><div class="warning">
	<p>传入的参数必须是一个固有字符串，因为参数被类型转换为指针。如传入的是 TCHAR 而非 TCHAR*，编译后运行时将出现崩溃。
</p><p>用法：<strong>SomeApi(TCHAR_TO_ANSI(SomeUnicodeString));</strong></p>
</div>
																	</div>
					<!-- End of Markdown converted page content -->
				</div>
												<div id="recommendations"></div>			</div>
						<div id="footer"></div>									<div id="announcement">
			<div style="display:inline-block;margin:5px;">
				欢迎帮助改进虚幻引擎文档！请告诉我们该如何更好地为您服务。
			</div>
			<div style="margin:5px;display:inline-block;">
				<div class="btn action" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();window.open('https://epicgames.questionpro.com/t/AP9dGZkjp4');createCookie('announcement-read', new Date().getTime(), 30);">填写问卷调查</div>
				<div class="btn btn-default" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();createCookie('announcement-read', new Date().getTime(), 30);">取消</div>
			</div>
			<div class="btn-close" style="position:absolute;right:5px;top:10px;padding:3px;width:14px;height:14px;" onclick="$('#announcement').hide();"></div>
			</div>
					</div>
	</div></body>

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/StringHandling/FString/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 12:21:38 GMT -->
</html>
