<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/SharingAndReleasing/Mobile/UnrealPluginLanguage/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 12:42:16 GMT -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="../../../../Include/Javascript/common_zh-CN.js" type="text/javascript"></script>
	<script type="text/javascript">
		var time = new Date(0);
		var preview = false;
		var relativeHTMLPath = "https://docs.unrealengine.com/4.26/";
				var pageid = 0;
				var heroimage = "";
				var lang = "zh-CN";
				var basePath = document.location.pathname.substring(0, document.location.pathname.indexOf('/' + lang + '/') + lang.length + 1);
		document.write('<base href="' +  encodeURI(basePath) + '/SharingAndReleasing/Mobile/UnrealPluginLanguage/" />');
				var udnCSS = '../../../../Include/CSS/udn_public.css';
		var udnLangCSS = '';
				udnLangCSS = './../../../../Include/CSS/udn_public_CN.css">';
				var udnOverrideCSS = '../../../../Include/CSS/skin_overrides.css';
		var udnOverrideDarkCSS = '../../../../Include/CSS/skin_overrides_dark.css';
		var fancyboxCSS = '../../../../Include/CSS/jquery.fancybox.css';
		var jqueryuiCSS = '../../../../Include/CSS/jquery-ui.min.css';
		var qtipCSS = '../../../../Include/CSS/jquery.qtip.css';
		var prettifyCSS = '../../../../Include/CSS/prettify.css';
		var navbarCSS = '../../../../Include/CSS/navBar.css';
		var twentytwentyCSS = '../../../../Include/CSS/twentytwenty.css';
		var recommendationsCSS = '../../../../Include/CSS/jquery.recommendations.css';
	</script>
    <title>虚幻插件语言 | 虚幻引擎文档</title>
    	    <meta name=viewport content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-control" content="no-store">
    <script  src="../../../../Include/Javascript/CustomEvent.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn_extras.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-ui.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/informational.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.qtip.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/prettify.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.slimscroll.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.event.move.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.twentytwenty.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/lazysizes.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.recommendations.js" type="text/javascript"></script>
	
    <link async rel="icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async rel="shortcut icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async href="../../../../Include/Images/touch_icon.png" rel="apple-touch-icon" />
    <link async href="../../../../Include/Images/touch_icon_114.png" sizes="114x114" rel="apple-touch-icon" />    
		<script  src="../../../../Include/Javascript/CollapsibleLists.js" type="text/javascript"></script>
	<script  src="../../../../Include/Javascript/navigationBarUI.js"></script>
	<script  src="../../../../Include/Javascript/navigationBar.js"></script>
		
	<link rel="alternate" href="https://docs.unrealengine.com/latest/en-US/SharingAndReleasing/Mobile/UnrealPluginLanguage/" hreflang="x-default" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/zh-CN/SharingAndReleasing/Mobile/UnrealPluginLanguage/" hreflang="zh-CN" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ja/SharingAndReleasing/Mobile/UnrealPluginLanguage/" hreflang="ja" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ko/SharingAndReleasing/Mobile/UnrealPluginLanguage/" hreflang="ko" />

	<meta name="redirect" content="Platforms/Mobile/UnrealPluginLanguage" />
<meta name="intsourcechangelist" content="11163715" />
<meta name="availability" content="Public" />
<meta name="title" content="虚幻插件语言" />
<meta name="description" content="UPL是一种基于XML的简单语言，用于操作XML和返回字符串。" />
<meta name="type" content="reference" />
<meta name="version" content="4.21" />
<meta name="parent" content="SharingAndReleasing/Mobile" />
<meta name="order" content="7" />
<meta name="keywords" content="mobile" />
<meta name="keywords" content="Android" />
<meta name="keywords" content="Reference" />
<meta name="crumbs" content="%ROOT%,SharingAndReleasing,SharingAndReleasing/Mobile" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta property="og:title" content="虚幻插件语言" />
	<meta property="og:description" content="UPL是一种基于XML的简单语言，用于操作XML和返回字符串。" />
		<meta property="og:image" content="" />
	</head>
<body id="webbgThree" style="visibility: hidden;" onload="document.body.style.visibility='visible';">
			<script>window.__tracking_base = 'https://tracking.unrealengine.com/';</script>
	<script src="../../../../../../tracking.unrealengine.com/tracking.js" async></script>    <div id="webThree">
				<div id="page_head">
						<script type="module" 
					crossorigin="anonymous" 
					src="https://components.unrealengine.com/navigation/edc-navigation.mjs"></script>
			<edc-navigation blackListLangCodes='["de-de","es-es","es-mx","fr-fr","it-it","pt-br","ru-ru","pl-pl","tr-tr"]' locale="zh-CN" ></edc-navigation>
						<div id="pagenav">
				<div class="crumbs" id="crumbs">
<span id="versionContainer">
	<span id="versionSelect" class="btn btn-version" onclick="ToggleMenu($('#versionMenu'), $(this));"></span>
	<div id="versionMenu">
		<div id="4_26" data-version="4.26" class="btn btn-select" onclick="createCookie('version', '4.26', 365);SwitchVersion('4.26');">Unreal Engine 4.26 Documentation</div>
		<div id="4_27" data-version="4.27" class="btn btn-select" onclick="createCookie('version', '4.27', 365);SwitchVersion('4.27');">Unreal Engine 4.27 Documentation</div>
		<div id="5_0" data-version="5.0" class="btn btn-select" onclick="createCookie('version', '5.0', 365);SwitchVersion('5.0');">Unreal Engine 5.0 Documentation</div>
		<div id="5_1" data-version="5.1" class="btn btn-select" onclick="createCookie('version', '5.1', 365);SwitchVersion('5.1');">Unreal Engine 5.1 Documentation</div>
		<div id="5_2" data-version="5.2" class="btn btn-select" onclick="createCookie('version', '5.2', 365);SwitchVersion('5.2');">Unreal Engine 5.2 Documentation</div>
		<div id="5_3" data-version="5.3" class="btn btn-select" onclick="createCookie('version', '5.3', 365);SwitchVersion('5.3');">Unreal Engine 5.3 Documentation</div>
	</div>
</span>
	<span class="separator">></span> <a id="parent_link" href="../../index.html">项目分享及发布</a>

	<span class="separator">></span> <a id="parent_link" href="../index.html">移动平台游戏开发</a>

<span class="separator">></span> <span id="page">虚幻插件语言</span>
</div>				<div id="pageNavRight">
								<!-- Start of Search -->
												<div id="search_container">
					<form name="bodySearch" method="get" action="https://www.unrealengine.com/zh-CN/bing-search" onsubmit="return validateSearch()">
						<input type="image" src="../../../../Include/Images/search_box_icon.png" class="searchbutton"/>
						<input type="hidden" name="filter" value="文档" />
						<input type="text" name="keyword" placeholder="搜索文档……" class="searchbox" autocomplete="off"/>
					</form>
				</div>
								<!-- End of Search -->
				<div id="skinContainer">
	<div id="skinSelect" class="btn btn-skin" onclick="ToggleMenu($('#skinMenu'), $(this));"></div>
	<div id="skinMenu">
		<div id="light" class="btn btn-select" onclick="createCookie('skin', 'light', 365);location.reload();">Light Theme</div>
		<div id="dark" class="btn btn-select" onclick="createCookie('skin', 'dark', 365);location.reload();">Dark Theme</div>
	</div>
</div>				</div>
			</div>
		</div>						<div id="navWrapper">
			<div id="nav-filter-container">
				<div id="nav-filter-inner">
					<form>
						<input type="text" placeholder="Filter pages..." id="nav-filter" onchange="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, this.value);if(this.value.length == 0){$('#filter-clear').hide();}else{$('#filter-clear').show();}" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
						<button class="close-icon" id="filter-clear" type="reset" onclick="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, '');$(this).hide();"></button>
					</form>
				</div>
			</div>
			<nav id="navPanel">
			</nav>
			<div id="navigation" title="Click to toggle navigation menu"><span>></span></div>
		</div>		
		<div id="splitter">
		</div>
				<div id="contentContainer">
										<div id="pagedefault">
				<div id="product-banner">
	<div id="product-logo"></div>
</div>				<div id="pagecontainer" style="padding-right:0px;">
					<!-- Start of Markdown converted page content -->
																				<div class="hero  ">
						<div class="imgContainer"><img src="#" /></div>						<div class="info">
							<div id="pageTitle">
								<h1 id="H1TitleId">虚幻插件语言</h1>
							</div>	
							<h2 >UPL是一种基于XML的简单语言，用于操作XML和返回字符串。</h2>
							<div id="access">
								<div class="accessContainer">
																																			</div>
							</div>
						</div>
					</div>
																				<div id="maincol">
						<div class="togglesection" id="osContainer">
	<div class="normaltitle">
		<p>Choose your operating system:</p>
	</div><div class="toggleButtons">
		<div class="btn btn-default btn-toggle OS windows" id="windows" onclick="setSelector('OS', 'windows');">
			<p>Windows</p>
		</div>
		<div class="btn btn-default btn-toggle OS mac" id="mac" onclick="setSelector('OS', 'mac');">
			<p>macOS</p>
		</div>
		<div class="btn btn-default btn-toggle OS linux" id="linux" onclick="setSelector('OS', 'linux');">
			<p>Linux</p>
		</div>
	</div>
</div>																																				<div class="toc">
<div style="position:relative;">
    <div class="title">
    本页面的内容
    </div>
<div id="tocScroll">
    <ul>
	    		    			    <li id="">
	<p><a id="toc_link" href="#启用追踪">启用追踪</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#变量类型">变量类型</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#变量操作">变量操作</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#写入消息">写入消息</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#条件执行">条件执行</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#循环">循环</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#插入文本">插入文本</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#搜索和替换">搜索和替换</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#xml操作">XML操作</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#复制文件">复制文件</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#移除文件">移除文件</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#打包或部署">打包或部署</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#支持的节点">支持的节点</a></p>
	</li>		    	        </ul>
</div>
</div>
</div>
<p> <strong>虚幻插件语言</strong> (UPL)是一种基于XML的简单语言，用于操作XML和返回字符串。它包含一个分段，在计算任何其他分段之前，每个架构计算一次这个分段。状态被维护并推进到下个分段进行评估，因此分段的执行顺序很重要。虽然UPL是一个用于修改和查询XML的通用系统，但它专门用于允许插件影响其所属包的全局配置。例如，它允许插件修改Android APK AndroidManfiest.xml文件或IOS IPA plist文件。UBT还将查询插件的UPL xml文件，查找文件中要包含的字符串（对于包来说必须是常见的字符串），例如Android上的一些.java文件。
</p><h2 id="启用追踪">启用追踪</h2>
<p>如果需要查看在插件情境中执行的指令，请添加以下命令以启用追踪：
</p><pre class="prettyprint"><code>&lt;trace enable="true"/&gt;</code></pre>
<p>在此指令之后，在情境中实际执行的所有节点都将写入日志，直到执行 <strong><code>&lt;trace enable="false"&gt;&lt;/trace&gt;</code></strong>。您还可以使用此命令获得情境中所有变量的转储：
</p><pre class="prettyprint"><code>&lt;dumpvars/&gt;</code></pre>
<h2 id="变量类型">变量类型</h2>
<p>支持Bool、Int和String变量类型。任何属性都可以引用一个变量，在使用该语法求值之前，将用等效字符串替换该变量：
</p><pre class="prettyprint"><code>$B(name) = 布尔变量"名称"值
$I(name) = 整数变量"名称"值
$S(name) = 字符串变量"名称"值
$E(name) = 元素变量"名称"值</code></pre>
<p>以下变量将自动初始化：
</p><pre class="prettyprint"><code>$S(Output) = 返回用于计算分段的输出（初始化为输入）
$S(Architecture) = 目标架构（armeabi-armv7a、arm64-v8a、x86、x86&#95;64）
$S(PluginDir) = 加载XML文件的目录
$S(EngineDir) = 引擎目录
$S(BuildDir) = 项目平台相应的构建目录（在中间文件夹中）
$S(Configuration) = 配置类型（Debug、DebugGame、Development、Test、Shipping）
$B(Distribution) = 如果是发布构建，则为true</code></pre>
<div class="note">
	<p>除上述变量外，所有变量都在插件的情境中，以防止命名空间冲突；尝试将一个新值设置为上述任何一个值（输出除外）只会影响当前情境。</p>
</div><h2 id="变量操作">变量操作</h2>
<p>以下节点允许变量操作：
</p><pre class="prettyprint"><code>&lt;setBool result="" value=""/&gt;
&lt;setInt result="" value=""/&gt;
&lt;setString result="" value=""/&gt;
&lt;setElement result="" value=""/&gt;
&lt;setElement result="" value="" text=""/&gt;
&lt;setElement result="" xml=""/&gt;
包含值的&lt;setElement&gt;用于创建一个空的XML元素，并将标记设置为值。
包含值和文本的&lt;setElement&gt;用于创建一个XML元素，并将标记设置为未解析文本的值。
包含xml的&lt;setElement&gt;将解析提供的XML。记住对任何特殊字符进行换码！</code></pre>
<p>也可以从ini文件中的属性设置变量：
</p><pre class="prettyprint"><code>&lt;setBoolFromProperty result="" ini="" section="" property="" default=""/&gt;
&lt;setBoolFromPropertyContains result="" ini="" section="" property="" default="" contains=""/&gt;
&lt;setIntFromProperty result="" ini="" section="" property="" default=""/&gt;
&lt;setStringFromProperty result="" ini="" section="" property="" default=""/&gt;</code></pre>
<p>还可以使用<setStringFromEnvVar>节点从环境变量中设置字符串。环境变量必须指定为"<strong>value</strong>"属性，并封装在一对"<strong>%</strong>"字符中。
</p><pre class="prettyprint"><code>&lt;setStringFromEnvVar result="" value=""/&gt;</code></pre>
<p>您还可以检查是否定义了特定的环境变量（同样，用"%"字符包装）：
</p><pre class="prettyprint"><code>&lt;setBoolEnvVarDefined result="" value=""/&gt;</code></pre>
<p>使用环境变量节点的一般示例：
</p><pre class="prettyprint"><code>&lt;setBoolEnvVarDefined result="bHasNDK" value="%NDKROOT%"/&gt;
 &lt;setStringFromEnvVar result="NDKPath" value="%NDKROOT%"/&gt;</code></pre>
<p>布尔变量也可以设置为应用运算符的结果：
</p><pre class="prettyprint"><code>&lt;setBoolNot result="" source=""/&gt;
&lt;setBoolAnd result="" arg1="" arg2=""/&gt;
&lt;setBoolOr result="" arg1="" arg2=""/&gt;
&lt;setBoolIsEqual result="" arg1="" arg2=""/&gt;
&lt;setBoolIsLess result="" arg1="" arg2=""/&gt;
&lt;setBoolIsLessEqual result="" arg1="" arg2=""/&gt;
&lt;setBoolIsGreater result="" arg1="" arg2=""/&gt;
&lt;setBoolIsGreaterEqual result="" arg1="" arg2=""/&gt;
&lt;setBoolFromPropertyContains result="" ini="" section="" property="" contains=""/&gt;</code></pre>
<p>整数变量可以使用这些算术运算：
</p><pre class="prettyprint"><code>&lt;setIntAdd result="" arg1="" arg2=""/&gt;
&lt;setIntSubtract result="" arg1="" arg2=""/&gt;
&lt;setIntMultiply result="" arg1="" arg2=""/&gt;
&lt;setIntDivide result="" arg1="" arg2=""/&gt;</code></pre>
<p>字符串是用下面的代码操作的：
</p><pre class="prettyprint"><code>&lt;setStringAdd result="" arg1="" arg2=""/&gt;
&lt;setStringSubstring result="" source="" start="" length=""/&gt;
&lt;setStringReplace result="" source="" find="" with=""/&gt;</code></pre>
<p>字符串长度可以用以下代码检索：
</p><pre class="prettyprint"><code>&lt;setIntLength result="" source=""/&gt;</code></pre>
<p>搜索字符串的索引可以通过以下命令在源代码中找到：
</p><pre class="prettyprint"><code>&lt;setIntFindString result="" source="" find=""/&gt;</code></pre>
<p>还可以使用以下快捷键字符串比较，而不是使用<setIntFindString>并检查结果：
</p><pre class="prettyprint"><code>&lt;setBoolStartsWith result="" source="" find=""/&gt;
&lt;setBoolEndsWith result="" source="" find=""/&gt;
&lt;setBoolContains result="" source="" find=""/&gt;</code></pre>
<h2 id="写入消息">写入消息</h2>
<p>使用此节点将消息写入日志：
</p><pre class="prettyprint"><code>&lt;log text=""/&gt;</code></pre>
<h2 id="条件执行">条件执行</h2>
<p>条件执行使用以下形式：
</p><pre class="prettyprint"><code>&lt;if condition=""&gt;
    &lt;true&gt;
        &lt;\-- 如果条件为true，且是布尔变量，则执行 --&gt;
    &lt;/true&gt;
    &lt;false&gt;
        &lt;\-- 如果条件为false，且是布尔变量，则执行 --&gt;
    &lt;/false&gt;
&lt;/if&gt;</code></pre>
<p><code>&lt;true&gt;</code> 和 <code>&lt;false&gt;</code> 块是可选的。条件必须在布尔变量中。布尔运算符节点可以组合起来，为更复杂的条件创建最终状态：
</p><pre class="prettyprint"><code>&lt;setBoolNot result="notDistribution" source="$B(Distribution)/&gt;
&lt;setBoolIsEqual result="isX86" arg1="$S(Architecture)" arg2="x86"/&gt;
&lt;setBoolIsEqual result="isX86&#95;64" arg2="$S(Architecture)" arg2="x86&#95;64/"&gt;
&lt;setBoolOr result="isIntel" arg1="$B(isX86)" arg2="$B(isX86&#95;64)"/&gt;
&lt;setBoolAnd result="intelAndNotDistribution" arg1="$B(isIntel)" arg2="$B(notDistribution)"/&gt;
&lt;if condition="intelAndNotDistribution"&gt;
    &lt;true&gt;
        &lt;\-- 如果不是发布构建，为Intel执行一些操作 --&gt;
    &lt;/true&gt;
&lt;/if&gt;</code></pre>
<p>"isIntel"也可以这么做：
</p><pre class="prettyprint"><code>&lt;setStringSubstring result="subarch" source="$S(Architecture)" start="0" length="3"/&gt;
&lt;setBoolEquals result="isIntel" arg1="$S(subarch)" arg2="x86"/&gt;</code></pre>
<p>有两个快捷方式节点可用于条件执行：<br />以下代码：
</p><pre class="prettyprint"><code>&lt;isArch arch="armeabi-armv7"&gt;
    &lt;\-- do stuff --&gt;
&lt;/isArch&gt;</code></pre>
<p>与以下代码等效：
</p><pre class="prettyprint"><code>&lt;setBoolEquals result="temp" arg1="$S(Architecture)" arg2="armeabi-armv7"&gt;
&lt;if condition="temp"&gt;
    &lt;true&gt;
        &lt;\-- do stuff --&gt;
    &lt;/true&gt;
&lt;/if&gt;</code></pre>
<p>以下代码：
</p><pre class="prettyprint"><code>&lt;isDistribution&gt; blah
    &lt;\-- do stuff --&gt;
&lt;/isDistribution&gt;</code></pre>
<p>与以下代码等效：
</p><pre class="prettyprint"><code>&lt;if condition="Distribution"&gt;
    &lt;\-- do stuff --&gt;
&lt;/if&gt;</code></pre>
<p>可以使用以下代码停止执行：
</p><pre class="prettyprint"><code>&lt;return/&gt;</code></pre>
<h2 id="循环">循环</h2>
<p>可以使用这些节点创建循环：
</p><pre class="prettyprint"><code>&lt;while condition=""&gt;
    &lt;\-- do stuff --&gt;
&lt;/while&gt;
&lt;break/&gt;
&lt;continue/&gt;</code></pre>
<p><code>&lt;while&gt;</code> 主体将执行，直到条件为false或命中一个 <code>&lt;break/&gt;</code>。如果条件仍然为true或退出，<code>&lt;continue&gt;&lt;/continue&gt;</code> 将重新启动循环的执行。
</p><div class="note">
	<p><code>&lt;while&gt;</code> 主体外的 <code>&lt;break/&gt;</code> 的作用将与 <code>&lt;return&gt;&lt;/return&gt;</code> 相同。</p>
</div><p>下面是一个示例循环，它将1到5写入日志，其中跳过3。注意，while条件的更新应该在continue之前完成，否则它可能不会退出。
</p><pre class="prettyprint"><code>&lt;setInt result="index" value="0"/&gt;
&lt;setBool result="loopRun" value="true"/&gt;
&lt;while condition="loopRun"&gt;
    &lt;setIntAdd result="index" arg1="$I(index)" arg2="1"/&gt;
    &lt;setBoolIsLess result="loopRun" arg1="$I(index)" arg2="5"/&gt;
    &lt;setBoolIsEqual result="indexIs3" arg1="$I(index)" arg2="3"/&gt;
    &lt;if condition="indexIs3"&gt;
        &lt;true&gt;
            &lt;continue/&gt;
        &lt;/true&gt;
    &lt;/if&gt;
    &lt;log text="$I(index)"/&gt;
&lt;/while&gt;</code></pre>
<p>也可以使用变量替换来生成结果变量名。这使得在循环中创建数组成为可能：
</p><pre class="prettyprint"><code>&lt;setString result="array&#95;$I(index)" value="element $I(index) in array"/&gt;</code></pre>
<p>可以使用以下方法检索（值作为变量名处理）：
</p><pre class="prettyprint"><code>&lt;setStringFrom result="out" value="array&#95;$I(index)"/&gt;</code></pre>
<p>也可以使用变量替换来生成结果变量名。这使得在循环中创建数组成为可能：
</p><pre class="prettyprint"><code>&lt;setString result="array&#95;$I(index)" value="element $I(index) in array"/&gt;</code></pre>
<p>可以使用以下方法检索（值作为变量名处理）：
</p><pre class="prettyprint"><code>&lt;setStringFrom result="out" value="array&#95;$I(index)"/&gt;</code></pre>
<p>对于布尔和整数类型，您可以使用 <code>&lt;setBoolFrom&gt;</code> 和 <code>&lt;setIntFrom&gt;</code>。
</p><h2 id="插入文本">插入文本</h2>
<p>用于将文本插入分段的节点如下所示：
</p><pre class="prettyprint"><code>&lt;insert&gt; 主体 &lt;/insert&gt;
&lt;insertNewline/&gt;
&lt;insertValue value=""/&gt;
&lt;loadLibrary name="" failmsg=""/&gt;</code></pre>
<p>第一个将在返回的分段字符串中插入文本或节点。请注意，您必须对以下符号使用换码的字符：
</p><pre class="prettyprint"><code>&lt; = &lt;
&gt; = &gt;
&amp; = &amp;</code></pre>
<p><code>&lt;insertValue value=""&gt; /pre&gt;</code> - 在插入之前计算变量的值。如果值包含双引号(")，则必须用引号对其进行换码。<br /><code>&lt;loadLibrary name="" failmsg=""&gt;</code> - 是插入system.LoadLibrary尝试/捕捉块的快捷方式，带有可选的有关加载失败案例的日志消息。
</p><h2 id="搜索和替换">搜索和替换</h2>
<p>您可通过以下方式在输出中进行搜索和替换：
</p><pre class="prettyprint"><code>&lt;replace find="" with=""/&gt;</code></pre>
<p>您还可以直接操作实际的$S（输出），上面的方法更有效：
</p><pre class="prettyprint"><code>&lt;setStringAdd result="Input" arg1="$S(Output)" arg2="sample\n"/&gt;
&lt;setStringReplace result="Input" source="$S(Output)" find=".LAUNCH" with=".INFO"/&gt;</code></pre>
<h2 id="xml操作">XML操作</h2>
<p>XML操作使用以下节点：
</p><pre class="prettyprint"><code>&lt;addElement tag="" name=""/&gt;
&lt;addElements tag=""&gt; 主体 &lt;/addElements&gt;
&lt;removeElement tag=""/&gt;
&lt;setStringFromTag result="" tag=""/&gt;
&lt;setStringFromAttribute result="" tag="" name=""/&gt;
&lt;setStringFromTagText result="" tag=""/&gt;
&lt;addAttribute tag="" name="" value=""/&gt;
&lt;removeAttribute tag="" name=""/&gt;
&lt;loopElements tag=""&gt; instructions &lt;/loopElements&gt;</code></pre>
<p>当前元素通过tag="$"引用。元素变量通过$varname引用，因为使用$E(varname)将被扩展为与XML等效的字符串。<strong>addElement</strong>、<strong>addElements</strong> 和 <strong>removeElement</strong> 默认应用于所有匹配的标记。可添加到的可选once="true"属性仅应用于第一个匹配标记。<br /></p><p><code>&lt;uses-permission&gt;</code>、<code>&lt;uses-feature&gt;</code> 和 <code>&lt;uses-library&gt;</code> 使用以下方式更新：
</p><pre class="prettyprint"><code>&lt;addPermission android:name="" ../&gt;
&lt;addFeature android:name="" ../&gt;
&lt;addLibrary android:name="" ../&gt;</code></pre>
<p>上述命令中的任何属性都复制到添加到清单的元素中，以便您可以执行以下操作，例如：
</p><pre class="prettyprint"><code>&lt;addFeature android:name="android.hardware.usb.host" android:required="true"/&gt;</code></pre>
<h2 id="复制文件">复制文件</h2>
<p>最后，这些节点允许复制用于暂存jar和so文件的文件：
</p><pre class="prettyprint"><code>&lt;copyFile src="" dst="" force=""/&gt;
&lt;copyDir src="" dst="" force=""/&gt;</code></pre>
<p>如果force为false，则只有在长度或时间戳不匹配时才替换文件。此值默认为true。
</p><p>应该使用以下目录作为src和dst路径的基础：
</p><pre class="prettyprint"><code>$S(PluginDir) = 加载XML文件的目录
    $S(EngineDir) = 引擎目录
$S(BuildDir) = 项目平台相应的构建目录</code></pre>
<p>虽然可以在APK目录之外写入，但不推荐这样做。
</p><h2 id="移除文件">移除文件</h2>
<p>如果必须移除文件（例如发布构建中的纯开发文件），则可以使用该节点：
</p><pre class="prettyprint"><code>&lt;deleteFiles filespec=""/&gt;</code></pre>
<p>它仅限于从BuildDir中移除文件。下面是从资源目录中移除Oculus签名文件(osig)的示例用法：
</p><pre class="prettyprint"><code>&lt;deleteFiles filespec="assets/oculussig&#95;&#42;"/&gt;</code></pre>
<h2 id="打包或部署">打包或部署</h2>
<p>在打包或部署阶段评估以下部分：
</p><pre class="prettyprint"><code>对于所有平台
&lt;\-- 每个架构都要对init部分进行一次评估 --&gt;
    &lt;init&gt; &lt;/init&gt;
 Android特定部分
        &lt;\--  应用于AndroidManifest.xml的可选更新 --&gt;
    &lt;androidManifestUpdates&gt; &lt;/androidManifestUpdates&gt;
        &lt;\--  proguard的可选添加内容 --&gt;
    &lt;proguardAdditions&gt;    &lt;/proguardAdditions&gt;
        &lt;\--  可选的AAR导入添加内容 --&gt;
    &lt;AARImports&gt; &lt;/AARImports&gt;
        &lt;\--  可选的基础build.gradle添加内容 --&gt;
    &lt;baseBuildGradleAdditions&gt;  &lt;/baseBuildGradleAdditions&gt;
        &lt;\--  可选的基础build.gradle构建脚本添加内容 --&gt;
    &lt;buildscriptGradleAdditions&gt;  &lt;/buildscriptGradleAdditions&gt;
        &lt;\--  可选的应用程序build.gradle添加内容 --&gt;
    &lt;buildGradleAdditions&gt;  &lt;/buildGradleAdditions&gt;
        &lt;\--  在${sdk.dir}/tools/ant/build.xml导入之前，对生成的build.xml的可选添加内容 --&gt;
    &lt;buildXmlPropertyAdditions&gt; &lt;/buildXmlPropertyAdditions&gt;
        &lt;\--  在ndk构建之前可以选择从Intermediate/Android/APK复制或删除的文件或目录 --&gt;
    &lt;prebuildCopies&gt; &lt;/prebuildCopies&gt;
        &lt;\-- 在ndk构建之后可以选择从Intermediate/Android/APK复制或删除的文件或目录 --&gt;
    &lt;resourceCopies&gt; &lt;/resourceCopies&gt;
        &lt;\-- 在Gradle之前可以选择从Intermediate/Android/APK复制或删除的文件或目录 --&gt;
    &lt;gradleCopies&gt; &lt;/gradleCopies&gt;
        &lt;\-- 可以选择添加到gradle.properties的属性 --&gt;
    &lt;gradleProperties&gt; &lt;/gradleProperties&gt;
        &lt;\-- 可以选择添加到Gradle命令行的参数（带有空格的前缀或将碰到前面的参数） --&gt;
    &lt;gradleParameters&gt; &lt;/gradleParameters&gt;
        &lt;\-- 可选的必要最小SDK API级别 --&gt;
    &lt;minimumSDKAPI&gt; &lt;/minimumSDKAPI&gt;
        &lt;\-- GameActivity.java中的GameActivity导入的可选添加内容 --&gt;
    &lt;gameActivityImportAdditions&gt; &lt;/gameActivityImportAdditions&gt;
       &lt;\-- GameActivity.java中的导入后可以选择向GameActivity添加的内容 --&gt;
    &lt;gameActivityPostImportAdditions&gt; &lt;/gameActivityPostImportAdditions&gt;
        &lt;\-- GameActivity.java中的GameActivity类实现的可选添加内容（每行以逗号结尾） --&gt;
    &lt;gameActivityImplementsAdditions&gt; &lt;/gameActivityImplementsAdditions&gt;
        &lt;\-- GameActivity.java中GameActivity类主体的可选添加内容 --&gt;
    &lt;gameActivityClassAdditions&gt; &lt;/gameActivityOnClassAdditions&gt;
        &lt;\-- GameActivity.java中GameActivity onCreate元数据读取的可选添加内容 --&gt;
    &lt;gameActivityReadMetadata&gt; &lt;/gameActivityReadMetadata&gt;
        &lt;\-- GameActivity.java中GameActivity onCreate的可选添加内容 --&gt;
    &lt;gameActivityOnCreateAdditions&gt; &lt;/gameActivityOnCreateAdditions&gt;
        &lt;\-- GameActivity.java中GameActivity onDestroy的可选添加内容 --&gt;
    &lt;gameActivityOnDestroyAdditions&gt; &lt;/gameActivityOnDestroyAdditions&gt;
        &lt;\-- GameActivity.java中GameActivity onStart的可选添加内容 --&gt;
    &lt;gameActivityOnStartAdditions&gt; &lt;/gameActivityOnStartAdditions&gt;
        &lt;\-- GameActivity.java中GameActivity onStop的可选添加内容 --&gt;
    &lt;gameActivityOnStopAdditions&gt; &lt;/gameActivityOnStopAdditions&gt;
        &lt;\-- GameActivity.java中GameActivity onPause的可选添加内容 --&gt;
    &lt;gameActivityOnPauseAdditions&gt; &lt;/gameActivityOnPauseAdditions&gt;
        &lt;\-- GameActivity.java中GameActivity onResume的可选添加内容 --&gt;
    &lt;gameActivityOnResumeAdditions&gt;    &lt;/gameActivityOnResumeAdditions&gt;
        &lt;\-- GameActivity.java中GameActivity onNewIntent的可选添加内容 --&gt;
    &lt;gameActivityOnNewIntentAdditions&gt; &lt;/gameActivityOnNewIntentAdditions&gt;
        &lt;\-- GameActivity.java中GameActivity onActivityResult的可选添加内容 --&gt;
    &lt;gameActivityOnActivityResultAdditions&gt;    &lt;/gameActivityOnActivityResultAdditions&gt;
        &lt;\-- GameActivity.java中加载的可选库（在libUE4.so之前） --&gt;
    &lt;soLoadLibrary&gt;    &lt;/soLoadLibrary&gt;</code></pre>
<h2 id="支持的节点">支持的节点</h2>
<p>以下是支持节点的完整列表：
</p><pre class="prettyprint"><code>&lt;isArch arch=""&gt;
&lt;isDistribution&gt;
&lt;if&gt; =&gt; &lt;true&gt; / &lt;false&gt;
&lt;while condition=""&gt;
&lt;return/&gt;
&lt;break/&gt;
&lt;continue/&gt;
&lt;log text=""/&gt;
&lt;insert&gt; &lt;/insert&gt;
&lt;insertValue value=""/&gt;
&lt;replace find="" with""/&gt;
&lt;copyFile src="" dst=""/&gt;
&lt;copyDir src="" dst=""/&gt;
&lt;loadLibrary name="" failmsg=""/&gt;
&lt;setBool result="" value=""/&gt;
&lt;setBoolEnvVarDefined result="" value=""/&gt;
&lt;setBoolFrom result="" value=""/&gt;
&lt;setBoolFromProperty result="" ini="" section="" property="" default=""/&gt;
&lt;setBoolFromPropertyContains result="" ini="" section="" property="" contains=""/&gt;
&lt;setBoolNot result="" source=""/&gt;
&lt;setBoolAnd result="" arg1="" arg2=""/&gt;
&lt;setBoolOr result="" arg1="" arg2=""/&gt;
&lt;setBoolIsEqual result="" arg1="" arg2=""/&gt;
&lt;setBoolIsLess result="" arg1="" arg2=""/&gt;
&lt;setBoolIsLessEqual result="" arg1="" arg2=""/&gt;
&lt;setBoolIsGreater result="" arg1="" arg2=""/&gt;
&lt;setBoolIsGreaterEqual result="" arg1="" arg2=""/&gt;
&lt;setInt result="" value=""/&gt;
&lt;setIntFrom result="" value=""/&gt;
&lt;setIntFromProperty result="" ini="" section="" property="" default=""/&gt;
&lt;setIntAdd result="" arg1="" arg2=""/&gt;
&lt;setIntSubtract result="" arg1="" arg2=""/&gt;
&lt;setIntMultiply result="" arg1="" arg2=""/&gt;
&lt;setIntDivide result="" arg1="" arg2=""/&gt;
&lt;setIntLength result="" source=""/&gt;
&lt;setIntFindString result="" source="" find=""/&gt;
&lt;setString result="" value=""/&gt;
&lt;setStringFrom result="" value=""/&gt;
&lt;setStringFromEnvVar result="" value=""/&gt;
&lt;setStringFromProperty result="" ini="" section="" property="" default=""/&gt;
&lt;setStringAdd result="" arg1="" arg2=""/&gt;
&lt;setStringSubstring result="" source="" index="" length=""/&gt;
&lt;setStringReplace result="" source="" find="" with=""/&gt;</code></pre>

																	</div>
					<!-- End of Markdown converted page content -->
				</div>
												<div id="pageTags">
				<div class="title">标签</div>
					<div>
					<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=mobile">mobile</a></div>
<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=Android">Android</a></div>
<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=Reference">Reference</a></div>
					</div>
				</div>
								<div id="recommendations"></div>			</div>
						<div id="footer"></div>									<div id="announcement">
			<div style="display:inline-block;margin:5px;">
				欢迎帮助改进虚幻引擎文档！请告诉我们该如何更好地为您服务。
			</div>
			<div style="margin:5px;display:inline-block;">
				<div class="btn action" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();window.open('https://epicgames.questionpro.com/t/AP9dGZkjp4');createCookie('announcement-read', new Date().getTime(), 30);">填写问卷调查</div>
				<div class="btn btn-default" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();createCookie('announcement-read', new Date().getTime(), 30);">取消</div>
			</div>
			<div class="btn-close" style="position:absolute;right:5px;top:10px;padding:3px;width:14px;height:14px;" onclick="$('#announcement').hide();"></div>
			</div>
					</div>
	</div></body>

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/SharingAndReleasing/Mobile/UnrealPluginLanguage/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 12:42:17 GMT -->
</html>
