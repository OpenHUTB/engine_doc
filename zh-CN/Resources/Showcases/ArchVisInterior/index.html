<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/Resources/Showcases/ArchVisInterior/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 10:58:29 GMT -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="../../../../Include/Javascript/common_zh-CN.js" type="text/javascript"></script>
	<script type="text/javascript">
		var time = new Date(0);
		var preview = false;
		var relativeHTMLPath = "https://docs.unrealengine.com/4.26/";
				var pageid = 0;
				var heroimage = "";
				var lang = "zh-CN";
				var basePath = document.location.pathname.substring(0, document.location.pathname.indexOf('/' + lang + '/') + lang.length + 1);
		document.write('<base href="' +  encodeURI(basePath) + '/Resources/Showcases/ArchVisInterior/" />');
				var udnCSS = '../../../../Include/CSS/udn_public.css';
		var udnLangCSS = '';
				udnLangCSS = './../../../../Include/CSS/udn_public_CN.css">';
				var udnOverrideCSS = '../../../../Include/CSS/skin_overrides.css';
		var udnOverrideDarkCSS = '../../../../Include/CSS/skin_overrides_dark.css';
		var fancyboxCSS = '../../../../Include/CSS/jquery.fancybox.css';
		var jqueryuiCSS = '../../../../Include/CSS/jquery-ui.min.css';
		var qtipCSS = '../../../../Include/CSS/jquery.qtip.css';
		var prettifyCSS = '../../../../Include/CSS/prettify.css';
		var navbarCSS = '../../../../Include/CSS/navBar.css';
		var twentytwentyCSS = '../../../../Include/CSS/twentytwenty.css';
		var recommendationsCSS = '../../../../Include/CSS/jquery.recommendations.css';
	</script>
    <title>建筑可视化内部渲染 | 虚幻引擎文档</title>
    	    <meta name=viewport content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-control" content="no-store">
    <script  src="../../../../Include/Javascript/CustomEvent.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn_extras.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-ui.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/informational.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.qtip.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/prettify.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.slimscroll.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.event.move.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.twentytwenty.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/lazysizes.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.recommendations.js" type="text/javascript"></script>
	
    <link async rel="icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async rel="shortcut icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async href="../../../../Include/Images/touch_icon.png" rel="apple-touch-icon" />
    <link async href="../../../../Include/Images/touch_icon_114.png" sizes="114x114" rel="apple-touch-icon" />    
		<script  src="../../../../Include/Javascript/CollapsibleLists.js" type="text/javascript"></script>
	<script  src="../../../../Include/Javascript/navigationBarUI.js"></script>
	<script  src="../../../../Include/Javascript/navigationBar.js"></script>
		
	<link rel="alternate" href="https://docs.unrealengine.com/latest/en-US/Resources/Showcases/ArchVisInterior/" hreflang="x-default" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/zh-CN/Resources/Showcases/ArchVisInterior/" hreflang="zh-CN" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ja/Resources/Showcases/ArchVisInterior/" hreflang="ja" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ko/Resources/Showcases/ArchVisInterior/" hreflang="ko" />

	<meta name="intsourcechangelist" content="16146891" />
<meta name="availability" content="Public" />
<meta name="title" content="建筑可视化内部渲染" />
<meta name="description" content="介绍如何使用虚幻引擎的渲染功能来创建拥有照片级真实度的建筑可视化室内效果。" />
<meta name="version" content="4.24" />
<meta name="parent" content="Resources/Showcases" />
<meta name="keywords" content="showcases" />
<meta name="type" content="overview" />
<meta name="related" content="RenderingAndGraphics/RayTracing" />
<meta name="related" content="RenderingAndGraphics/Materials/LayeredMaterials" />
<meta name="related" content="RenderingAndGraphics/Materials/PhysicallyBased" />
<meta name="related" content="RenderingAndGraphics/Materials" />
<meta name="crumbs" content="%ROOT%,Resources,Resources/Showcases" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta property="og:title" content="建筑可视化内部渲染" />
	<meta property="og:description" content="介绍如何使用虚幻引擎的渲染功能来创建拥有照片级真实度的建筑可视化室内效果。" />
		<meta property="og:image" content="" />
	</head>
<body id="webbgThree" style="visibility: hidden;" onload="document.body.style.visibility='visible';">
			<script>window.__tracking_base = 'https://tracking.unrealengine.com/';</script>
	<script src="../../../../../../tracking.unrealengine.com/tracking.js" async></script>    <div id="webThree">
				<div id="page_head">

			<edc-navigation blackListLangCodes='["de-de","es-es","es-mx","fr-fr","it-it","pt-br","ru-ru","pl-pl","tr-tr"]' locale="zh-CN" ></edc-navigation>
						<div id="pagenav">
				<div class="crumbs" id="crumbs">

	<span class="separator">></span> <a id="parent_link" href="../../index.html">示例与教学</a>

	<span class="separator">></span> <a id="parent_link" href="../index.html">引擎特性示例</a>

<span class="separator">></span> <span id="page">建筑可视化内部渲染</span>
</div>				<div id="pageNavRight">
								<!-- Start of Search -->
												<div id="search_container">
					<form name="bodySearch" method="get" action="https://www.unrealengine.com/zh-CN/bing-search" onsubmit="return validateSearch()">
						<input type="image" src="../../../../Include/Images/search_box_icon.png" class="searchbutton"/>
						<input type="hidden" name="filter" value="文档" />
						<input type="text" name="keyword" placeholder="搜索文档……" class="searchbox" autocomplete="off"/>
					</form>
				</div>
								<!-- End of Search -->
				<div id="skinContainer">
	<div id="skinSelect" class="btn btn-skin" onclick="ToggleMenu($('#skinMenu'), $(this));"></div>
	<div id="skinMenu">
		<div id="light" class="btn btn-select" onclick="createCookie('skin', 'light', 365);location.reload();">Light Theme</div>
		<div id="dark" class="btn btn-select" onclick="createCookie('skin', 'dark', 365);location.reload();">Dark Theme</div>
	</div>
</div>				</div>
			</div>
		</div>						<div id="navWrapper">

			 <nav id="navPanel">
				<div class="contents-table-el"><!----><!----><!----><!----><a class="contents-table-link is-parent" href="/zh-CN/Basics/index.html">理解基础概念</a><!----></div>
				<div class="contents-table-el"><a class="contents-table-link is-parent" href="/zh-CN/WorkingWithContent/index.html">管理内容</a><!----></div>
				<div class="contents-table-el"><a class="contents-table-link is-parent" href="/zh-CN/BuildingWorlds/index.html">构建虚拟世界</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/RenderingAndGraphics/index.html">设计视觉、渲染和图形效果</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/ProgrammingAndScripting/index.html">编程和脚本编写</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/InteractiveExperiences/index.html">创建交互体验</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/AnimatingObjects/index.html">为角色和对象添加动画</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/WorkingWithMedia/index.html">使用媒体</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/ProductionPipelines/index.html">建立你的开发流程</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/TestingAndOptimization/index.html">测试并优化你的内容</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/SharingAndReleasing/index.html">项目分享及发布</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/Resources/index.html">示例与教学</a><!----></div>
				<div class="contents-table-el"><a class="contents-table-link is-parent" href="/zh-CN/WhatsNew/index.html">新内容</a></div>
			</nav>
			<div id="navigation" title="Click to toggle navigation menu"><span>></span></div>
		</div>		
		<div id="splitter">
		</div>
				<div id="contentContainer">
										<div id="pagedefault">
				<div id="product-banner">
	<div id="product-logo"></div>
</div>				<div id="pagecontainer" style="padding-right:0px;">
					<!-- Start of Markdown converted page content -->
																				<div class="hero  ">
						<div class="imgContainer"><img src="#" /></div>						<div class="info">
							<div id="pageTitle">
								<h1 id="H1TitleId">建筑可视化内部渲染</h1>
							</div>	
							<h2 >介绍如何使用虚幻引擎的渲染功能来创建拥有照片级真实度的建筑可视化室内效果。</h2>
							<div id="access">
								<div class="accessContainer">
																																			</div>
							</div>
						</div>
					</div>
																				<div id="maincol">
						<div class="togglesection" id="osContainer">
	<div class="normaltitle">
		<p>Choose your operating system:</p>
	</div><div class="toggleButtons">
		<div class="btn btn-default btn-toggle OS windows" id="windows" onclick="setSelector('OS', 'windows');">
			<p>Windows</p>
		</div>
		<div class="btn btn-default btn-toggle OS mac" id="mac" onclick="setSelector('OS', 'mac');">
			<p>macOS</p>
		</div>
		<div class="btn btn-default btn-toggle OS linux" id="linux" onclick="setSelector('OS', 'linux');">
			<p>Linux</p>
		</div>
	</div>
</div>																		<div id="seeAlso">
	<div style="position:relative;">
		<div id="title">参见</div>
		<div id="pageList">
			<ul>
								<li>
					<p>
						<a id="related_link" href="../../../RenderingAndGraphics/RayTracing/index.html" title="虚幻引擎4中的光线追踪的概述。">实时光线追踪</a>
					</p>
				</li>
								<li>
					<p>
						<a id="related_link" href="../../../RenderingAndGraphics/Materials/LayeredMaterials/index.html" title="有关 UE4 中分层材质技术的介绍文档。">分层材质</a>
					</p>
				</li>
								<li>
					<p>
						<a id="related_link" href="../../../RenderingAndGraphics/Materials/PhysicallyBased/index.html" title="有关主要材质输入及如何加以善用的概述。">基于物理的材质</a>
					</p>
				</li>
								<li>
					<p>
						<a id="related_link" href="../../../RenderingAndGraphics/Materials/index.html" title="使用着色器控制世界中的表面外形。">材质</a>
					</p>
				</li>
							</ul>
		</div>
	</div>
</div>
																														<div class="toc">
<div style="position:relative;">
    <div class="title">
    本页面的内容
    </div>
<div id="tocScroll">
    <ul>
	    		    			    <li id="">
	<p><a id="toc_link" href="#材质">材质</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#场景光照">场景光照</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#其他优化、提示和技巧">其他优化、提示和技巧</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#过场动画渲染的sequencer和后期处理使用">过场动画渲染的Sequencer和后期处理使用</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#致谢">致谢</a></p>
	</li>		    	        </ul>
</div>
</div>
</div>
<div class="note">
	<p>可在Epic Games Launcher的 <strong>学习（Learn）</strong> 选项卡中下载此示例项目。</p>
</div><p>Archviz室内渲染示例展示了虚幻引擎4（UE4）逼真的渲染技术。以下提供了一个可供探索的小型公寓场景，已事先进行了设置，可以提供各情境下的最佳效果，因此你可以自学各种技巧，甚至在自己的作品中使用其中的元素。 
</p><!--
videoid:paramliteral
width:paramliteral
height:paramliteral
units:paramliteral
type:paramliteral
start:paramliteral
service:paramliteral
-->
<style type="text/css">
#player_1_hxzs6ifs_14
{
	margin: 0px;
	width: 100%;
	display: inline-block;
	position: relative;
	overflow: hidden;
}
#player_1_hxzs6ifs_14:after
{
	content: "";
	padding-top: 56.25%;
	display: block;
}
</style> 
<div id="player_1_hxzs6ifs_14"> 
	<div id="playerContainer_1_hxzs6ifs_14" style="position:absolute;top:0;left: 0;right: 0;bottom:0;border:solid thin black;">
		<iframe width="100%" height="100%" frameborder="0" allow="autoplay; encrypted-media;" allowfullscreen="" src="https://dev.epicgames.com/community/api/cms/videos/1_hxzs6ifs/embed.html"></iframe>
	</div>
</div>
<p>该场景运用了以下可供学习的技巧：
</p><ul ><li class="Default"><p>使用基于物理的材质。
</p></li><li class="Default"><p>设置自己的主材质和实例。
</p></li><li class="Default"><p>使用和优化带光纤追踪的动态光照技术。
</p></li><li class="Default"><p>了解定义不同光线追踪设置集的方法，以实现高质量渲染输出和交互式场景查看。
</p></li></ul><h2 id="材质">材质</h2>
<div class="tip">
	<p>本示例的文档包含部分虚幻引擎材质功能的高级视图。因此，建议阅读<a id="content_link"filter-data="tag_materials" href="../../../RenderingAndGraphics/Materials/index.html" ><span>材质</span></a>文档以了解本章节所述概念和功能的更多相关信息。</p>
</div><p>虚幻引擎采用<a id="content_link"filter-data="tag_physically_based_shading tag_pbr tag_materials" href="../../../RenderingAndGraphics/Materials/PhysicallyBased/index.html" ><span>基于物理材质</span></a>系统。因此能够估算出光源的实际作用，而非预期作用。最终结果将更准确且外观更自然。同时，这也代表着此类类型的材质在所有光照环境下均同样适用，拥有的值也更简单且独立。 
</p><p>重要的是许多材质外观和对光照的反应都很真实，尤其是在此示例项目中。为了确保更高的一致性和准确性，材质采用层级父子关系。利用此关系可获得"主"材质，其拥有许多可控参数，只需将它传递到子实例并更改或覆盖，便可调整材质中不同的属性或值。利用此子实例或<a id="content_link"filter-data="tag_materials" href="../../../RenderingAndGraphics/Materials/MaterialInstances/index.html" ><span>材质实例</span></a>可更改和覆盖公开值，以创建其父材质任意数量的变体。<br /></p><p>以下为可调整的部分公开属性范例：
</p><div class="fullwidth">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>属性名称 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>示例 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>说明 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>底色（Base Color）</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<!--
id:paramliteral
max:paramliteral
ext:paramliteral
caption:paramliteral
image_list:param
-->
<div class="slider_container" id="BaseColor">
    <div id="BaseColor_Image"></div>
    <div class="slider"></div>
	    <div class="caption">
        <b><p><strong>拖动滑块显示底色变更。</strong></p></b>
    </div>
	    <div id="images" class="hidden">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/BaseColor1.jpg">
		<img class="  lazyload" alt="BaseColor1.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/BaseColor1.jpg" />
</picture>

<picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/BaseColor2.jpg">
		<img class="  lazyload" alt="BaseColor2.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/BaseColor2.jpg" />
</picture>

<picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/BaseColor3.jpg">
		<img class="  lazyload" alt="BaseColor3.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/BaseColor3.jpg" />
</picture>
</p>
    </div>
</div>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此属性是对象材质的基础颜色。虽然纹理均可用作底色，但为了遵循基于物理的光照，底色不应含有光照信息。底色应该是底层材质的原色。（如需示例，请查看此项目中任意漫反射纹理。）</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>金属感（Metallic）</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<!--
id:paramliteral
max:paramliteral
ext:paramliteral
caption:paramliteral
image_list:param
-->
<div class="slider_container" id="金属感">
    <div id="金属感_Image"></div>
    <div class="slider"></div>
	    <div class="caption">
        <b><p><strong>拖动滑块显示金属感变更。</strong></p></b>
    </div>
	    <div id="images" class="hidden">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Metallic1.jpg">
		<img class="  lazyload" alt="Metallic1.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Metallic1.jpg" />
</picture>

<picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Metallic2.jpg">
		<img class="  lazyload" alt="Metallic2.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Metallic2.jpg" />
</picture>

<picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Metallic3.jpg">
		<img class="  lazyload" alt="Metallic3.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Metallic3.jpg" />
</picture>
</p>
    </div>
</div>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此属性控制材质表面的金属感。调整此值可使材质更具金属感，以便控制周围环境影响对象自身底色的程度。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>粗糙度（Roughness）</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<!--
id:paramliteral
max:paramliteral
ext:paramliteral
caption:paramliteral
image_list:param
-->
<div class="slider_container" id="粗糙度">
    <div id="粗糙度_Image"></div>
    <div class="slider"></div>
	    <div class="caption">
        <b><p><strong>拖动滑块显示粗糙度变更。</strong></p></b>
    </div>
	    <div id="images" class="hidden">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Roughness1.jpg">
		<img class="  lazyload" alt="Roughness1.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Roughness1.jpg" />
</picture>

<picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Roughness2.jpg">
		<img class="  lazyload" alt="Roughness2.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Roughness2.jpg" />
</picture>

<picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Roughness3.jpg">
		<img class="  lazyload" alt="Roughness3.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Roughness3.jpg" />
</picture>
</p>
    </div>
</div>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此属性控制镜面反射的漫反射。它将在整个表面应用"微表面（microfaceting）"效果。值越低代表表面越平滑，越高则越粗糙。可以想象一下镜面铬和拉丝铝二者在反射中的区别。</p>
			</td>
	
</tr></tbody>
</table>
</div><h3 id="材质实例化">材质实例化</h3>
<p>如果要在项目中创建大量使用拥有类似属性的类似材质的对象，建议创建将此类对象公开为参数和值的主材质（这些参数和值可在名为<a id="content_link"filter-data="tag_materials" href="../../../RenderingAndGraphics/Materials/MaterialInstances/index.html" ><span>材质实例</span></a>的子实例中设置）。 
</p><p>该场景中大多数对象使用的类似属性已被参数化，将用于创建主材质的简单变体或现有材质实例。这意味着可控制简单值的属性，或切换用于材质的纹理类型。另外，场景中不一定所有对象都需要单独的基础材质。此设置不仅对项目有效，对GPU的性能也有效。由于多数情况下更改此类参数和属性无需额外编译，因此此设置将使着色器编译需求降到最低。 
</p><div class="imagetable">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/MaterialInstancing_DefaultMaster.jpg">
		<img class="  lazyload" alt="MaterialInstancing_DefaultMaster.png" width="400" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/MaterialInstancing_DefaultMaster.jpg" />
</picture>
 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/MI_BaseColorTint.jpg">
		<img class="  lazyload" alt="MI_BaseColorTint.png" width="400" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/MI_BaseColorTint.jpg" />
</picture>
 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/MI_DiffuseTexture_Alt.jpg">
		<img class="  lazyload" alt="MI_DiffuseTexture_Alt.png" width="400" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/MI_DiffuseTexture_Alt.jpg" />
</picture>
 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p>主材质（默认值）</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>材质实例：底色着色变更</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>材质实例：漫反射和法线纹理切换</p>
			</td>
	
</tr></tbody>
</table>
</div><h4 id="主材质使用">主材质使用</h4>
<div class="Note">
	<p>设置和使用主材质是虚幻引擎中的高级工作流。在深入了解这一内容之前，先看看本页的"材质实例使用"部分，或通过以下文档了解UE4中材质的更多信息：
</p><ul ><li class="Default"><p><a id="content_link"filter-data="tag_materials" href="../../../RenderingAndGraphics/Materials/MaterialInputs/index.html" ><span>材质输入</span></a>
</p></li><li class="Default"><p><a id="content_link"filter-data="tag_materials" href="../../../RenderingAndGraphics/Materials/HowTo/Making_Parameters/index.html" ><span>创建材质参数</span></a>
</p></li><li class="Default"><p><a id="content_link"filter-data="tag_materials" href="../../../RenderingAndGraphics/Materials/MaterialInstances/index.html" ><span>实例化材质</span></a>
</p></li><li class="Default"><p><a id="content_link"filter-data="tag_materials" href="../../../RenderingAndGraphics/Materials/HowTo/Instancing/index.html" ><span>创建和使用材质实例</span></a>
</p></li></ul><p>你也可以访问<a id="content_link" href="https://learn.unrealengine.com/" ><span>虚幻在线学习</span></a>门户课程<a id="content_link" href="https://learn.unrealengine.com/course/2436621?r=False&amp;ts=637122711879696689" ><span>材质 - 探索基本概念</span></a>。</p>
</div><p>设置主材质时，务必提前考虑项目需求。这意味着要考虑对于设计师和美术师来说，需要将哪些属性公开为材质实例中的参数。你们可以使用通用的主材质快速修改项目，这样便无需擦除父材质中设置的默认值或属性，并将快速修改带来的影响降到最低。
</p><div class="lightbox">
	<p><span class="non-localized"><a id="content_link" href="../../../../Images/Resources/Showcases/ArchVisInterior/M_MasterMaterial_HQ.png" ><span><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/M_MasterMaterial_LQ.jpg">
		<img class="  lazyload" alt="M_MasterMaterial_LQ.png" width="800" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/M_MasterMaterial_LQ.jpg" />
</picture>
</span></a></span></p>
</div><div class="caption">
	<p>在该场景中，分配到很多对象的主材质名为 <code>M&#95;MasterMaterial</code>。</p>
</div><p>设置项目的主材质时注意以下几点： 
</p><ul ><li class="Default"><p>此材质将应用于什么类型的对象？
</p><ul ><li class="Default"><p>建议按 <strong>混合模式（Blend Mode）</strong> 区分主材质类型，例如透明、不透明、遮罩等。
</p></li><li class="Default"><p>同时建议将可平铺纹理用于底色、粗糙度、法线等等。此类对象的唯一纹理贴图不通用，可能需要额外操作。
</p></li></ul></li><li class="Default"><p>需公开哪些属性和值？
</p><ul ><li class="Default"><p>若使用不透明或透明混合模式，哪些属性和/或值需用于定义特定对象的外观，同时使美术师和关卡设计师能够灵活有效地进行更改。
</p></li></ul></li></ul><p>了解在主材质 <strong>M_MasterMaterial</strong> 中，如何设置部分通用参数以提供使用子实例的任意数量的变体。一起来看 <strong>BaseColor</strong> 路径： 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/BaseColorPath.jpg">
		<img class="  lazyload" alt="BaseColorPath.png" width="1200" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/BaseColorPath.jpg" />
</picture>

</p><ul ><li class="Default"><p>名为 <strong>BaseColor</strong> 的纹理参数用于指定纹理资产。在材质实例中覆盖时，可将纹理资产与可兼容纹理类型（例如法线或漫反射纹理）交换。
</p></li><li class="Default"><p>在材质实例中启用时，名为 <strong>BaseColorTint</strong> 的Vector4参数将用于更改纹理资产的颜色。需要稍微或大幅更改对象颜色而非其纹理时，此参数十分有用。
</p></li><li class="Default"><p>名为 <strong>UseBaseColorTint?</strong> 和 <strong>UseBaseColorTexture?</strong> 的切换参数用于启用设置底色和/或其色调的不同路径。启用或禁用其中部分参数将公开或删除此材质中显示的参数。
</p></li></ul><div class="tip">
	<p>此特定主材质提供附加控制，以指定纹理、纹理顶部的颜色着色等。我们并不一直需要此类灵活性。你可以根据项目需求及美术师和关卡设计师的要求，做出最佳判断。 </p>
</div><h4 id="材质实例使用">材质实例使用</h4>
<p>使用要公开的参数和默认值设置主材质后，可创建自己的材质资产实例，此实例将创建材质实例资产。 
</p><p>在内容浏览器中右键点击材质资产，然后在快捷菜单中选择 <strong>创建材质实例（Create Material Instance）</strong>，即可完成该操作。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/CreateMaterialInstance.jpg">
		<img class="  lazyload" alt="CreateMaterialInstance.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/CreateMaterialInstance.jpg" />
</picture>

</p><p>打开实例时，你可以在视口中找到材质预览（1）。右侧包含所有公开属性和值，可在右右侧面板的 <strong>参数组（Parameter Groups）</strong> 中覆盖（2）。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/MaterialInstanceEditor.jpg">
		<img class="  lazyload" alt="MaterialInstanceEditor.png" width="900" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/MaterialInstanceEditor.jpg" />
</picture>

</p><p>在 <strong>一般（General）</strong> 类别下，<strong>父（Parent）</strong> 指定框包含此材质实例资产的父材质。父材质可以是材质或材质实例资产。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/MaterialInstanceParent.jpg">
		<img class="  lazyload" alt="MaterialInstanceParent.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/MaterialInstanceParent.jpg" />
</picture>

</p><div class="tip">
	<p>注意：父材质不固定为是主材质，也可能为另一实例。例如，创建织物或木质材质并要创建不同颜色的变体时适用该材质。 </p>
</div><p>在 <code>Content\Materials</code> 文件夹中可找到本项目中使用的材质和材质实例，以便进行探索。
</p><div class="note">
	<p>如需了解创建实例的更多信息，参见<a id="content_link" href="../../../RenderingAndGraphics/Materials/HowTo/Instancing/index.html" ><span>材质实例</span></a>页面。</p>
</div><h2 id="场景光照">场景光照</h2>
<p>该室内架构场景的 <em>外观和感觉</em> 主要由光照的设置方式以及光照与场景中使用的对象和材质的交互方式定义。该特殊场景大量使用了最新虚幻引擎<a id="content_link"filter-data="tag_ray_tracing" href="../../../RenderingAndGraphics/RayTracing/index.html" ><span>光线追踪</span></a>功能，用于进行柔和区域投影、画面外对象的精准反射以及实时全局光照。 
</p><h3 id="设置注意事项">设置注意事项</h3>
<p>为在该场景中获得光照，我们进行了部分额外光照设置，通过多种类型的光源和设置创建出逼真的视觉效果。 
</p><p>该场景包含下列类型的光源和设置：
</p><ul ><li class="Default"><p>作为主光源的定向光源。
</p></li><li class="Default"><p>用于模拟从天空射出并透过窗户的漫反射贡献的多个矩形光源。
</p></li><li class="Default"><p>与物理光照强度匹配的后期处理体积的曝光值。
</p></li></ul><h3 id="光线追踪功能">光线追踪功能</h3>
<h4 id="光照">光照</h4>
<p>该室内场景仅使用动态光照和<a id="content_link"filter-data="tag_ray_tracing" href="../../../RenderingAndGraphics/RayTracing/index.html" ><span>光线追踪</span></a>功能模拟使用具有天空环境光照的单一太阳光源进行光照的效果。该设置在整个场景中提供均匀的光线分布，减少了过度投影的区域。利用光线追踪阴影，能获得具有良好区域衰减的明显接触面，可在公寓中的许多地方进行柔和投影。 
</p><!--
before:param
after:param
position:paramliteral
-->
<div class="comparison_slider">
    <div class="first">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/RaytracedShadows.jpg">
		<img class="  lazyload" alt="光线追踪投影" width="700" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/RaytracedShadows.jpg" />
</picture>
</p>
        <div class="overlay-first "></div>
    </div>
    <div class="last">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/ShadowMapping.jpg">
		<img class="  lazyload" alt="阴影映射" width="700" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/ShadowMapping.jpg" />
</picture>
</p>
        <div class="overlay-last "></div>
    </div>
</div><p>为使该设置生效，我们采用了下列方法： 
</p><ul ><li class="Default"><p>用作太阳的单一定向光源。
</p></li><li class="Default"><p>区域光源提供柔和的光照来模拟光线透过窗户照射进来，光线不一定是阳光。
</p></li></ul><!--
before:param
after:param
position:paramliteral
-->
<div class="comparison_slider">
    <div class="first">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/DirectionalAndRectLights.jpg">
		<img class="  lazyload" alt="默认光照 | 定向和矩形光源 " width="1200" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/DirectionalAndRectLights.jpg" />
</picture>
</p>
        <div class="overlay-first "></div>
    </div>
    <div class="last">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/DirectionalOnly.jpg">
		<img class="  lazyload" alt="仅定向光源" width="1200" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/DirectionalOnly.jpg" />
</picture>
</p>
        <div class="overlay-last "></div>
    </div>
</div><h4 id="反射">反射</h4>
<p>整个室内场景中拥有许多不同粗糙度的反射面。其中一些模拟镜面表面、半高光表面或地板漆面磨损效果。如果没有使用光线追踪，则无法在场景中实现此类反射。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/ArchVisReflections.jpg">
		<img class="  lazyload" alt="ArchVisReflections.png" width="1200" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/ArchVisReflections.jpg" />
</picture>

</p><p>若无光线追踪功能，通常使用仅反映画面上显示物的有限画面空间效果，或使用以非动态方式采集房间图像的静态立方体贴图来产生反射。利用光线追踪反射，可查看各个表面反射的整个场景，并拥有创建内反射的多个反射（即反射中的反射）。 
</p><h5 id="反射优化">反射优化</h5>
<p>在该场景中设置反射时，务必在质量损失最小的情况下降低反射开销。你可以使用以下部分提供的建议和优化，在自己的项目中实现类似效果。
</p><h6 id="光泽和反射表面">光泽和反射表面</h6>
<p>优化光线追踪反射的第一步是考虑场景中材质的平滑度或粗糙度。了解此类信息可帮助更快决定优化场景中反射的方式。此操作可提供早期性能优势，而无需后期取得。 
</p><p>如果你的场景将使用大量高反射表面， 
</p><p>应考虑采用两种途径： 
</p><ul ><li class="Default"><p>控制材质等级的粗糙度/光泽度
执行该工作流，可通过指定到场景中对象的材质更好地进行控制。使用良好主材质可简化工作流，但必须在需要特定粗糙度的材质或材质实例中手动调整。 
</p></li><li class="Default"><p>后期处理中控制粗糙度/光泽度
通过将粗糙度限制为后期处理体积中 <strong>最大粗糙度（Max Roughness）</strong> 属性设置的指定阈值，该工作流可影响场景中的所有对象。
</p></li></ul><p>上述两种工作流不互斥，可轻松结合使用。本示例中拥有需要准确代表场景的大量反射面。这意味着应在该项目早期使用材质级粗糙度控制以获得最大灵活性。之后在优化场景时，若场景使用材质合理，能够便于在性能与质量间取得平衡。 
</p><h6 id="多次反射回弹和降噪">多次反射回弹和降噪</h6>
<p>在场景中（尤其是类似这样的建筑可视化场景），反射的准确性对于创建逼真的效果极为重要。然而，在反射内使用多次反射回弹会导致实时渲染的开销十分高昂。
</p><p>首先可在主材质中使用 <strong>RayTracingQualitySwitchReplace</strong> 表达式进行材质级的简单优化作为开始。该节点可以在材质中启用光线追踪功能的单独路径，以进行更简单的材质输出。本项目仅使用底色、金属感和粗糙度输入。创建用于光线追踪效果的这种更加简单的材质路径意味着可以节约部分成本，对质量的影响也最小。 
</p><p>若观察地板材质 <code>MI&#95;Floor</code> 在电视中的反射，可以发现它在材质实例中使用较低分辨率纹理mip，该材质实例由材质资产中 <strong>Mip偏差（Mip Bias）</strong> 控制。若不使用镜面材质或某些调试视图模式，则难以发现材质中的光线追踪反射进行了这种优化。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/FloorMipBias.jpg">
		<img class="  lazyload" alt="FloorMipBias.png" width="900" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/FloorMipBias.jpg" />
</picture>

</p><p>对于地板、墙壁、天花板等大表面，可使用这种优化获得部分帧时间。打开材质 <code>M&#95;RTMasterMaterial</code> 以查看使用 <strong>RayTracingQualitySwitchReplace</strong> 的图表的工作方式。 
</p><p>该对比中启用了视口的 <strong>反射（Reflections）</strong> 视图，可清晰查看关卡中表面的反射。这意味着使用所有mip级别（0）时，可在场景中使用全分辨率纹理。地板纹理为4k纹理。使用mip级别5时，纹理的显示分辨率为128。在该特殊场景中，此设置比全分辨率的效率更高，且质量损失最小。<br /></p><!--
before:param
after:param
position:paramliteral
-->
<div class="comparison_slider">
    <div class="first">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionMipBias_5.jpg">
		<img class="  lazyload" alt="Mip偏差：5 | 纹理分辨率：128" width="900" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionMipBias_5.jpg" />
</picture>
</p>
        <div class="overlay-first "></div>
    </div>
    <div class="last">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionMipBias_0.jpg">
		<img class="  lazyload" alt="Mip偏差：0 | 纹理分辨率：4096" width="900" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionMipBias_0.jpg" />
</picture>
</p>
        <div class="overlay-last "></div>
    </div>
</div><div class="tip">
	<p>若想要查看纹理可用的mip级别，打开纹理资产并在工具栏中启用 <strong>Mip级别（Mip Level）</strong> 复选框。然后使用加号、减号或滑块设置mip级别的预览。 </p>
</div><p>UE4的光线追踪可用的另一优化是退却选项，光线追踪反射可利用该选项以将<a id="content_link" href="../../../BuildingWorlds/LightingAndShadows/ReflectionEnvironment/index.html" ><span>反射采集</span></a>用作最后回弹。此设置适用于通过减少使用光线追踪反射回弹和限制表面上的黑色相互反射来降低开销。若项目涉及运行时性能，则多次反射反弹的开销为指数级增长，高得令人望而却步。 
</p><p>通过以下控制台命令启用反射捕获退却：
</p><pre class="prettyprint"><code>r.RayTracing.Reflections.ReflectionCaptures 1</code></pre>
<!--
before:param
after:param
position:paramliteral
-->
<div class="comparison_slider">
    <div class="first">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionCaptures0.jpg">
		<img class="  lazyload" alt="光线追踪反射 | 最大回弹：2 | 反射采集退却：Disabled " data-src="../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionCaptures0.jpg" />
</picture>
</p>
        <div class="overlay-first "></div>
    </div>
    <div class="last">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionCaptures1.jpg">
		<img class="  lazyload" alt="光线追踪反射 | 最大回弹：1 | 反射采集退却：Enabled" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionCaptures1.jpg" />
</picture>
</p>
        <div class="overlay-last "></div>
    </div>
</div><p>利用该组合可减少瑕疵，例如仅使用光线追踪反射时产生的黑色反光。如果将退却和2个回弹及与此类似且拥有大量相互反射的对象结合使用，可获得更好结果。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionCaptures3.jpg">
		<img class="  lazyload" alt="ReflectionCaptures3.png" width="700" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/ReflectionCaptures3.jpg" />
</picture>

</p><p>反射的此类优化和工作流还可减少使用多次反射回弹时在发射中生成的噪点程度。在场景中，尤其是有大量高度反射表面的区域，提高反射的 <strong>逐像素采样（Samples Per Pixel）</strong> 设置可减少噪点，但将牺牲性能。以下方法也可用于在反射中减少噪点：
</p><ul ><li class="Default"><p>使用RayTracingQualitySwitchReplace节点降低材质及其纹理的复杂性。通过计算材质输入来减少反射中的噪点，此类输入使用光线追踪材质路径而非完整材质路径。在光线追踪反射中，如法线和平滑表面之类的纹理易生成噪点。 
</p></li><li class="Default"><p>使用纹理取样的Mip偏差属性来控制纹理细节级别。与具有大量纹理细节的较高质量纹理相比，较低质量纹理产生噪点的几率更低。
</p></li></ul><h4 id="全局光照">全局光照</h4>
<p>利用光线追踪全局光照（RTGI），光线的动态回弹可利用光源照亮场景。该项目采用了多种光照方法和部分优化来提升性能。 
</p><h5 id="光照方法">光照方法</h5>
<p>虚幻引擎提供了两种光线追踪全局光照的方法，用于在场景中进行动态间接光照：
</p><ul ><li class="Default"><p><strong>强力（Brute Force）</strong> 使用较慢但更准确的方法。该方法需要多次回弹和增加采样数来减少瑕疵，并会牺牲性能提高质量。 
</p></li><li class="Default"><p><strong>最终收集（Final Gather）</strong> 使用较快但准确性较低的方法。该方法仅使用拥有大量逐像素采样的间接光照单次回弹。它可以将开销分摊到多个帧上，并恢复运行时性能。
</p></li></ul><div class="note">
	<p>在该项目中查看静止图像时，质量上并无明显差异。但两种方法在性能上有显著差异。 </p>
</div><p>样本中均以某种形式使用这两种方法。在编辑器中操作并实时渲染场景时，将使用最终聚集（Final Gather）法，并在关卡内的后期处理体积中默认设置该方法。使用<a id="content_link"filter-data="tag_sequencer" href="../../../AnimatingObjects/Sequencer/index.html" ><span>Sequencer</span></a>渲染出高质量电影时，将使用强力（Brute Force）法渲染场景。（参见下方的"过场动画"章节，了解更多信息。）
</p><h5 id="画面百分比和逐像素采样">画面百分比和逐像素采样</h5>
<p>提升场景中的性能和光照的方法之一就是调整RTGI的画面百分比（<code>r.RayTracing.GlobalIllumination.ScreenPercentage</code>）和用于逐像素采样的后期处理体积的光照追踪属性。 
</p><p>此方法背后的含义是当提高样本数减少瑕疵的同时，降低RTGI的画面百分比，并以最小质量损失增加场景中的光照一致性。但当此权衡不再有效时，将出现断点。例如，将RTGI画面百分比设为50并将逐像素采样设为16，该设置相当于RTGI画面百分比为100、逐像素采样为4。 
</p><!--
before:param
after:param
position:paramliteral
-->
<div class="comparison_slider">
    <div class="first">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/RTGIHigh.jpg">
		<img class="  lazyload" alt="RTGI方法：强力 | RTGI画面百分比：100 | RTGI逐像素采样：4 " data-src="../../../../Images/Resources/Showcases/ArchVisInterior/RTGIHigh.jpg" />
</picture>
</p>
        <div class="overlay-first "></div>
    </div>
    <div class="last">
        <p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/RTGILow.jpg">
		<img class="  lazyload" alt="RTGI方法：强力 | RTGI画面百分比：50 | RTGI逐像素采样：16" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/RTGILow.jpg" />
</picture>
</p>
        <div class="overlay-last "></div>
    </div>
</div><h5 id="使用全局光照优化光源">使用全局光照优化光源</h5>
<p>以下提供了一些建议，可以用于提高该项目中RTGI性能： 
</p><ul ><li class="Default"><p>各光源Actor应拥有可禁用其对RTGI的贡献的选项。光源造成额外GI噪点时，可利用该选项移除GI贡献中的该光源，以减少此类瑕疵并提高性能。使用 <strong>影响光线追踪全局光照（Affect Ray Tracing Global Illumination）</strong> 属性来切换光源GI贡献。
</p></li><li class="Default"><p>若光源的路径中拥有大型遮挡物，将便于在场景中生成更多噪点。
</p><ul ><li class="Default"><p>逐光源禁用其GI贡献。
</p></li><li class="Default"><p>调整光源半径或移动光源以免遮挡。
</p></li><li class="Default"><p>移除或调整此类光源前方造成较大遮挡的大型物体。
</p></li></ul></li><li class="Default"><p>使用RTGI和光线追踪环境光遮蔽（RTAO）
</p><ul ><li class="Default"><p>在项目中做出对最终渲染更有价值的决定。若正在使用RTGI，禁用后期处理体积中的RTAO，并将环境光遮蔽遮挡类别下的 <strong>强度（Intensity）</strong> 设为0。
</p></li></ul></li><li class="Default"><p>若场景中大量对象的几何体上有孔洞，光线追踪降噪器解算时更为困难。在某些情况下，使用 <strong>RayTracingQualitySwitchReplace</strong> 表达式（参见上述"反射"部分）可帮助减少噪点。
</p></li></ul><h2 id="其他优化、提示和技巧">其他优化、提示和技巧</h2>
<h4 id="raytracingqualityswitchreplace表达式与材质mip偏差">RayTracingQualitySwitchReplace表达式与材质Mip偏差</h4>
<p>各个 <strong>纹理取样（Texture Sample）</strong> 表达式都有自己的 <strong>Mip偏差（Mip Bias）</strong> 输入。此操作将利用简单浮点值，以控制正在使用的纹理使用哪个mip。mip是纹理的给定细节级别；mip值越低，质量越高；值越高，质量越低。与 <strong>RayTracingQualitySwitchReplace</strong> 节点配合使用时，利用Mip偏差属性可指定在光线追踪效果中使用的最大质量mip等级。 
</p><p>此操作有助于减少mip质量花费的GPU时间（极短不易察觉）。例如，在材质 <code>M&#95;RTMasterMaterial</code> 中，将反射率 <strong>Mip偏差（Mip Bias）</strong> 的参数设为-1。由于此材质仅用于地板、天花板和墙壁，因此此类材质实例使用较高Mip偏差，质量损失最小。地板使用为5的Mip偏差。 
</p><div class="tip">
	<p>这种技巧并不适用于所有材质或表面，但在优化项目时，最好尽量恢复性能。同时也可能会减少部分反射中可见噪点量，尤其是在类似镜面的物体上时。 </p>
</div><h4 id="常量颜色值与纹理">常量颜色值与纹理</h4>
<p>建议在创建主材质时包含 <strong>Vector4</strong> 表达式，以适应需要简单颜色而非使用纹理的情况。根据纹理及其大小，若为不必要纹理，特别是在无需纹理便可获得相同的外观的情况下，将大量消耗GPU资源。此操作还有额外益处，即无需增加项目负担便可轻松维护。因此，如果以后需要调整此特殊材质，在材质实例中作为参数进行此类修改比管理纹理资产更加容易。
</p><h2 id="过场动画渲染的sequencer和后期处理使用">过场动画渲染的Sequencer和后期处理使用</h2>
<p>本示例提供多种利用光线追踪查看内容的方法。根据具体用例，可以使用各种设置来平衡质量和性能。我们找到了三个使用案例，并在该项目中展示，分别是：<br /></p><ul ><li class="Default"><p>使用最终渲染的功能和质量代表在编辑器内工作，同时维持实时帧数。 
</p></li><li class="Default"><p>在编辑器中实时运行Sequencer中的过场动画，牺牲最少质量换取稳定性能。
</p></li><li class="Default"><p>以非实时设置渲染出Sequencer中的过场动画。
</p></li></ul><p>在编辑器中工作或运行编辑器内过场动画或非实时过场动画时，将在后台更改部分设置以平衡所处模式的质量和性能。 
</p><div class="warning">
	<p>在下列不同模式之间切换时，使用控制台变量进行设置，以利用光线追踪全局光照和光线追踪反射在质量和性能之间控制平衡。注意：将下列控制台变量设为-1以外的值时，其将覆盖后期处理体积（Post Process Volume）设置中设定的值。例如，若将命令 <code>r.RayTracing.GlobalIllumination</code> 设为2，在重新将控制台变量值设回-1前，将忽略后期处理体积设置 <strong>光线追踪全局照明类型（Ray Tracing Global Illumination Type）</strong> 选定方法。</p>
</div><h3 id="编辑器内设置">编辑器内设置</h3>
<p>编辑器内设置代表加载项目时及在场景中工作时使用的设置。此类值为编辑器主要使用的默认值，或关卡中后期处理体积中设置的值。它们代表使用实时光线追踪功能时质量与性能之间的良好平衡。 
</p><div class="simpletable">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>设置 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>值 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>注释 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.GlobalIllumination</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>2</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此设置将设置最终聚集GI法。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracingGlobalIllumination.ScreenPercentage</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>未设置（默认值：50）</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.GlobalIllumination.SamplesPerPixel</strong></p>
			</td>
	
	<td rowspan="1" colspan="2" align="">
			<p>16</p>
			</td>
	
	<td rowspan="1" >
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.GlobalIllumination.RenderTileSize</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>未设置（默认值：0）</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.Reflections.MaxRoughness</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>未设置（默认值：0.6）</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.Reflections.SamplesPerPixel</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>未设置（默认值：1）</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.Reflections.Shadows</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>2</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此值设置反射以使用区域阴影。</p>
			</td>
	
</tr></tbody>
</table>
</div><p>在后期处理体积中，可找到部分此类设置，例如逐像素RTGI采样（RTGI Samples Per Pixel）、反射最大粗糙度（Reflections Max Roughness）和反射阴影类型（Reflections Shadows type）。
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/InEditorPPVSettings.jpg">
		<img class="  lazyload" alt="InEditorPPVSettings.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/InEditorPPVSettings.jpg" />
</picture>

</p><h3 id="运行时过场动画sequencer设置">运行时过场动画Sequencer设置</h3>
<p>使用Sequencer运行运行时过场动画，将改变下方列出的属性值。使用的值代表此场景和过场动画中所用不同镜头间的良好平衡。 
</p><div class="simpletable">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>设置 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>值 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>注释 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.GlobalIllumination</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>2</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此设置将设置最终聚集GI法。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracingGlobalIllumination.ScreenPercentage</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>100</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>将RTGI画面百分比设为100%。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.GlobalIllumination.SamplesPerPixel</strong></p>
			</td>
	
	<td rowspan="1" colspan="2" align="">
			<p>4</p>
			</td>
	
	<td rowspan="1" >
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.GlobalIllumination.RenderTileSize</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>未设置（默认值：0）</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.Reflections.MaxRoughness</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>0.4</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>设置最大粗糙度以增加反射阈值，从而在增加运行时性能时减少反射量。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.Reflections.SamplesPerPixel</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>2</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>设置逐像素采样以减少样本使用。此设置将在增加运行时性能时减少反射样本数。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.Reflections.Shadows</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>未设置（默认值：1）</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此值设置反射以使用硬阴影。</p>
			</td>
	
</tr></tbody>
</table>
</div><p>我们对此类设置进行了部分变更，以提高编辑器内过场动画的质量。以下为变更项目和变更理由的说明： 
</p><ul ><li class="Default"><p>增加了RTGI屏幕百分比，同时降低逐像素RTGI采样。如上一部分所述，将编辑器内设置的RTGI屏幕百分比设为50，逐像素采样设为16时，则与此变更相同。不同之处在于，在运行时成本大致相同时可以略微提升质量。 
</p></li><li class="Default"><p>更改了反射最大粗糙度阈值，以减少场景中反射数。此操作可将帧率保持在每秒24帧（FPS）的预算之内。由于略微减少了反射数，因此反射无需过多逐像素采样。因此对于运行时过场动画，此设置已从4 spp减半到2 spp，进行这类变更时即可再次获得性能平衡。
</p></li></ul><h4 id="启动运行时过场动画">启动运行时过场动画</h4>
<ol ><li class="Default"><p>在主工具栏中，选择 <strong>过场动画（Cinematics）</strong> 并选中 <strong>archviz_cine_MASTER</strong> 轨道。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Seq_Cine_Master.jpg">
		<img class="  lazyload" alt="Seq_Cine_Master.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Seq_Cine_Master.jpg" />
</picture>

</p></li><li class="Default"><p>将打开Sequencer窗口。在左侧 <strong>镜头（Shots）</strong> 轨道旁，点击 <strong>摄像机（Camera）</strong> 图标。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Sequencer_Master.jpg">
		<img class="  lazyload" alt="Sequencer_Master.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Sequencer_Master.jpg" />
</picture>

</p><p>对于运行时过场动画，此操作可将视口锁定到摄像机。 
</p></li><li class="Default"><p>在 <strong>关卡视口</strong> 的主工具栏中，点击 <strong>运行（Play）</strong> 按钮以在编辑器中运行。
</p></li><li class="Default"><p>在 <strong>Sequencer</strong> 窗口中，点击 <strong>运行（Play）</strong> 按钮以在关卡视口中启动过场动画。
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Sequencer_Master_Play.jpg">
		<img class="  lazyload" alt="Sequencer_Master_Play.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Sequencer_Master_Play.jpg" />
</picture>

</p></li></ol><h3 id="非运行时过场动画sequencer设置">非运行时过场动画Sequencer设置</h3>
<p>运行过场动画Sequencer会将值更改为不适合实时的值。此处的值适用于渲染动画过场的燃尽效果，根据使用的显卡和设置，可能需要几个小时或更长时间进行渲染。 
</p><p>在使用了NVIDIA Quadro RTX 8000的Epic开发者配置的计算机上，此类设置渲染过场动画大约需要8小时。<br /></p><div class="simpletable">
	<table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>设置 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>值 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>注释 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.GlobalIllumination</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>1</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此设置将设置强力GI法。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracingGlobalIllumination.ScreenPercentage</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>100</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>将RTGI画面百分比设为100%。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.GlobalIllumination.SamplesPerPixel</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>16</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>使用RTGI逐像素16采样，牺牲性能以提高质量。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.GlobalIllumination.RenderTileSize</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>64</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>设置提交到GPU的像素图块大小。对于高质量渲染，它无需触发超时检测即可防止驱动程序崩溃。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.Reflections.MaxRoughness</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>0.8</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>设置最大粗糙度以减少反射阈值，从而在降低运行时性能时增加反射量。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.Reflections.SamplesPerPixel</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>4</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>设置逐像素采样以增加样本使用。此设置将在降低运行时性能时增加反射中的样本数。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><strong>r.RayTracing.Reflections.Shadows</strong></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>未设置（默认值：1）</p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>此值设置反射以使用区域阴影。</p>
			</td>
	
</tr></tbody>
</table>
</div><div class="warning">
	<p>运行编辑器内Sequencer可能会锁定UE4编辑器。此类设置本应利用Sequencer的 <strong>渲染电影设置（Render Movie Settings）</strong> 渲染视频。（参见下一章节。）</p>
</div><h4 id="将过场动画序列渲染为影片">将过场动画序列渲染为影片</h4>
<ol ><li class="Default"><p>在关卡视口的主工具栏中，选择 <strong>过场动画（Cinematics）</strong> 下拉菜单并选中 <strong>archviz_cine_MASTER_MaxQuality</strong> 轨道。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Seq_Cine_MaxQuality.jpg">
		<img class="  lazyload" alt="Seq_Cine_MaxQuality.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Seq_Cine_MaxQuality.jpg" />
</picture>

</p></li><li class="Default"><p>将打开Sequencer过场动画窗口。在工具栏中，选择 <strong>楔形板（Clap Board）</strong> 图标以打开 <strong>渲染影片设置（Render Movie Settings）</strong> 窗口。<br /></p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Sequencer_MaxQuality.jpg">
		<img class="  lazyload" alt="Sequencer_MaxQuality.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Sequencer_MaxQuality.jpg" />
</picture>

</p><p>该窗口包括渲染该Sequencer过场动画的所有设置。
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/RenderMovieSettings.jpg">
		<img class="  lazyload" alt="RenderMovieSettings.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/RenderMovieSettings.jpg" />
</picture>

</p></li><li class="Default"><p>在下拉菜单中选择要使用的 <strong>图像输出格式（Image Output Format）</strong>。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/CapMovieImageOutput.jpg">
		<img class="  lazyload" alt="CapMovieImageOutput.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/CapMovieImageOutput.jpg" />
</picture>

</p><p>对于视频，我们使用了 <strong>图像序列（bmp）（Image Sequence (bmp)）</strong> 和专业视频软件将其编译到渲染出的最终视频中。 
</p></li><li class="Default"><p>还有许多其他选项可用于渲染视频。例如，选择渲染所用的 <strong>分辨率</strong> 和保存此类图像的目录等。 
</p></li><li class="Default"><p>准备就绪后，点击底部的 <strong>捕获视频（Capture Movie）</strong> 按钮。将打开预览窗口。
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/CaptureMoviePreview.jpg">
		<img class="  lazyload" alt="CaptureMoviePreview.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/CaptureMoviePreview.jpg" />
</picture>

</p></li></ol><div class="tip">
	<p>在渲染视频/图像过场动画时，使用控制台命令 <code>r.ScreenPercentage</code> 将画面百分比设为较高值（如150），以此牺牲时间提升质量。本页面顶部的动画便利用此方法渲染而成。图像序列的分辨率设为1920x1080，然后随着屏幕百分比变化进行超级采样。 </p>
</div><h4 id="控制sequencer中的值">控制Sequencer中的值</h4>
<ol ><li class="Default"><ol ><li class="Default"><p>在主工具栏的关卡视口中，选择 <strong>过场动画（Cinematics）</strong> 下拉菜单，并在 <strong>编辑现有过场动画（Edit Existing Cinematic）</strong> 列表中选择序列。
</p></li></ol><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/ControllingSeq1.jpg">
		<img class="  lazyload" alt="ControllingSeq1.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/ControllingSeq1.jpg" />
</picture>

</p></li><li class="Default"><p>将打开选定Sequencer过场动画窗口。在工具栏中，选择 <strong>扳手（wrench）</strong> 下拉菜单并选择 <strong>打开导演蓝图（Open Director Blueprint）</strong>。 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/Seq_OpenDirector.jpg">
		<img class="  lazyload" alt="Seq_OpenDirector.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/Seq_OpenDirector.jpg" />
</picture>

</p></li></ol><p>在该SequenceDirector蓝图中，可找到以下内容： 
</p><p><picture>
		<source data-srcset="./../../../../Images/Resources/Showcases/ArchVisInterior/SequencerDirector.jpg">
		<img class="  lazyload" alt="SequencerDirector.png" data-src="../../../../Images/Resources/Showcases/ArchVisInterior/SequencerDirector.jpg" />
</picture>

</p><ol ><li class="Default"><p>其中包含用于设置和重置该序列的RTGI设置的选项卡。 
</p></li><li class="Default"><p><strong>变量（Variables）</strong> 类别包含具有控制台变量的数组变量，及之前在"运行时过场动画Sequencer设置"和"非运行时过场动画Sequencer设置"部分中概述的值。
</p></li><li class="Default"><p>选择数组变量后，其数组元素和值将显示在 <strong>默认值（Default Value）</strong> 类别下。例如，若在选中 <strong>RTGI_CVars_On</strong> 变量时查看Sequencer过场动画"archviz_cine_MASTER"，该处的值将与本页"运行时过场动画Sequencer设置"部分中表格所列出的值匹配。
</p></li></ol><h2 id="致谢">致谢</h2>
<p>感谢<a id="content_link" href="https://www.sciontidesign.com/" ><span>www.sciontidesign.com</span></a>的Pasquale Scionti主导本场景的设计工作，并营造其情境和氛围。自从最早版本发布以来，Pasquale一直是虚幻引擎及光线追踪实现的忠实用户，同时也为引擎开发提供了大量帮助。你可以在<a id="content_link" href="https://www.sciontidesign.com/unrealarchviz" ><span>他的网站专区</span></a>浏览他使用虚幻引擎打造的更多作品。
</p>
																	</div>
					<!-- End of Markdown converted page content -->
				</div>
												<div id="pageTags">
				<div class="title">标签</div>
					<div>
					<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=showcases">showcases</a></div>
					</div>
				</div>
								<div id="recommendations"></div>			</div>
						  									<div id="announcement">
			<div style="display:inline-block;margin:5px;">
				欢迎帮助改进虚幻引擎文档！请告诉我们该如何更好地为您服务。
			</div>
			<div style="margin:5px;display:inline-block;">
				<div class="btn action" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();window.open('https://epicgames.questionpro.com/t/AP9dGZkjp4');createCookie('announcement-read', new Date().getTime(), 30);">填写问卷调查</div>
				<div class="btn btn-default" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();createCookie('announcement-read', new Date().getTime(), 30);">取消</div>
			</div>
			<div class="btn-close" style="position:absolute;right:5px;top:10px;padding:3px;width:14px;height:14px;" onclick="$('#announcement').hide();"></div>
			</div>
					</div>
	</div></body>

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/Resources/Showcases/ArchVisInterior/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 10:58:45 GMT -->
</html>
