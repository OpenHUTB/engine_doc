<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProductionPipelines/DerivedDataCache/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 10:31:57 GMT -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="../../../Include/Javascript/common_zh-CN.js" type="text/javascript"></script>
	<script type="text/javascript">
		var time = new Date(0);
		var preview = false;
		var relativeHTMLPath = "https://docs.unrealengine.com/4.26/";
				var pageid = 0;
				var heroimage = "";
				var lang = "zh-CN";
				var basePath = document.location.pathname.substring(0, document.location.pathname.indexOf('/' + lang + '/') + lang.length + 1);
		document.write('<base href="' +  encodeURI(basePath) + '/ProductionPipelines/DerivedDataCache/" />');
				var udnCSS = '../../../Include/CSS/udn_public.css';
		var udnLangCSS = '';
				udnLangCSS = './../../../Include/CSS/udn_public_CN.css">';
				var udnOverrideCSS = '../../../Include/CSS/skin_overrides.css';
		var udnOverrideDarkCSS = '../../../Include/CSS/skin_overrides_dark.css';
		var fancyboxCSS = '../../../Include/CSS/jquery.fancybox.css';
		var jqueryuiCSS = '../../../Include/CSS/jquery-ui.min.css';
		var qtipCSS = '../../../Include/CSS/jquery.qtip.css';
		var prettifyCSS = '../../../Include/CSS/prettify.css';
		var navbarCSS = '../../../Include/CSS/navBar.css';
		var twentytwentyCSS = '../../../Include/CSS/twentytwenty.css';
		var recommendationsCSS = '../../../Include/CSS/jquery.recommendations.css';
	</script>
    <title>派生数据缓存 | 虚幻引擎文档</title>
    	    <meta name=viewport content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-control" content="no-store">
    <script  src="../../../Include/Javascript/CustomEvent.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/udn.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/udn_extras.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/jquery-ui.min.js" type="text/javascript"></script>
	    <script  src="../../../Include/Javascript/informational.js" type="text/javascript"></script>
	    <script  src="../../../Include/Javascript/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/jquery.qtip.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/prettify.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/jquery.slimscroll.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/jquery.event.move.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/jquery.twentytwenty.js" type="text/javascript"></script>
    <script  src="../../../Include/Javascript/lazysizes.min.js" type="text/javascript"></script>
	    <script  src="../../../Include/Javascript/jquery.recommendations.js" type="text/javascript"></script>
	
    <link async rel="icon" href="../../../../favicon.png" type="image/x-icon" />
    <link async rel="shortcut icon" href="../../../../favicon.png" type="image/x-icon" />
    <link async href="../../../Include/Images/touch_icon.png" rel="apple-touch-icon" />
    <link async href="../../../Include/Images/touch_icon_114.png" sizes="114x114" rel="apple-touch-icon" />    
		<script  src="../../../Include/Javascript/CollapsibleLists.js" type="text/javascript"></script>
	<script  src="../../../Include/Javascript/navigationBarUI.js"></script>
	<script  src="../../../Include/Javascript/navigationBar.js"></script>
		
	<link rel="alternate" href="https://docs.unrealengine.com/latest/en-US/ProductionPipelines/DerivedDataCache/" hreflang="x-default" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/zh-CN/ProductionPipelines/DerivedDataCache/" hreflang="zh-CN" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ja/ProductionPipelines/DerivedDataCache/" hreflang="ja" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ko/ProductionPipelines/DerivedDataCache/" hreflang="ko" />

	<meta name="redirect" content="Engine/Basics/DerivedDataCache" />
<meta name="intsourcechangelist" content="16839942" />
<meta name="availability" content="Public" />
<meta name="title" content="派生数据缓存" />
<meta name="description" content="概述UE4采用的派生数据缓存和资产保存格式以及目标平台。" />
<meta name="version" content="4.25" />
<meta name="parent" content="ProductionPipelines" />
<meta name="skilllevel" content="Advanced" />
<meta name="type" content="overview" />
<meta name="order" content="8" />
<meta name="keywords" content="Programming" />
<meta name="crumbs" content="%ROOT%,ProductionPipelines" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta property="og:title" content="派生数据缓存" />
	<meta property="og:description" content="概述UE4采用的派生数据缓存和资产保存格式以及目标平台。" />
		<meta property="og:image" content="" />
	</head>
<body id="webbgThree" style="visibility: hidden;" onload="document.body.style.visibility='visible';">
			<script>window.__tracking_base = 'https://tracking.unrealengine.com/';</script>
	<script src="../../../../../tracking.unrealengine.com/tracking.js" async></script>    <div id="webThree">
				<div id="page_head">

			<edc-navigation blackListLangCodes='["de-de","es-es","es-mx","fr-fr","it-it","pt-br","ru-ru","pl-pl","tr-tr"]' locale="zh-CN" ></edc-navigation>
						<div id="pagenav">
				<div class="crumbs" id="crumbs">

	<span class="separator">></span> <a id="parent_link" href="../index.html">建立你的开发流程</a>

<span class="separator">></span> <span id="page">派生数据缓存</span>
</div>				<div id="pageNavRight">
								<!-- Start of Search -->
												<div id="search_container">
					<form name="bodySearch" method="get" action="https://www.unrealengine.com/zh-CN/bing-search" onsubmit="return validateSearch()">
						<input type="image" src="../../../Include/Images/search_box_icon.png" class="searchbutton"/>
						<input type="hidden" name="filter" value="文档" />
						<input type="text" name="keyword" placeholder="搜索文档……" class="searchbox" autocomplete="off"/>
					</form>
				</div>
								<!-- End of Search -->
				<div id="skinContainer">
	<div id="skinSelect" class="btn btn-skin" onclick="ToggleMenu($('#skinMenu'), $(this));"></div>
	<div id="skinMenu">
		<div id="light" class="btn btn-select" onclick="createCookie('skin', 'light', 365);location.reload();">Light Theme</div>
		<div id="dark" class="btn btn-select" onclick="createCookie('skin', 'dark', 365);location.reload();">Dark Theme</div>
	</div>
</div>				</div>
			</div>
		</div>						<div id="navWrapper">
			<div id="nav-filter-container">
				<div id="nav-filter-inner">
					<form>
						<input type="text" placeholder="Filter pages..." id="nav-filter" onchange="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, this.value);if(this.value.length == 0){$('#filter-clear').hide();}else{$('#filter-clear').show();}" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
						<button class="close-icon" id="filter-clear" type="reset" onclick="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, '');$(this).hide();"></button>
					</form>
				</div>
			</div>
			 <nav id="navPanel">
				<div class="contents-table-el"><!----><!----><!----><!----><a class="contents-table-link is-parent" href="/zh-CN/Basics/index.html">理解基础概念</a><!----></div>
				<div class="contents-table-el"><a class="contents-table-link is-parent" href="/zh-CN/WorkingWithContent/index.html">管理内容</a><!----></div>
				<div class="contents-table-el"><a class="contents-table-link is-parent" href="/zh-CN/BuildingWorlds/index.html">构建虚拟世界</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/RenderingAndGraphics/index.html">设计视觉、渲染和图形效果</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/ProgrammingAndScripting/index.html">编程和脚本编写</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/InteractiveExperiences/index.html">创建交互体验</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/AnimatingObjects/index.html">为角色和对象添加动画</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/WorkingWithMedia/index.html">使用媒体</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/ProductionPipelines/index.html">建立你的开发流程</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/TestingAndOptimization/index.html">测试并优化你的内容</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/SharingAndReleasing/index.html">项目分享及发布</a><!----></div>
				<div class="contents-table-el"> <a class="contents-table-link is-parent" href="/zh-CN/Resources/index.html">示例与教学</a><!----></div>
				<div class="contents-table-el"><a class="contents-table-link is-parent" href="/zh-CN/WhatsNew/index.html">新内容</a></div>
			</nav>
			<div id="navigation" title="Click to toggle navigation menu"><span>></span></div>
		</div>		
		<div id="splitter">
		</div>
				<div id="contentContainer">
										<div id="pagedefault">
				<div id="product-banner">
	<div id="product-logo"></div>
</div>				<div id="pagecontainer" style="padding-right:0px;">
					<!-- Start of Markdown converted page content -->
																				<div class="hero  ">
						<div class="imgContainer"><img src="#" /></div>						<div class="info">
							<div id="pageTitle">
								<h1 id="H1TitleId">派生数据缓存</h1>
							</div>	
							<h2 >概述UE4采用的派生数据缓存和资产保存格式以及目标平台。</h2>
							<div id="access">
								<div class="accessContainer">
																		<div class="skill_tag_filter Advanced"><a id="skill_link" href="../../SiteIndex/index.html?skills=Advanced">Advanced</a></div>
																	</div>
							</div>
						</div>
					</div>
																				<div id="maincol">
						<div class="togglesection" id="osContainer">
	<div class="normaltitle">
		<p>Choose your operating system:</p>
	</div><div class="toggleButtons">
		<div class="btn btn-default btn-toggle OS windows" id="windows" onclick="setSelector('OS', 'windows');">
			<p>Windows</p>
		</div>
		<div class="btn btn-default btn-toggle OS mac" id="mac" onclick="setSelector('OS', 'mac');">
			<p>macOS</p>
		</div>
		<div class="btn btn-default btn-toggle OS linux" id="linux" onclick="setSelector('OS', 'linux');">
			<p>Linux</p>
		</div>
	</div>
</div>																																				<div class="toc">
<div style="position:relative;">
    <div class="title">
    本页面的内容
    </div>
<div id="tocScroll">
    <ul>
	    		    			    <li id="">
	<p><a id="toc_link" href="#ddc的存储位置">DDC的存储位置</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#ddc类型">DDC类型</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#ddcpak">DDC Pak</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#共享ddc">共享DDC</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#使用共享ddc">使用共享DDC</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#设置共享ddc">设置共享DDC</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#禁用共享ddc">禁用共享DDC</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#构建派生数据">构建派生数据</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#挂载你的ddc文件夹">挂载你的DDC文件夹</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#使用ddc进行发布">使用DDC进行发布</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#ddc设置">DDC设置</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#ddc设置保存在哪里?">DDC设置保存在哪里?</a></p>
	</li>					</ul>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#常见问题">常见问题</a></p>
			<ul>
							<li id="">
	<p><a id="toc_link" href="#问：我是否可以有多项ddc设置？">问：我是否可以有多项DDC设置？</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#问：我的磁盘空间不足。我是否可以将本地ddc移到其他位置？">问：我的磁盘空间不足。我是否可以将本地DDC移到其他位置？</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#问：我的网络连接速度很慢。我是否可以关闭共享ddc？">问：我的网络连接速度很慢。我是否可以关闭共享DDC？</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#问：我是否可以更改共享ddc路径？">问：我是否可以更改共享DDC路径？</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#问：我如何诊断ddc问题？">问：我如何诊断DDC问题？</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#问：什么是s3ddc？">问：什么是S3 DDC？</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#问：什么是iddcutilsmoduleinterface？">问：什么是IDDCUtilsModuleInterface？</a></p>
	</li>							<li id="">
	<p><a id="toc_link" href="#问：我如何创建ddcpak？">问：我如何创建DDC Pak？</a></p>
	</li>					</ul>
	</li>		    	        </ul>
</div>
</div>
</div>
<p><strong>DDC</strong> 是 <strong>派生数据缓存</strong> 的缩写。
</p><p>许多 <strong>虚幻引擎</strong> 资产都需要额外的"派生数据"才能使用（比如包含着色器的材质就是一个简单示例）。材质在渲染之前，必须为运行编辑器的平台编译着色器。 
</p><p>由于派生数据很大，并且有时可能需要重新生成，因此不会将其检入源代码控制，而是保留在派生数据缓存 (DDC) 中。
</p><h2 id="ddc的存储位置">DDC的存储位置</h2>
<p>根据项目和系统的配置方式，可以存在多个DDC缓存（按照快慢顺序）。在评估派生数据时，你的系统将执行以下操作来确定访问速度：
</p><ol ><li class="Default"><p>当需要某条派生数据时，将首先检查最快的缓存，然后检查速度次之的缓存，依此类推，直到找到数据为止。
</p></li><li class="Default"><p>找到数据后，会将其复制到最快的本地缓存中，以便下次更快地访问。 
</p></li><li class="Default"><p>如果未找到数据，则将首先生成数据，然后将其异步复制到缓存中，以便供你（甚至可能是你的团队）将来使用。
</p></li></ol><p>存储在DDC中的内容允许使用后即丢弃，因为它可以随时使用保存在.uasset文件中的数据重新生成。通过将这些派生格式存储在外部，我们可以轻松地添加或更改引擎使用的格式，而不需要修改源资产文件。
</p><h2 id="ddc类型">DDC类型</h2>
<p>通常，你将至少拥有以下两个缓存：
</p><ol ><li class="Default"><p><strong>启动DDC：</strong> 加载到内存中以便提升启动时间的启动文件。
</p><ol ><li class="Default"><p>例如：<strong>ProjectDir/DerivedDataCache/Boot.ddc</strong>
</p></li></ol></li><li class="Default"><p><strong>本地DDC：</strong> 项目的派生数据。
</p><ol ><li class="Default"><p>例如：<strong>EngineDir/DerivedDataCache</strong>
</p></li></ol></li></ol><p>但是，你的项目也可以设置为使用 <strong>DDC Pak</strong> 或 <strong>共享DDC</strong>。
</p><h3 id="ddcpak">DDC Pak</h3>
<p>如果你从Epic Games商店下载虚幻引擎，则该引擎将附带DDC Pak (.ddp)。DDC Pak包含所有引擎内容的派生数据，因此你无需编译着色器等就可以开始工作。同样，出于相同原因，一些示例也随DDC Pak一起提供。
</p><ol ><li class="Default"><p>引擎DDC Pak
</p><ol ><li class="Default"><p>例如：<strong>EngineDir/DerivedDataCache/Compressed.ddp</strong>
</p></li></ol></li><li class="Default"><p>项目DDC Pak
</p><ol ><li class="Default"><p>例如：<strong>ProjectDir/DerivedDataCache/Compressed.ddp</strong>
</p></li></ol></li></ol><h3 id="共享ddc">共享DDC</h3>
<p>对于在同一地点的团队，我们强烈建议他们设置共享DDC。这是所有团队成员和构建计算机均可读取/写入的网络驱动器。这会避免整个团队因为创建所需DDC数据而产生的成本。例如，当美术师编辑着色器时，DDC数据将直接写入DDC共享。
</p><ul ><li class="Default"><p>共享DDC：网络驱动器或映射驱动器。
</p></li></ul><p>共享驱动器的示例将为：<strong>\epicgames.net\root\DDC-Global-Fortnite</strong>
</p><h2 id="使用共享ddc">使用共享DDC</h2>
<p>工作室应该使用一个所有特定位置的用户都可以访问的共享DDC。这样，只有一个用户需要构建派生的资产格式，然后这些格式将自动供所有其他用户使用。虽然需要处理资产时偶尔会出现卡顿，但是结果将被保存和共享。即使在相当小的团队中，以这种方式共享资产处理工作也会大大地减少处理时间。
</p><div class="warning">
	<p>不建议通过互联网复制整个DDC、备份DDC或从备份还原DDC。虽然上述操作不会造成任何损害，但它们会浪费时间，因为传输存储在DDC中的数据量要比在本地从头生成数据花费更长的时间。如果你有一个大型项目，并希望分发预构建DDC数据，你应该生成DDC Pak。</p>
</div><h3 id="设置共享ddc">设置共享DDC</h3>
<p>如你在 <code>BaseEngine.ini</code> 中看到的那样，编辑器已设置为使用共享DDC，该共享DDC可以通过三种方式启用。
</p><p>下文按照最优到最次的顺序列出了推荐方式。
</p><ol ><li class="Default"><p>在DefaultEngine.ini中覆盖你的项目设置（如下图所示），该覆盖项会将路径设置为团队的有效位置。
</p><p><code>&#91;DerivedDataBackendGraph&#93; Shared=(Type=FileSystem, ReadOnly=false, Clean=false, Flush=false, DeleteUnused=true, UnusedFileAge=10, FoldersToClean=10, MaxFileChecksPerSec=1, ConsiderSlowAt=70, PromptIfMissing=false, Path=\YourCompanyServer\DDC, EnvPathOverride=UE-SharedDataCachePath, EditorOverrideSetting=SharedDerivedDataCache) </code>
</p></li><li class="Default"><p>将 <code>UE-SharedDataCachePath</code>（在Mac/Linux上为 <code>UE&#95;SharedDataCachePath</code>）的环境变量（如下图所示）设置为要使用的文件夹。
</p></li><li class="Default"><p>在编辑器中，设置 <code>SharedDerivedDataCache</code> 变量。
</p></li></ol><div class="lightbox">
	<p><span class="non-localized"><a id="content_link" href="../../../Images/ProductionPipelines/DerivedDataCache/DDC_SharedDerivedDataCache.png" title="DDC共享派生数据缓存"><span><picture>
		<source data-srcset="./../../../Images/ProductionPipelines/DerivedDataCache/DDC_SharedDerivedDataCache.jpg">
		<img class="  lazyload" alt="DDC_SharedDerivedDataCache" title="DDC共享派生数据缓存" width="500" data-src="../../../Images/ProductionPipelines/DerivedDataCache/DDC_SharedDerivedDataCache.jpg" />
</picture>
</span></a></span></p>
</div><div class="caption">
	<p>点击查看大图。</p>
</div><p>你无需对 <strong>\YourCompanyServer\DDC;</strong> 进行任何特殊操作；**只要可写入，引擎就会创建所需的结构。
</p><h3 id="禁用共享ddc">禁用共享DDC</h3>
<p>当开发人员远程处理项目时，并且该项目已配置了共享DDC时，开发人员可能会遇到性能不佳的情况，这是因为访问DDC数据比生成DDC数据花费的时间更长。要暂时禁用共享DCC，请使用以下方法之一：
</p><ul ><li class="Default"><p>在命令行上传递-ddc=noshared。
</p></li><li class="Default"><p>将环境变量设置为本地硬盘驱动器：
</p><ul ><li class="Default"><p><code>UE-SharedDataCachePath=None</code>
</p></li><li class="Default"><p>在Mac上：<code>UE&#95;SharedDataCachePath=None</code>
</p></li></ul></li></ul><h3 id="构建派生数据">构建派生数据</h3>
<p>导入资产的用户是构建派生数据的用户，因为他们最有可能在引擎中使用和测试该资产。但是，有时也可能会出现新资产需要处理的情况。这种情况会根据需要自动出现，而且在涉及高性能硬件时应当影响不会太大，尽管可能会出现偶尔的卡顿。
</p><p>你可以通过运行以下命令随时填充你的DDC：
</p><pre class="prettyprint"><code>UE4\Engine\Binaries\Win64\UE4Editor.exe ProjectName -run=DerivedDataCache -fill</code></pre>
<div class="tip">
	<p>虽然Epic Games每夜都会执行此操作，以确保DDC始终处于就绪状态，但这项工作并非必不可少，因为常规的自动缓存功能应当已能满足需要。</p>
</div><h2 id="挂载你的ddc文件夹">挂载你的DDC文件夹</h2>
<p>如果是内部网络上使用的DDC，必须将包含DDC的文件夹挂载到网络驱动器上。如果你不熟悉此操作，请参阅<a id="content_link" href="https://support.microsoft.com/en-us/help/4026635/windows-map-a-network-drive" ><span>在Windows上映射网络驱动器</span></a>。
</p><h2 id="使用ddc进行发布">使用DDC进行发布</h2>
<p>烘焙是打包游戏的首选方法，因为烘焙后的版本不需要或不使用DDC。但是如有需要，可以将DDC打包发布。
</p><p>烘焙是打包游戏的首选方法，因为烘焙后的版本不需要或不使用DDC。但是如有需要，可以将DDC打包发布。
</p><p><strong>若要将DDC打包，请执行以下操作：</strong>
</p><ol ><li class="Default"><p>从UE4/Engine/Binaries/Win64目录运行UE4Editor.exe，传递如下所示的参数：
</p><p><code>UE4Editor.exe ProjectName -run=DerivedDataCache -fill -DDC=CreatePak</code>
</p></li><li class="Default"><p>这会在UE4\ProjectName\DerivedDataCache目录中创建DDC.ddp文件。
</p></li><li class="Default"><p>引擎将自动检测和使用.ddp文件。
</p></li></ol><h2 id="ddc设置">DDC设置</h2>
<h3 id="ddc设置保存在哪里?">DDC设置保存在哪里?</h3>
<p>DDC设置保存在 <code>&#91;DerivedDataBackendGraph&#93;</code> 分段的 <code>DefaultEngine.ini</code> 中。你可以在 <code>BaseEngine.ini.</code> 中查看默认值。
</p><pre class="prettyprint"><code>&#91;DerivedDataBackendGraph&#93;
;保留文件至少7天
MinimumDaysToKeepFile=7
;配置根条目。它使用KeyLength节点对长字符串进行哈希处理，然后将请求传递给AsyncPut
Root=(Type=KeyLength, Length=120, Inner=AsyncPut)
;配置AsyncPut条目。它使用AsyncPut节点，然后将请求传递到层级
AsyncPut=(Type=AsyncPut, Inner=Hierarchy)
;配置层级条目。这将使用多个节点，这些节点按顺序使用，直到找到读取内容（写入将转到所有可写条目）
Hierarchy=(Type=Hierarchical, Inner=Boot, Inner=Pak, Inner=EnginePak, Inner=Local, Inner=Shared)
;配置Boot节点。这将保留用于加速启动的512MB数据
Boot=(Type=Boot, Filename="%GAMEDIR%DerivedDataCache/Boot.ddc", MaxCacheSize=512)
;配置本地节点。这是具有以下设置的filesystem节点 -
;   Readonly: 能否将数据写入此层
;   Clean: 在启动时执行旧文件清理
;   Flush: 破坏DDC并重新开始
;   PurgeTransient: 不要将瞬态数据保留在DDC中
;   DeleteUnused: 清理旧文件（在后台线程上进行）
;   UnusedFileAge: 文件删除前保留时长
;   FoldersToClean: 会话中要清除的最大文件夹数。-1 = 无限
;   MaxFileChecksPerSec: 每秒检查的文件数量。
;   Path:文件系统DDC使用的路径
;   EnvPathOverride: 环境变量，如果设置，将用于代替路径。如UE-LocalDataCachePath=d:\DDC。（ 'None' 会禁用DDC）
;   CommandLineOverride: 优先于默认值/envvar设置使用的命令行参数。如-SharedDataCachePath=\\someshare\folder
;   EditorOverrideSetting: 覆盖默认/envvar/命令行值的编辑器用户设置
Local=(Type=FileSystem, ReadOnly=false, Clean=false, Flush=false, PurgeTransient=true, DeleteUnused=true, UnusedFileAge=34, FoldersToClean=-1, Path=%ENGINEDIR%DerivedDataCache, EnvPathOverride=UE-LocalDataCachePath, EditorOverrideSetting=LocalDerivedDataCache)
;配置在本地之后访问的共享DDC。这是文件系统DDC，上面已经说明参数
Shared=(Type=FileSystem, ReadOnly=false, Clean=false, Flush=false, DeleteUnused=true, UnusedFileAge=10, FoldersToClean=10, MaxFileChecksPerSec=1, Path=?EpicDDC, EnvPathOverride=UE-SharedDataCachePath, EditorOverrideSetting=SharedDerivedDataCache, CommandLineOverride=SharedDataCachePath)
;配置在本地之后访问的替代共享DDC。这是文件系统DDC，上面已经说明参数
AltShared=(Type=FileSystem, ReadOnly=true, Clean=false, Flush=false, DeleteUnused=true, UnusedFileAge=23, FoldersToClean=10, MaxFileChecksPerSec=1, Path=?EpicDDC2, EnvPathOverride=UE-SharedDataCachePath2)
;配置Project Pak节点。这是项目的预生成DDC数据文件，可以发布该文件以便减少运行时获取/生成
;请参阅文档，了解如何通过DerivedDataCache Commandlet创建DDP
Pak=(Type=ReadPak, Filename="%GAMEDIR%DerivedDataCache/DDC.ddp")
;配置Project Pak节点。这是引擎的预生成DDC数据文件，可以分发该文件以便减少运行时获取/生成
EnginePak=(Type=ReadPak, Filename=%ENGINEDIR%DerivedDataCache/DDC.ddp)</code></pre>
<h2 id="常见问题">常见问题</h2>
<h3 id="问：我是否可以有多项ddc设置？">问：我是否可以有多项DDC设置？</h3>
<p><strong>可以！</strong> 只需在 <code>DefaultEngine.ini</code> 中创建新的[YourDDCSettings]条目，然后使用 <code>-ddc=YourDDCSettings</code> 运行编辑器。
</p><p>在Epic，我们这样做有以下三个原因：
</p><ol ><li class="Default"><p>面向想要使用自己的DDC而不是全局DDC的办公室团队。
</p></li><li class="Default"><p>在创建DDC Pak时，我们使用其中一个选项控制.pak文件中的内容，例如 <code>&#91;CreateInstalledEnginePak&#93;</code>。
</p></li><li class="Default"><p>面向因网速较慢或未启用VPN，而不想使用共享DDC的在家办公人员。
</p></li></ol><p>你会看到，默认情况下，<code>BaseEngine.ini</code> 包含多个DDC条目，包括NoShared，该条目用于上面第3条（<code>-ddc=NoShared</code>）。
</p><h3 id="问：我的磁盘空间不足。我是否可以将本地ddc移到其他位置？">问：我的磁盘空间不足。我是否可以将本地DDC移到其他位置？</h3>
<p><strong>可以！</strong> 你可以打开项目，在编辑器的偏好设置中调整这个选项。此外，你可以将环境变量 <code>UE-LocalDataCachePath</code> 设置为你选择的路径即可。例如：<code>UE-LocalDataCachePath=d:\DDC</code>。
</p><ol ><li class="Default"><p>在命令提示中，输入 <code>"setx UE-LocalDataCachePath d:\DDC"</code>。
</p></li><li class="Default"><p>重新启动虚幻引擎，以及你任何相关的应用程序，例如Epic启动器、UGS或Visual Studio。
</p></li></ol><div class="note">
	<p>当主驱动器上的空间不足时，或者你在多个分支工作并希望确保数据不重复时，可以使用此方法</p>
</div><h3 id="问：我的网络连接速度很慢。我是否可以关闭共享ddc？">问：我的网络连接速度很慢。我是否可以关闭共享DDC？</h3>
<p><strong>可以！</strong> 有两种方法，具体取决于你希望临时还是永久关闭：
</p><ul ><li class="Default"><p>如果你将DDC的环境变量设置为 <code>无</code>，它将禁用共享DDC。在这种情况下，你将设置 <code>UE-SharedDataCachePath=None</code>。
</p></li><li class="Default"><p>使用 <code>-ddc=noshared</code> 启动编辑器。
</p></li></ul><h3 id="问：我是否可以更改共享ddc路径？">问：我是否可以更改共享DDC路径？</h3>
<p><strong>可以！</strong> 你可以通过设置上述 <code>UE-SharedDataCachePath</code> 更改共享DDC路径。
</p><p>但是，永远不要将 <code>UE-SharedDataCachePath</code> 设置为本地路径！这样做意味着你将同时占用计算机上的本地缓存和共享缓存——两倍的磁盘空间占用量，且收益为零！
</p><h3 id="问：我如何诊断ddc问题？">问：我如何诊断DDC问题？</h3>
<p>如果你认为编辑器无法正确读取DDC数据，请在日志文件中搜索 <code>LogDerivedDataCache</code>。
</p><pre class="prettyprint"><code>LogDerivedDataCache: 显示：最大缓存尺寸：512MB
LogDerivedDataCache: 已加载启动缓存0.07s 118MB ../../../EngineTest/DerivedDataCache/Boot.ddc.
LogDerivedDataCache: 显示：已加载启动缓存：../../../EngineTest/DerivedDataCache/Boot.ddc
LogDerivedDataCache: FDerivedDataBackendGraph:  未找到Pak pak缓存文件../../../EngineTest/DerivedDataCache/DDC.ddp，将不会使用pak缓存。
LogDerivedDataCache: 无法找到用于分层缓存层级的内部节点Pak。
LogDerivedDataCache: FDerivedDataBackendGraph:  未找到EnginePak pak缓存文件../../../Engine/DerivedDataCache/DDC.ddp，将不会使用pak缓存。
LogDerivedDataCache: 无法找到用于分层缓存层级的内部节点EnginePak。
LogDerivedDataCache: 找到环境变量UE-LocalDataCachePath=d:\DDC
LogDerivedDataCache: 使用本地数据缓存路径d:\DDC: 可写入
LogDerivedDataCache: 使用共享数据缓存路径\\epicgames.net\root\DDC-Global-UE4: 可写入</code></pre>
<p>此处你可以看到：
</p><ul ><li class="Default"><p>没有项目或Engine Pak缓存，这是我自己从Perforce编译此版本时的预期结果。
</p></li><li class="Default"><p>我的本地数据缓存路径映射到d：\ DDC，并且可以写入。
</p></li><li class="Default"><p>我正在使用可写入的Epic共享缓存。
</p></li></ul><p>你也可以使用 <code>-logcmds="LogDerivedDataCache Verbose"</code> 运行，以便打开冗余日志记录。
</p><h3 id="问：什么是s3ddc？">问：什么是S3 DDC？</h3>
<p>我们的内容量导致《堡垒之夜》DDC极其大。在新型冠状病毒肺炎爆发后，我们很快意识到，开发人员通过VPN的有限带宽从网络共享中提取所有这类数据到办公室的效率非常低，因此，我们通过S3分发了最常用的数据。
</p><p>设置引擎使用S3DDC非常容易，但是你将需要设置自动生成DDC内容并将其上传到S3。 
</p><h3 id="问：什么是iddcutilsmoduleinterface？">问：什么是IDDCUtilsModuleInterface？</h3>
<p>此接口可以让你使用哪些内容？命名DDC设置中的参数，然后可以在运行时基于平台或域动态解析这些参数。
</p><p>遗憾的是，我们没有提供示例，但是实现很简单：
</p><pre class="prettyprint"><code>#include "CoreMinimal.h"
#include "DerivedDataUtilsInterface.h"
#include "Modules/ModuleManager.h"

class FDCCUtilsModule : public IDDCUtilsModuleInterface
{
        /&#42;&#42; IDDCUtilsModuleInterface implementation &#42;/
        virtual FString GetSharedCachePath(const FString&amp; CacheName) override;

        /&#42;&#42; IModuleInterface implementation &#42;/
        virtual void StartupModule() override;

        /&#42;&#42; List of internal DDC servers &#42;/
        TMap&lt;FString, FString&gt; NameToServerMap;
}

IMPLEMENT&#95;MODULE(FDDCUtilsModule, DDCUtils)

void FDDCUtilsModule::StartupModule()
{
#if PLATFORM&#95;MAC
    NameToServerMap.Add(TEXT("?EpicDDC"), TEXT("/Volumes/UE4DDC"));
    NameToServerMap.Add(TEXT("?EpicDDC2"), TEXT("/Volumes/UE4DDC2"));
    NameToServerMap.Add(TEXT("?EpicSeaDDC"), TEXT("/Volumes/DDC"));

#elif PLATFORM&#95;LINUX
    NameToServerMap.Add(TEXT("?EpicDDC"), TEXT("/mnt/UE4DDC"));
    NameToServerMap.Add(TEXT("?EpicDDC2"), TEXT("/mnt/UE4DDC2"));
    NameToServerMap.Add(TEXT("?EpicSeaDDC"), TEXT("/mnt/DDC"));

#else
    NameToServerMap.Add(TEXT("?EpicDDC"), TEXT("\\\\epicgames.net\\root\\DDC-Global-UE4"));
    NameToServerMap.Add(TEXT("?EpicDDC2"), TEXT("\\\\epicgames.net\\root\\UE4DDC2"));
    NameToServerMap.Add(TEXT("?EpicSeaDDC"), TEXT("\\\\sea.epicgames.net\\root\\DDC"));
#endif
}

FString FDDCUtilsModule::GetSharedCachePath(const FString&amp; CacheName)
{
    FString&#42; ServerName = NameToServerMap.Find(CacheName);
    if (ServerName)
    {
        return &#42;ServerName;
    }
    else
    {
        return FString();
    }
}</code></pre>
<h3 id="问：我如何创建ddcpak？">问：我如何创建DDC Pak？</h3>
<p>创建项目的特定DDC：
</p><ul ><li class="Default"><p><code>UE4Editor.exe ProjectName -run=DerivedDataCache -fill -DDC=CreatePak</code>
</p></li></ul><p>此命令将为项目中的所有内容创建DDC。或者，你可以在运行自动化时仅提供-DDC=CreatePak，或者甚至提供用户会话，以便生成更有针对性的内容集。
</p><p>创建引擎DDC：
</p><ul ><li class="Default"><p><code>UE4Editor.exe -run=DerivedDataCache -fill -DDC=CreatePak</code>
</p></li></ul>
																	</div>
					<!-- End of Markdown converted page content -->
				</div>
												<div id="pageTags">
				<div class="title">标签</div>
					<div>
					<div class="keyword_tag_filter"><a id="tag_link" href="../../SiteIndex/index.html?tags=Programming">Programming</a></div>
					</div>
				</div>
								<div id="recommendations"></div>			</div>
						  									<div id="announcement">
			<div style="display:inline-block;margin:5px;">
				欢迎帮助改进虚幻引擎文档！请告诉我们该如何更好地为您服务。
			</div>
			<div style="margin:5px;display:inline-block;">
				<div class="btn action" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();window.open('https://epicgames.questionpro.com/t/AP9dGZkjp4');createCookie('announcement-read', new Date().getTime(), 30);">填写问卷调查</div>
				<div class="btn btn-default" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();createCookie('announcement-read', new Date().getTime(), 30);">取消</div>
			</div>
			<div class="btn-close" style="position:absolute;right:5px;top:10px;padding:3px;width:14px;height:14px;" onclick="$('#announcement').hide();"></div>
			</div>
					</div>
	</div></body>

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/ProductionPipelines/DerivedDataCache/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 10:31:59 GMT -->
</html>
