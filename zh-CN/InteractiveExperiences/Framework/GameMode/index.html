<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/InteractiveExperiences/Framework/GameMode/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 10:25:09 GMT -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="../../../../Include/Javascript/common_zh-CN.js" type="text/javascript"></script>
	<script type="text/javascript">
		var time = new Date(0);
		var preview = false;
		var relativeHTMLPath = "https://docs.unrealengine.com/4.26/";
				var pageid = 0;
				var heroimage = "";
				var lang = "zh-CN";
				var basePath = document.location.pathname.substring(0, document.location.pathname.indexOf('/' + lang + '/') + lang.length + 1);
		document.write('<base href="' +  encodeURI(basePath) + '/InteractiveExperiences/Framework/GameMode/" />');
				var udnCSS = '../../../../Include/CSS/udn_public.css';
		var udnLangCSS = '';
				udnLangCSS = './../../../../Include/CSS/udn_public_CN.css">';
				var udnOverrideCSS = '../../../../Include/CSS/skin_overrides.css';
		var udnOverrideDarkCSS = '../../../../Include/CSS/skin_overrides_dark.css';
		var fancyboxCSS = '../../../../Include/CSS/jquery.fancybox.css';
		var jqueryuiCSS = '../../../../Include/CSS/jquery-ui.min.css';
		var qtipCSS = '../../../../Include/CSS/jquery.qtip.css';
		var prettifyCSS = '../../../../Include/CSS/prettify.css';
		var navbarCSS = '../../../../Include/CSS/navBar.css';
		var twentytwentyCSS = '../../../../Include/CSS/twentytwenty.css';
		var recommendationsCSS = '../../../../Include/CSS/jquery.recommendations.css';
	</script>
    <title>Game Mode 和 Game State | 虚幻引擎文档</title>
    	    <meta name=viewport content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-control" content="no-store">
    <script  src="../../../../Include/Javascript/CustomEvent.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/udn_extras.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery-ui.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/informational.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.qtip.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/prettify.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.slimscroll.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.event.move.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/jquery.twentytwenty.js" type="text/javascript"></script>
    <script  src="../../../../Include/Javascript/lazysizes.min.js" type="text/javascript"></script>
	    <script  src="../../../../Include/Javascript/jquery.recommendations.js" type="text/javascript"></script>
	
    <link async rel="icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async rel="shortcut icon" href="../../../../../favicon.png" type="image/x-icon" />
    <link async href="../../../../Include/Images/touch_icon.png" rel="apple-touch-icon" />
    <link async href="../../../../Include/Images/touch_icon_114.png" sizes="114x114" rel="apple-touch-icon" />    
		<script  src="../../../../Include/Javascript/CollapsibleLists.js" type="text/javascript"></script>
	<script  src="../../../../Include/Javascript/navigationBarUI.js"></script>
	<script  src="../../../../Include/Javascript/navigationBar.js"></script>
		
	<link rel="alternate" href="https://docs.unrealengine.com/latest/en-US/InteractiveExperiences/Framework/GameMode/" hreflang="x-default" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/zh-CN/InteractiveExperiences/Framework/GameMode/" hreflang="zh-CN" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ja/InteractiveExperiences/Framework/GameMode/" hreflang="ja" />
<link rel="alternate" href="https://docs.unrealengine.com/latest/ko/InteractiveExperiences/Framework/GameMode/" hreflang="ko" />

	<meta name="redirect" content="Gameplay/Framework/GameMode" />
<meta name="intsourcechangelist" content="13678359" />
<meta name="availability" content="Public" />
<meta name="title" content="Game Mode 和 Game State" />
<meta name="description" content="关于 Game Mode 和 Game State 的概述" />
<meta name="version" content="4.22" />
<meta name="type" content="overview" />
<meta name="parent" content="InteractiveExperiences/Framework" />
<meta name="order" content="2" />
<meta name="keywords" content="Gameplay Framework" />
<meta name="related" content="InteractiveExperiences/Framework/Controller/PlayerController" />
<meta name="topic-image" content="InteractiveExperiences/Framework/gamemode_lander.png" />
<meta name="crumbs" content="%ROOT%,InteractiveExperiences,InteractiveExperiences/Framework" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta property="og:title" content="Game Mode 和 Game State" />
	<meta property="og:description" content="关于 Game Mode 和 Game State 的概述" />
		<meta property="og:image" content="" />
	</head>
<body id="webbgThree" style="visibility: hidden;" onload="document.body.style.visibility='visible';">
			<script>window.__tracking_base = 'https://tracking.unrealengine.com/';</script>
	<script src="../../../../../../tracking.unrealengine.com/tracking.js" async></script>    <div id="webThree">
				<div id="page_head">

			<edc-navigation blackListLangCodes='["de-de","es-es","es-mx","fr-fr","it-it","pt-br","ru-ru","pl-pl","tr-tr"]' locale="zh-CN" ></edc-navigation>
						<div id="pagenav">
				<div class="crumbs" id="crumbs">
<span id="versionContainer">
	<span id="versionSelect" class="btn btn-version" onclick="ToggleMenu($('#versionMenu'), $(this));"></span>
	<div id="versionMenu">
		<div id="4_26" data-version="4.26" class="btn btn-select" onclick="createCookie('version', '4.26', 365);SwitchVersion('4.26');">Unreal Engine 4.26 Documentation</div>
		<div id="4_27" data-version="4.27" class="btn btn-select" onclick="createCookie('version', '4.27', 365);SwitchVersion('4.27');">Unreal Engine 4.27 Documentation</div>
		<div id="5_0" data-version="5.0" class="btn btn-select" onclick="createCookie('version', '5.0', 365);SwitchVersion('5.0');">Unreal Engine 5.0 Documentation</div>
		<div id="5_1" data-version="5.1" class="btn btn-select" onclick="createCookie('version', '5.1', 365);SwitchVersion('5.1');">Unreal Engine 5.1 Documentation</div>
		<div id="5_2" data-version="5.2" class="btn btn-select" onclick="createCookie('version', '5.2', 365);SwitchVersion('5.2');">Unreal Engine 5.2 Documentation</div>
		<div id="5_3" data-version="5.3" class="btn btn-select" onclick="createCookie('version', '5.3', 365);SwitchVersion('5.3');">Unreal Engine 5.3 Documentation</div>
	</div>
</span>
	<span class="separator">></span> <a id="parent_link" href="../../index.html">创建交互体验</a>

	<span class="separator">></span> <a id="parent_link" href="../index.html">Gameplay框架</a>

<span class="separator">></span> <span id="page">Game Mode 和 Game State</span>
</div>				<div id="pageNavRight">
								<!-- Start of Search -->
												<div id="search_container">
					<form name="bodySearch" method="get" action="https://www.unrealengine.com/zh-CN/bing-search" onsubmit="return validateSearch()">
						<input type="image" src="../../../../Include/Images/search_box_icon.png" class="searchbutton"/>
						<input type="hidden" name="filter" value="文档" />
						<input type="text" name="keyword" placeholder="搜索文档……" class="searchbox" autocomplete="off"/>
					</form>
				</div>
								<!-- End of Search -->
				<div id="skinContainer">
	<div id="skinSelect" class="btn btn-skin" onclick="ToggleMenu($('#skinMenu'), $(this));"></div>
	<div id="skinMenu">
		<div id="light" class="btn btn-select" onclick="createCookie('skin', 'light', 365);location.reload();">Light Theme</div>
		<div id="dark" class="btn btn-select" onclick="createCookie('skin', 'dark', 365);location.reload();">Dark Theme</div>
	</div>
</div>				</div>
			</div>
		</div>						<div id="navWrapper">
			<div id="nav-filter-container">
				<div id="nav-filter-inner">
					<form>
						<input type="text" placeholder="Filter pages..." id="nav-filter" onchange="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, this.value);if(this.value.length == 0){$('#filter-clear').hide();}else{$('#filter-clear').show();}" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
						<button class="close-icon" id="filter-clear" type="reset" onclick="clearTimeout(filterTimer); filterTimer = setTimeout(updateNavTreeFilter,250, '');$(this).hide();"></button>
					</form>
				</div>
			</div>
			<nav id="navPanel">
			</nav>
			<div id="navigation" title="Click to toggle navigation menu"><span>></span></div>
		</div>		
		<div id="splitter">
		</div>
				<div id="contentContainer">
										<div id="pagedefault">
				<div id="product-banner">
	<div id="product-logo"></div>
</div>				<div id="pagecontainer" style="padding-right:0px;">
					<!-- Start of Markdown converted page content -->
																				<div class="hero  ">
						<div class="imgContainer"><img src="#" /></div>						<div class="info">
							<div id="pageTitle">
								<h1 id="H1TitleId">Game Mode 和 Game State</h1>
							</div>	
							<h2 >关于 Game Mode 和 Game State 的概述</h2>
							<div id="access">
								<div class="accessContainer">
																																			</div>
							</div>
						</div>
					</div>
																				<div id="maincol">
						<div class="togglesection" id="osContainer">
	<div class="normaltitle">
		<p>Choose your operating system:</p>
	</div><div class="toggleButtons">
		<div class="btn btn-default btn-toggle OS windows" id="windows" onclick="setSelector('OS', 'windows');">
			<p>Windows</p>
		</div>
		<div class="btn btn-default btn-toggle OS mac" id="mac" onclick="setSelector('OS', 'mac');">
			<p>macOS</p>
		</div>
		<div class="btn btn-default btn-toggle OS linux" id="linux" onclick="setSelector('OS', 'linux');">
			<p>Linux</p>
		</div>
	</div>
</div>																		<div id="seeAlso">
	<div style="position:relative;">
		<div id="title">参见</div>
		<div id="pageList">
			<ul>
								<li>
					<p>
						<a id="related_link" href="../Controller/PlayerController/index.html" title="PlayerController实现了从玩家获得输入数据并把它们转换为动作(比如运动、使用道具、开射武器)的功能。">PlayerController(玩家控制器)</a>
					</p>
				</li>
							</ul>
		</div>
	</div>
</div>
																														<div class="toc">
<div style="position:relative;">
    <div class="title">
    本页面的内容
    </div>
<div id="tocScroll">
    <ul>
	    		    			    <li id="">
	<p><a id="toc_link" href="#gamemodes">Game Modes</a></p>
	</li>		    			    <li id="">
	<p><a id="toc_link" href="#gamestate">Game State</a></p>
	</li>		    	        </ul>
</div>
</div>
</div>
<p>两个主要类负责处理进行中游戏的相关信息：<strong>Game Mode</strong> 和 <strong>Game State</strong>。
</p><p>即使最开放的游戏也拥有基础规则，而这些规则构成了 <strong>Game Mode</strong>。在最基础的层面上，这些规则包括：
</p><ul ><li class="Default"><p>出现的玩家和观众数量，以及允许的玩家和观众最大数量。
</p></li><li class="Default"><p>玩家进入游戏的方式，可包含选择生成地点和其他生成/重生成行为的规则。
</p></li><li class="Default"><p>游戏是否可以暂停，以及如何处理游戏暂停。
</p></li><li class="Default"><p>关卡之间的过渡，包括游戏是否以动画模式开场。
</p></li></ul><p>基于规则的事件在游戏中发生，需要进行追踪并和所有玩家共享时，信息将通过 <strong>Game State</strong> 进行存储和同步。这些信息包括：
</p><ul ><li class="Default"><p>游戏已运行的时间（包括本地玩家加入前的运行时间）。
</p></li><li class="Default"><p>每个个体玩家加入游戏的时间和玩家的当前状态。
</p></li><li class="Default"><p>当前 Game Mode 的基类。
</p></li><li class="Default"><p>游戏是否已开始。
</p></li></ul><h2 id="gamemodes">Game Modes</h2>
<p>特定的基础（如进行游戏所需要的玩家数量，或玩家加入游戏的方法）在多种类型的游戏中具有共通性。可根据开发的特定游戏进行无穷无尽的规则变化。无论规则如何，Game Modes 的任务都是定义和实现规则。Game Modes 当前常用的基类有两个。 
</p><p>4.14 版本中加入了 <code>AGameModeBase</code>，这是所有 Game Mode 的基类，是经典的 <code>AGameMode</code> 简化版本。<code>AGameMode</code> 是 4.14 版本之前的基类，仍然保留，功能 如旧，但现在是 <code>AGameModeBase</code> 的子类。由于其比赛状态概念的实现，<code>AGameMode</code> 更适用于标准游戏类型（如多人射击游戏）。<code>AGameModeBase</code> 简洁高效，是新代码项目中包含的全新默认游戏模式。
</p><h3 id="agamemodebase">AGameModeBase</h3>
<p>所有 Game Mode 均为 <code>AGameModeBase</code> 的子类。而 <code>AGameModeBase</code> 包含大量可覆盖的基础功能。部分常见函数包括：
</p><table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>函数/事件 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>目的 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>InitGame</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p><code>InitGame</code> 事件在其他脚本之前调用（包括 <code>PreInitializeComponents</code>），由 <code>AGameModeBase</code><code>PreInitializeComponents</code></p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>PreLogin</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>接受或拒绝尝试加入服务器的玩家。如它将 <code>ErrorMessage</code> 设为一个非空字符串，会导致 <code>Login</code> 函数失败。<code>PreLogin</code> 在 <code>Login</code> 前调用，Login 调用前可能需要大量时间，加入的玩家需要下载游戏内容时尤其如此。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>PostLogin</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>成功登录后调用。这是首个在 <code>PlayerController</code> 上安全调用复制函数之处。<code>OnPostLogin</code> 可在蓝图中实现，以添加额外的逻辑。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>HandleStartingNewPlayer</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>在 <code>PostLogin</code> 后或无缝游历后调用，可在蓝图中覆盖，修改新玩家身上发生的事件。它将默认创建一个玩家 pawn。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>RestartPlayer</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>调用开始生成一个玩家 pawn。如需要指定 Pawn 生成的地点，还可使用 <code>RestartPlayerAtPlayerStart</code> 和 <code>RestartPlayerAtTransform</code> 函数。<code>OnRestartPlayer</code> 可在蓝图中实现，在此函数完成后添加逻辑。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>SpawnDefaultPawnAtTransform</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>这实际生成玩家 Pawn，可在蓝图中覆盖。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>Logout</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>玩家离开游戏或被摧毁时调用。可实现 <code>OnLogout</code> 执行蓝图逻辑。</p>
			</td>
	
</tr></tbody>
</table><p>可针对游戏提供的每个比赛格式、任务类型或特殊区域创建 <code>AGameModeBase</code> 的子类。一款游戏可拥有任意数量的 Game Mode，因此也可拥有任意数量的 <code>AGameModeBase</code> 类子类；然而，给定时间上只能使用一个 Game Mode。每次关卡进行游戏实例化时 Game Mode Actor 将通过 <code>UGameEngine::LoadMap()</code> 函数进行实例化。 
</p><p>Game Mode 不会复制到加入多人游戏的远程客户端；它只存在于服务器上，因此本地客户端可看到之前使用过的留存 Game Mode 类（或蓝图）；但无法访问实际的实例并检查其变量，确定游戏进程中已发生哪些变化。如玩家确实需要更新与当前 Game Mode 相关的信息，可将信息保存在一个 <code>AGameStateBase</code> Actor 上，轻松保持同步。<code>AGameStateBase</code> Actor 随 Game Mode 而创建，之后被复制到所有远程客户端。
</p><h3 id="agamemode">AGameMode</h3>
<p><code>AGameMode</code> 是 <code>AGameModeBase</code> 的子类，拥有一些额外的功能支持多人游戏和旧行为。所有新建项目默认使用 <code>AGameModeBase</code>。如果需要此额外行为，可切换到从 <code>AGameMode</code> 进行继承。如从 <code>AGameMode</code> 进行继承，也可从 <code>AGameState</code> 继承游戏状态（其支持比赛状态机）。
</p><p><code>AGameMode</code> 包含一个跟踪比赛状态或整体游戏流程的状态机。可使用 <code>GetMatchState</code> 或 <code>HasMatchStarted</code>、<code>IsMatchInProgress</code> 和 <code>HasMatchEnded</code> 之类的封装器查询当前的状态。以下是可能的比赛状态：
</p><ul ><li class="Default"><p><code>EnteringMap</code> 是初始状态。Actor 尚未进行 tick，世界场景尚未完整初始化。内容完整加载后将过渡到下个状态。
</p></li><li class="Default"><p><code>WaitingToStart</code> 是下个状态，进入时将调用 <code>HandleMatchIsWaitingToStart</code>。Actor 正在进行 tick，但玩家尚未生成。如 <code>ReadyToStartMatch</code> 返回 <em>true</em> 或 <code>StartMatch</code> 被调用，它将过渡到下个状态。
</p></li><li class="Default"><p><code>InProgress</code> 是游戏主体所发生的状态。进入此状态时将调用 <code>HandleMatchHasStarted</code>，然后在所有 Actor 上调用 <code>BeginPlay</code>。此时，正常游戏进程已在进行中。<code>ReadyToEndMatch</code> 返回 <em>true</em> 或调用 <code>EndMatch</code> 时比赛将过渡到下个状态。
</p></li><li class="Default"><p><code>WaitingPostMatch</code> 是倒数第二个状态，进入时将调用 <code>HandleMatchHasEnded</code>。Actor 仍在 tick，但新玩家无法加入。地图转换开始时它将过渡到下个状态。
</p></li><li class="Default"><p><code>LeavingMap</code> 是正常流程中的最后一个状态，进入时将调用 <code>HandleLeavingMap</code>。转换到新地图时比赛将保持在此状态中，进入新地图时将过渡回到 <code>EnteringMap</code>。
</p></li><li class="Default"><p><code>Aborted</code> 是失败状态，调用 <code>AbortMatch</code> 可开始此状态。出现无法恢复的错误时将进行此设置。
</p></li></ul><p>游戏状态将固定为 <code>InProgress</code>，因为这是调用 <code>BeginPlay</code>、actor 开始 tick 的状态。然而，个体游戏可能覆盖这些状态的行为，用更复杂的规则构建一个多人游戏，如在一款多人射击游戏中等待其他玩家加入时允许玩家在关卡中自由飞行。
</p><h3 id="gamemode蓝图">Game Mode 蓝图</h3>
<p>可创建派生自 Game Mode 类的蓝图，并将它们用作项目或关卡的默认 Game Mode。
</p><p>派生自 Game Mode 的蓝图可进行以下默认设置：
</p><ul ><li class="Default"><p>默认 <a id="content_link"filter-data="tag_gameplay_framework" href="../Pawn/index.html" ><span>Pawn</span></a> 类
</p></li><li class="Default"><p>HUD 类
</p></li><li class="Default"><p><a id="content_link"filter-data="tag_playercontroller tag_controller tag_gameplay" href="../Controller/PlayerController/index.html" ><span>PlayerController(玩家控制器)</span></a> 类
</p></li><li class="Default"><p>Spectator 类
</p></li><li class="Default"><p>Game State 类
</p></li><li class="Default"><p>Player State 类
</p></li></ul><p>此外，Game Mode 的蓝图十分实用，因为它们无需调整代码即可启用变量调整。因此可用于使单一 Game Mode 适用到多个不同关卡，无需使用硬编码资源引用或为每次调整请求工程支持和代码修改。
</p><h3 id="设置gamemode">设置 Game Mode</h3>
<p>设置关卡的 Game Mode 有多种，此处的排序从优先级最低到最高：
</p><ul ><li class="Default"><p>设置 <code>DefaultEngine.ini</code> 文件的 <code>/Script/EngineSettings.GameMapsSettings</code> 部分的 <code>GlobalDefaultGameMode</code> 输入将设置项目中所有地图的默认游戏模式。
</p><pre class="prettyprint"><code>&#91;/Script/EngineSettings.GameMapsSettings&#93;
GlobalDefaultGameMode="/Script/MyGame.MyGameGameMode"
GlobalDefaultServerGameMode="/Script/MyGame.MyGameGameMode"</code></pre></li><li class="Default"><p>在编辑器中 <strong>World Settings</strong> 标签下设置 <strong>GameMode Override</strong> 即可覆盖个体地图的项目设置。
</p><p><picture>
		<source data-srcset="./../../../../Images/InteractiveExperiences/Framework/GameMode/WorldSettings_GameMode.jpg">
		<img class="  lazyload" alt="WorldSettings_GameMode.png" data-src="../../../../Images/InteractiveExperiences/Framework/GameMode/WorldSettings_GameMode.jpg" />
</picture>

</p></li><li class="Default"><p>URL 可被传到可执行文件，强制游戏加载时带特定选项。使用 <code>game</code> 选项设置游戏模式。查看 <a id="content_link" href="../../../ProductionPipelines/CommandLineArguments/index.html" ><span>命令行参数</span></a> 中的详细内容。
</p><pre class="prettyprint"><code>UE4Editor.exe /Game/Maps/MyMap?game=MyGameMode -game</code></pre></li><li class="Default"><p>最后，可在 <code>DefaultEngine.ini</code> 文件的 <code>/Script/Engine.WorldSettings/</code> 部分中设置地图前缀（和 URL 法的别名）。这些前缀设置所有拥有特定前缀的地图的默认游戏模式。
</p><pre class="prettyprint"><code>&#91;/Script/EngineSettings.GameMapsSettings&#93;
+GameModeMapPrefixes=(Name="DM",GameMode="/Script/UnrealTournament.UTDMGameMode")
+GameModeClassAliases=(Name="DM",GameMode="/Script/UnrealTournament.UTDMGameMode")</code></pre></li></ul><div class="note">
	<p>请查阅 [设置 Game Mode] 文档中设置 Game Mode 的范例。</p>
</div><h2 id="gamestate">Game State</h2>
<p><strong>Game State</strong> 负责启用客户端监控游戏状态。从概念上而言，Game State 应该管理所有已连接客户端已知的信息（特定于 Game Mode 但不特定于任何个体玩家）。它能够追踪游戏层面的属性，如已连接玩家的列表、夺旗游戏中的团队得分、开放世界游戏中已完成的任务，等等。
</p><p>Game State 并非追踪玩家特有内容（如夺旗比赛中特定玩家为团队获得的分数）的最佳之处，因为它们由 <strong>Player State</strong> 更清晰地处理。整体而言，GameState 应该追踪游戏进程中变化的属性。这些属性与所有人皆相关，且所有人可见。Game mode 只存在于服务器上，而 Game State 存在于服务器上且会被复制到所有客户端，保持所有已连接机器的游戏进程更新。
</p><p><code>AGameStateBase</code> 是基础实现，其部分默认功能包括：
</p><table >
	<caption></caption>
	<col align=""/>
	<col align=""/>
	<thead>
		<tr >

	<th rowspan="1" colspan="1" >
			<p>函数或变量 </p>
			</th>
	
	<th rowspan="1" colspan="1" >
			<p>使用 </p>
			</th>
	
</tr>	</thead>
<tbody>
	<tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>GetServerWorldTimeSeconds</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>这是 <code>UWorld</code> 函数 <code>GetTimeSeconds</code> 的服务器版本，将在客户端和服务器上同步，因此该时间可用于复制，十分可靠。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>PlayerArray</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>这是所有 <code>APlayerState</code> 对象的阵列，对游戏中所有玩家执行操作时十分实用。</p>
			</td>
	
</tr><tr >

	<td rowspan="1" colspan="1" align="">
			<p><code>HasBegunPlay</code></p>
			</td>
	
	<td rowspan="1" colspan="1" align="">
			<p>如 <code>BeginPlay</code> 函数在游戏中的 actor 上调用，则返回 true。</p>
			</td>
	
</tr></tbody>
</table><p><code>AGameStateBase</code> 通常在 C++ 或蓝图中延展，包含用于使游戏中玩家知晓当前情况的额外变量和函数。进行的特定修改通常基于 Game State 的配对 Game Mode。Game Mode 自身也可将其默认 Game State 类覆盖为派生自 <code>AGameStateBase</code> 的任意 C++ 类或蓝图。</p>
																	</div>
					<!-- End of Markdown converted page content -->
				</div>
												<div id="pageTags">
				<div class="title">标签</div>
					<div>
					<div class="keyword_tag_filter"><a id="tag_link" href="../../../SiteIndex/index.html?tags=Gameplay%20Framework">Gameplay Framework</a></div>
					</div>
				</div>
								<div id="recommendations"></div>			</div>
						<div id="footer"></div>									<div id="announcement">
			<div style="display:inline-block;margin:5px;">
				欢迎帮助改进虚幻引擎文档！请告诉我们该如何更好地为您服务。
			</div>
			<div style="margin:5px;display:inline-block;">
				<div class="btn action" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();window.open('https://epicgames.questionpro.com/t/AP9dGZkjp4');createCookie('announcement-read', new Date().getTime(), 30);">填写问卷调查</div>
				<div class="btn btn-default" style="margin-top:-6px;display:inline-block;" onclick="$('#announcement').hide();createCookie('announcement-read', new Date().getTime(), 30);">取消</div>
			</div>
			<div class="btn-close" style="position:absolute;right:5px;top:10px;padding:3px;width:14px;height:14px;" onclick="$('#announcement').hide();"></div>
			</div>
					</div>
	</div></body>

<!-- Mirrored from docs.unrealengine.com/4.26/zh-CN/InteractiveExperiences/Framework/GameMode/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 10:25:10 GMT -->
</html>
